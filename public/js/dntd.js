!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=6)}([function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(8)),r(n(9)),r(n(10)),r(n(11))},function(e,t){e.exports=m},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(18)),r(n(25)),r(n(26)),r(n(27)),r(n(28)),r(n(29)),r(n(30)),r(n(31))},,,function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(19)),r(n(20)),r(n(21)),r(n(22)),r(n(23)),r(n(24))},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(n(1)),s=n(12),i=n(33),a=n(2),l=document.getElementById("root");t.serviceWorkerModel=new a.ServiceWorkerModel,t.syncerModel=new a.SyncerModel,t.syncerController=new s.SyncerController(t.syncerModel),t.libraryModel=(new a.LibraryFactory).createLibrary(),null!==l&&o.default.route(l,"/",{"/":i.signinView,"/signin":i.signinView,"/library":i.libraryView,"/library/:shelfId":i.shelfView,"/library/:shelfId/:journalId":i.journalView})},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(35)),r(n(36)),r(n(37))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.NONE=0]="NONE",e[e.AND=1]="AND",e[e.OR=2]="OR"}(t.SearchType||(t.SearchType={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.OFF="0",e.WORKING="1",e.FAIL_GET_SPREADSHEET_SHEETS="2",e.FAIL_GET_RANGE="3",e.FAIL_UPDATE_RANGE="4",e.FAIL_DELETE_ROW="5",e.RETURN_ROWS="6",e.DEMO="7"}(t.TestMode||(t.TestMode={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.AUTH_UPDATE=0]="AUTH_UPDATE",e[e.DELETE_ROW=1]="DELETE_ROW",e[e.UPDATE_ROW=2]="UPDATE_ROW",e[e.GET_ROWS=3]="GET_ROWS",e[e.GET_SHEETS=4]="GET_SHEETS",e[e.TEST_MODE_UPDATE=5]="TEST_MODE_UPDATE",e[e.UNPAUSE=6]="UNPAUSE",e[e.GET_SPREADSHEET=7]="GET_SPREADSHEET",e[e.EXTEND_SHEET=8]="EXTEND_SHEET",e[e.CREATE_ROW=9]="CREATE_ROW",e[e.MOVE_ROW=10]="MOVE_ROW"}(t.SyncerPayloadType||(t.SyncerPayloadType={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.ROWS=0]="ROWS",e[e.SHEETS=1]="SHEETS",e[e.SYNCER_STATE=2]="SYNCER_STATE",e[e.ERROR=3]="ERROR",e[e.REAUTH=4]="REAUTH"}(t.SyncerResponseType||(t.SyncerResponseType={})),function(e){e.PAUSED="cloud_off",e.UPLOADING="cloud_upload",e.DOWNLOADING="cloud_download",e.SYNCED="cloud_done"}(t.SyncerState||(t.SyncerState={}))},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(15)),r(n(32))},,,function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,s){function i(e){try{l(r.next(e))}catch(e){s(e)}}function a(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}l((r=r.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=o(n(1)),i=n(16),a=n(0),l=n(2),u=n(5),c=n(6);function d(e){return r(this,void 0,void 0,(function*(){if(console.log(`${e} = ${l.googleModel.isSignedIn}`),l.googleModel.isSignedIn=e,e){l.googleModel.user=l.googleModel.gapi_.auth2.getAuthInstance().currentUser.get();let e=l.googleModel.getToken();void 0!==e&&c.syncerController.updateAuth(e),yield c.libraryModel.load()}s.default.redraw()}))}t.googleController={signIn:function(){l.googleModel.gapi_.auth2.getAuthInstance().signIn()},signOut:function(){l.googleModel.gapi_.auth2.getAuthInstance().signOut()},initGapi:function(){let e=u.getTestMode()===a.TestMode.OFF?gapi:new i.MockGapi;l.googleModel.gapi_=e,l.googleModel.gapi_.load("auth2",()=>{l.googleModel.gapi_.auth2.init({scope:l.googleModel.scope,client_id:l.googleModel.clientId}).then(()=>{l.googleModel.gapi_.auth2.getAuthInstance().isSignedIn.listen(d),d(l.googleModel.gapi_.auth2.getAuthInstance().isSignedIn.get())})})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(17))},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,s){function i(e){try{l(r.next(e))}catch(e){s(e)}}function a(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});t.MockGapi=class{constructor(){this.auth2=new o}load(e,t){t()}};class o{getAuthInstance(){return new a}init(e){return r(this,void 0,void 0,(function*(){}))}}class s{get(){return new i}}class i{getAuthResponse(){return{expires_in:9999,access_token:"faketoken"}}reloadAuthResponse(){return r(this,void 0,void 0,(function*(){return{expires_in:9999,access_token:"faketoken"}}))}}t.MockGoogleUser=i;class a{constructor(){this.isSignedIn=new l,this.currentUser=new s}signOut(){}signIn(){}}class l{constructor(){this.listen=e=>{},this.get=()=>!0}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(5);t.TagModel=class{constructor(e,t,n,r,o){this.frq=1,this.raw=e,this.flag=t,this.key=n,this.separator=void 0!==r?r:null,this.val=void 0!==o?o:null,this.clean=this.cleanTagString(this.raw),this.cleanKey=this.cleanTagString(this.key),this.cleanVal=null!==this.val?this.cleanTagString(this.val):null}renderKey(){return"<span onclick=\"tagOnClick(event, '"+this.flag+this.cleanKey+(this.separator?this.separator:"")+'\')" class="'+(this.separator?"tagKey":null===this.val?"simpleTag":"roundTagVal")+'">'+this.flag+this.key+"</span>"}renderVal(e){var t;return"<span onclick=\"tagOnClick(event, '"+this.flag+this.cleanKey+this.separator+(null===(t=this.cleanVal)||void 0===t?void 0:t.replace(/'/,"\\'"))+'\')" class="'+(e?"roundTagVal":"tagVal")+'">'+(e?"":this.separator)+(this.val||"")+"</span>"}render(e){return this.separator?e?this.renderVal(e):this.renderKey()+this.renderVal(e):this.renderKey()}cleanTagString(e){return e=(e=(e=r.escapeHtml(e)).endsWith("'s")?e.substring(0,e.length-2):e).toLowerCase()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0);t.getHash=function(){return new URL(window.location.href).hash},t.getTestMode=function(){let e=new URL(window.location.href);if("#!demo"===e.hash)return r.TestMode.DEMO;let t=e.searchParams.get("test");return null!==t&&(n=t,Object.values(r.TestMode).includes(n))?t:r.TestMode.OFF;var n}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(n(1));class s extends Error{constructor(e,t){super(e),this.friendlyMsg=t,console.warn(e),o.default.redraw()}}t.FriendlyError=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.escapeHtml=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCaretPosition=function(e){var t=window.getSelection(),n=[0,0];if(t.anchorNode==e)n=[t.anchorNode.innerText.length,t.extentNode.innerText.length];else{var r=[t.anchorNode,t.extentNode];if(!e.contains(t.anchorNode)||!e.contains(t.extentNode))return;var o,s=[0,0];!function e(t,n){var r=n(t);for(t=t.firstChild;!1!==r&&t;t=t.nextSibling)r=e(t,n)}(e,(function(e){for(o=0;o<2;o++)if(e==r[o]&&(s[o]=1,s[0==o?1:0]))return;if(e.textContent&&!e.firstChild)for(o=0;o<2;o++)s[o]||(n[o]+=e.textContent.length)})),n[0]+=t.anchorOffset,n[1]+=t.extentOffset}return n[0]<=n[1]?n:[n[1],n[0]]},t.setCaretPosition=function e(t,n){if(null!==t&&null!==n){for(var r of t.childNodes)if(3==r.nodeType){if(r.length>=n){let e=document.createRange(),t=window.getSelection();return e.setStart(r,n),e.collapse(!0),t.removeAllRanges(),t.addRange(e),-1}n-=r.length}else if(-1==(n=e(r,n)))return-1;return n}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tagPattern=/(\@)([\w-']+)+(:)?([\w-'\*]+)?/g,t.spreadsheetIdPattern=/\/spreadsheets\/d\/([a-zA-Z0-9-_]+)/g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setStoredSpreadsheetId=function(e){localStorage.setItem("spreadsheetId",e)},t.getStoredSpreadsheetId=function(){return localStorage.getItem("spreadsheetId")||void 0},t.setStoredSpreadsheetUrls=function(e){void 0!==e&&localStorage.setItem("spreadsheetUrls",e)},t.getStoredSpreadsheetUrls=function(){return localStorage.getItem("spreadsheetUrls")||void 0},t.setStoredHideEntriesKeys=function(e){localStorage.setItem("hideEntriesKeys",e?"1":"0")},t.getStoredHideEntriesKeys=function(){return"1"===localStorage.getItem("hideEntriesKeys")},t.setStoredHideTagRefines=function(e){localStorage.setItem("hideTagRefines",e?"1":"0")},t.getStoredHideTagRefines=function(){return"1"===localStorage.getItem("hideTagRefines")},t.getStoredSpreadsheetSheetId=function(e){let t=localStorage.getItem(e+"-sheetId")||void 0;return void 0!==t?parseInt(t):void 0},t.setStoredSpreadsheetSheetId=function(e,t){localStorage.setItem(e+"-sheetId",t.toString())},t.delStoredSpreadsheetSheetId=function(e){localStorage.removeItem(e+"-sheetId")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2),o=n(5);t.EntryModel=class{constructor(e,t){this.tags=new Map,this.hovered=!1,this.focused=!1,this.clean="",this.tokens=[],this.rendered="",this.savedClean="",this.tagMatches=[],this.readableRendered="",this.rawText="",this.savedText="",this.raw=e||"",this.saved=void 0!==t?t:this.raw}get saved(){return this.savedText}set saved(e){this.savedText=e,this.savedClean=e.toLowerCase(),this.tags=this.getTags(this.tagMatches)}get raw(){return this.rawText}set raw(e){this.rawText=e,this.clean=this.raw.toLowerCase();let t=o.escapeHtml(this.rawText);this.tokens=this.getTokens(this.clean),this.tagMatches=this.getTagMatches(t),this.rendered=this.render(t,this.tagMatches),this.readableRendered=this.render(t,this.tagMatches,!0)}render(e,t,n){for(let{tag:r,match:o}of t){let t=e.split("");t.splice(o.index,o[0].length,r.render(n)),e=t.join("")}return e}getTags(e){let t=new Map;for(let{tag:n}of e)t.has(n.clean)?t.get(n.clean).frq+=1:t.set(n.clean,n);return t}getTagMatches(e){let t=[],n=e.matchAll(o.tagPattern);for(let e of n){let n=new r.TagModel(e[0],e[1],e[2],e[3],e[4]);t.push({tag:n,match:e})}return t.sort((e,t)=>e.match.index>t.match.index?-1:1),t}getTokens(e){return e.split(" ").filter(e=>void 0!==e&&""!==e.trim()&&"-"!==e)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2);t.ShelfFactory=class{constructor(){this.journalFactory=new r.JournalFactory}createShelf(e){if(e.spreadsheetId&&e.properties&&e.properties.title&&e.sheets){let t=this.getJournals(e.spreadsheetId,e.sheets);return new o(e.spreadsheetId,e.properties.title,t)}}getJournals(e,t){let n=[];return t.forEach(t=>{if(t.properties&&t.properties.title&&t.properties.sheetId){let r=this.journalFactory.createJournal(t.properties.sheetId,e,t.properties.title);if(void 0===r)return;n.push(r)}}),n}};class o{constructor(e,t,n){this.id=e,this.title=t,this.journals=n}}t.ShelfModel=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0);t.SyncerModel=class{constructor(){this.requestsCounter=0,this.requests=new Map,this.state=r.SyncerState.DOWNLOADING,this.user=null,this.worker=new Worker("./js/syncWebWorker.js"),this.worker.onmessage=e=>this.onMessage(e)}pushSyncerTask(e){let t="payload-"+this.requestsCounter++;return new Promise((n,r)=>{this.requests.set(t,({payload:e,error:t})=>{t?r(t):n(e)}),this.worker.postMessage({id:t,payload:e})})}onMessage(e){let{id:t,payload:n,error:r}=e.data;null!==t&&this.requests.has(t)&&(this.requests.get(t)({payload:n,error:r}),this.requests.delete(t))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.googleModel=new class{constructor(e){this.isSignedIn=e,this.src="https://apis.google.com/js/api.js",this.scope=["https://www.googleapis.com/auth/spreadsheets"].join(" "),this.clientId="893904323330-moo1k9s19qp40kr747pftdo29ejdef0o.apps.googleusercontent.com"}getToken(){if(this.user){return this.user.getAuthResponse().access_token}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2);t.JournalFactory=class{createJournal(e,t,n){return new o(e,t,n)}};class o{constructor(e,t,n){this.entries=[],this.id=e,this.title=n,this.tags=new Map,this.shelfId=t}buildTags(){let e=new Map;for(let t of Array.from(this.entries.values()).reverse())for(let[n,o]of t.tags)e.has(n)?e.get(n).frq+=o.frq:e.set(n,new r.TagModel(o.raw,o.flag,o.key,o.separator,o.val));return e}addEntry(e,t){this.entries.splice(e,0,new r.EntryModel(t)),this.tags=this.buildTags()}updateEntry(e,t){let n=this.entries[e];n.saved!==t&&(n.saved=t,this.tags=this.buildTags())}deleteEntry(e){this.entries.splice(e,1)[0],this.tags=this.buildTags()}moveEntry(e,t){let n=this.entries[e];this.entries.splice(e,1),this.entries.splice(t,0,n)}}t.JournalModel=o},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,s){function i(e){try{l(r.next(e))}catch(e){s(e)}}function a(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const o=n(6),s=n(2),i=n(5);t.LibraryFactory=class{createLibrary(){let e=i.getStoredSpreadsheetUrls(),t=this.getSpreadsheetIdsFromUrls(e);return new a(t)}getSpreadsheetIdsFromUrls(e){let t=[];if(e){Array.from(e.matchAll(i.spreadsheetIdPattern)).forEach(e=>t.push(e[1]))}return t}};class a{constructor(e){this.shelves=[],this.shelfFactory=new s.ShelfFactory,this.shelfIds=e}load(){return r(this,void 0,void 0,(function*(){let e=yield this.getSpreadsheets(this.shelfIds);this.shelves=this.getShelves(e)}))}unload(){this.shelves=[]}getShelves(e){let t=[];return e.forEach(e=>{let n=this.shelfFactory.createShelf(e);void 0!==n&&t.push(n)}),t}getSpreadsheets(e){return r(this,void 0,void 0,(function*(){let t=[];return yield Promise.all(e.map(e=>o.syncerController.getSpreadsheet(e))).then(e=>e.forEach(e=>{void 0!==e.spreadsheet&&t.push(e.spreadsheet)})),t}))}}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,s){function i(e){try{l(r.next(e))}catch(e){s(e)}}function a(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const o=n(5);t.ServiceWorkerModel=class{constructor(){if(!("serviceWorker"in navigator))throw new o.FriendlyError("serviceWorker not supported","Your browser is not supported.");window.addEventListener("load",()=>r(this,void 0,void 0,(function*(){yield navigator.serviceWorker.register("../serviceWorker.js")})))}}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,s){function i(e){try{l(r.next(e))}catch(e){s(e)}}function a(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0);t.SyncerController=class{constructor(e){this.syncerModel=e}updateTestMode(e){return r(this,void 0,void 0,(function*(){return yield this.syncerModel.pushSyncerTask({type:o.SyncerPayloadType.TEST_MODE_UPDATE,testMode:e})}))}updateAuth(e){return this.syncerModel.pushSyncerTask({type:o.SyncerPayloadType.AUTH_UPDATE,token:e})}getSpreadsheet(e){let t={type:o.SyncerPayloadType.GET_SPREADSHEET,spreadsheetId:e,spreadsheet:void 0};return this.syncerModel.pushSyncerTask(t)}getSheets(e){return r(this,void 0,void 0,(function*(){let t={type:o.SyncerPayloadType.GET_SHEETS,spreadsheetId:e,sheets:[]};return yield this.syncerModel.pushSyncerTask(t)}))}getRows(e,t,n){return r(this,void 0,void 0,(function*(){let r={type:o.SyncerPayloadType.GET_ROWS,spreadsheetId:e,sheetTitle:n,sheetId:t,rows:[]};return yield this.syncerModel.pushSyncerTask(r)}))}deleteRow(e,t,n){return r(this,void 0,void 0,(function*(){return yield this.syncerModel.pushSyncerTask({type:o.SyncerPayloadType.DELETE_ROW,spreadsheetId:t,sheetId:n,idx:e})}))}updateRow(e,t,n,s,i){return r(this,void 0,void 0,(function*(){return yield this.syncerModel.pushSyncerTask({type:o.SyncerPayloadType.UPDATE_ROW,spreadsheetId:t,sheetTitle:s,sheetId:n,content:i,idx:e})}))}unpause(){return r(this,void 0,void 0,(function*(){return yield this.syncerModel.pushSyncerTask({type:o.SyncerPayloadType.UNPAUSE})}))}}},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(34)),r(n(38)),r(n(39)),r(n(40))},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(n(1)),s=n(7);t.shelfView=function(){return{view:function(){return o.default("#shelf",[o.default(s.googleComponent),o.default(s.journalsComponent)])}}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(n(1)),s=n(2),i=n(12);t.googleComponent=function(){return{view:function(){return o.default("#googleApi",[void 0===s.googleModel.isSignedIn||s.googleModel.isSignedIn?null:o.default(".preamble","PREAMBLE MSG"),s.googleModel.isSignedIn?o.default("button",{onclick:()=>i.googleController.signOut(),class:"authButton"},"Sign Out"):o.default("button",{onclick:()=>i.googleController.signIn(),class:"authButton"},"Sign In"),o.default("script",{async:!0,defer:!0,src:s.googleModel.src,onload:()=>{s.googleModel.isSignedIn||i.googleController.initGapi()}})])}}}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,s){function i(e){try{l(r.next(e))}catch(e){s(e)}}function a(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}l((r=r.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=o(n(1)),i=n(6),a=n(5);t.shelvesComponent=function(){let e=!1,t=a.getStoredSpreadsheetUrls(),n=t;function o(){return s.default("button",{id:"addShelf",onclick:()=>r(this,void 0,void 0,(function*(){e&&a.setStoredSpreadsheetUrls(n),t=a.getStoredSpreadsheetUrls(),e=!e}))},e?" âœ“ ":"+/-")}return{view:function(){return void 0===i.libraryModel?s.default("#shelves","Library Loading"):s.default("#shelves",[e?s.default("textarea",{id:"spreadsheetURLs",placeholder:"Enter list of Google Sheets Spreadsheet URLs here",value:t,oninput:e=>n=e.target.value}):null,o(),i.libraryModel.shelfIds.map(e=>s.default("li",s.default("a",{href:"#/library/"+e},e)))])}}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(n(1));t.journalsComponent=function(){return{view:function(){let e=o.default.route.param("shelfId");return o.default("#journals",["0","123","456"].map(t=>o.default("li",o.default("a",{href:`#/library/${e}/${t}`},t))))}}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(n(1)),s=n(2),i=n(7);t.signinView=function(){return{view:function(){return o.default("#auth",[o.default(i.googleComponent)])},onupdate:function(){s.googleModel.isSignedIn&&(window.location.hash="/library")}}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(n(1)),s=n(7);t.libraryView=function(){return{view:function(){return o.default("#library",[o.default(s.googleComponent),o.default(s.shelvesComponent)])}}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(n(1)),s=n(7);t.journalView=function(){return{view:function(){let e=o.default.route.param("shelfId"),t=o.default.route.param("journalId");return o.default("#shelf",[o.default(s.googleComponent),o.default("span",`Shelf: ${e}, Journal: ${t}`)])}}}}]);
//# sourceMappingURL=dntd.js.map