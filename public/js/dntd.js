(()=>{"use strict";var e={7278:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,l){function s(e){try{i(n.next(e))}catch(e){l(e)}}function a(e){try{i(n.throw(e))}catch(e){l(e)}}function i(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}i((n=n.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const l=o(r(3615)),s=r(5045),a=r(3607);t.addShelvesComponent=function(){let e="",t=!1;function r(){if(0===a.libraryModel.shelves.size)return l.default("span","Add Google Spreadsheet URLs here to get started. ")}function o(){return l.default("button",{id:"addShelvesButton",onclick:()=>n(this,void 0,void 0,(function*(){t&&s.libraryController.addShelves(e),e="",t=!t}))},t?" ✓ ":"+/-")}return{view:function(){return l.default("#addShelves",[r(),o(),t?l.default("textarea",{id:"addShelvesText",placeholder:"Enter list of Google Sheets Spreadsheet URLs here",oninput:t=>e=t.target.value}):null])}}}},3418:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(r(3615)),l=r(3607),s=r(5045);t.breadcrumbComponent=function(){return{view:function(){if(l.googleModel.isSignedIn)return o.default("#breadcrumb",s.urlController.getBreadcrumbTrail())}}}},6784:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,l){function s(e){try{i(n.next(e))}catch(e){l(e)}}function a(e){try{i(n.throw(e))}catch(e){l(e)}}function i(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}i((n=n.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const l=o(r(3615)),s=r(1118),a=r(5045);t.composeComponent=function(){var e={el:null,pos:null};const t=s.entryFactory.createBaseEntry(),r=s.entryFactory.createBaseEntry(),o=s.entryFactory.createBaseEntry(),i={placeholder:"Static Entry Prefix"},u={placeholder:"Entry Content"},d={placeholder:"Static Entry Suffix"};function c(t,o,l){let s={contenteditable:"true",class:"entry breakwrap column",onkeydown:e=>n(this,void 0,void 0,(function*(){return yield function(e,t){return n(this,void 0,void 0,(function*(){if(13==e.keyCode&&!e.shiftKey){e.preventDefault();let n=[document.getElementById("prefix"),document.getElementById("content"),document.getElementById("suffix")].map((e=>e.innerText)).join("");a.entryController.update(r,"");let o=t.entries.length;a.journalController.createEntry(t,o,n)}}))}(e,o)})),oninput:r=>function(t,r){let n=a.caretController.getCaretPosition(t.target);e.pos=n?n[1]:null,e.el=t.target,a.entryController.update(r,t.target.innerText)}(r,t),onupdate:()=>(a.caretController.setCaretPosition(e.el,e.pos),e.pos=null,void(e.el=null))};return Object.assign(s,l)}return{view:function(){const e=a.urlController.getActiveJournal();if(void 0!==e&&!1!==e.loaded)return l.default("#compose",[l.default("#prefix",c(t,e,i),l.default.trust(t.rendered)),l.default("#content",c(r,e,u),l.default.trust(r.rendered)),l.default("#suffix",c(o,e,d),l.default.trust(o.rendered))])}}}},3736:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,l){function s(e){try{i(n.next(e))}catch(e){l(e)}}function a(e){try{i(n.throw(e))}catch(e){l(e)}}function i(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}i((n=n.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const l=o(r(3615)),s=r(5045);t.entriesComponent=function(){const e={pos:null,el:null};function t(e){return s.searchController.filteredEntries(e.entries).map((({idx:e,entry:t})=>function(e,t){return l.default(".entryWrap",{id:`entry-${e.id}`,class:`entry-idx-${t}`},[r(e.journal,t),a(e,t),o(e,t),r(e.journal,t+1)])}(t,e)))}function r(e,t){return l.default("button",{class:"createEntry",id:`createEntry-${t}`,onclick:()=>n(this,void 0,void 0,(function*(){return s.journalController.createEntry(e,t)}))},"ins")}function o(e,t){return l.default("button",{id:`del-entry-${e.id}`,class:`del del-entry-idx-${t}`,onclick:()=>n(this,void 0,void 0,(function*(){return s.journalController.deleteEntry(e.journal,t)}))},"del")}function a(t,r){return l.default("div",function(t,r){return{id:`entry-${t.id}-content`,contenteditable:"true",class:`entry breakwrap column entry-idx-${r}-content`,onkeydown:e=>function(e){e.redraw=!1,13!=e.keyCode||e.shiftKey||(e.preventDefault(),e.target.blur())}(e),oninput:r=>function(t,r){let n=s.caretController.getCaretPosition(t.target);e.pos=n?n[1]:null,e.el=t.target,s.entryController.update(r,t.target.innerText)}(r,t),onupdate:t=>function(t){t.redraw=!1,s.caretController.setCaretPosition(e.el,e.pos),e.pos=null,e.el=null}(t),onblur:e=>function(e,t,r){return n(this,void 0,void 0,(function*(){e.redraw=!1,s.journalController.updateEntry(t.journal,t,r,e.target.innerText)}))}(e,t,r)}}(t,r),l.default.trust(t.rendered))}return{view:function(){let e=s.urlController.getActiveShelf();const r=s.urlController.getActiveJournal();return e&&r?l.default("#entries",[l.default(".tempguidancePre","Entries"),t(r)]):null}}}},879:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(r(3615)),l=r(3607),s=r(5045);t.errorsComponent=function(){return{view:function(){return o.default("#errorsContainer",0!==l.errorsModel.errors.length?o.default("#errors",l.errorsModel.errors.map(((e,t)=>function(e,t){return o.default("div",[o.default("span",{id:`error-${t}`},e.friendlyMsg),o.default("button",{onclick:()=>s.errorsController.remove(t),class:"dismissErrorButton"},"Dismiss")])}(e,t)))):null)}}}},7266:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(r(3615)),l=r(3607),s=r(5045);t.googleComponent=function(){return{view:function(){return o.default("#googleApi",[void 0===l.googleModel.isSignedIn||l.googleModel.isSignedIn?null:o.default(".preamble","PREAMBLE MSG"),l.googleModel.isSignedIn?o.default("button",{onclick:()=>s.googleController.signOut(),class:"authButton"},"Sign Out"):o.default("button",{onclick:()=>s.googleController.signIn(),class:"authButton"},"Sign In"),o.default("script",{async:!0,defer:!0,src:l.googleModel.src,onload:()=>{l.googleModel.isSignedIn||s.googleController.initGapi()}})])}}}},2740:(e,t,r)=>{function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(7266)),n(r(879)),n(r(6784)),n(r(3736)),n(r(4711)),n(r(6790)),n(r(4979)),n(r(5648)),n(r(9902)),n(r(9423)),n(r(7278)),n(r(3418))},5648:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(r(3615)),l=r(5045);t.journalsComponent=function(){return{view:function(){return o.default("#journals",function(){let e=l.urlController.getActiveShelf();if(void 0!==e)return Array.from(e.journals.values()).map((e=>{let t=`#/library/${e.shelf.id}/${e.id}`;return o.default("li",o.default("a",{href:t,id:`journal-${e.id}`},e.title))}));l.urlController.redirect("/library")}())}}}},6790:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(r(3615)),l=r(3607),s=r(5045);t.refinesComponent=function(){const e="Simple Tags",t=new Set;function r(){if(0!==l.searchModel.simpleRefines.size)return o.default(".tagRefineWrap",[n(e,l.searchModel.simpleRefines.size),Array.from(l.searchModel.simpleRefines,(([e,t])=>[a(e,t)]))])}function n(r,n){return o.default("span",function(r){return{class:"roundTagKey",onclick:n=>function(r,n){if(r.metaKey||r.ctrlKey){if(n===e)return;l.searchModel.refinesQuery.keys.has(n)?l.searchModel.refinesQuery.keys.delete(n):l.searchModel.refinesQuery.keys.add(n)}else t.has(n)?t.delete(n):t.add(n)}(n,r)}}(r),[r===e?[]:o.default("input",{type:"checkbox",checked:l.searchModel.refinesQuery.keys.has(r)}),t.has(r)?o.default("span","▾ "):o.default("span","▿ "),o.default("span",r),o.default("span",` (${n})`)])}function a(e,t){return o.default("div",{class:"tagRefineValWrap"},[o.default("span",i(e,t),[o.default("input",{type:"checkbox",checked:null===t.val?l.searchModel.refinesQuery.simpleKeys.has(t.clean):l.searchModel.refinesQuery.vals.has(t.clean)}),null!==t.val?o.default("span",`${t.cleanVal}`):o.default("span",`${t.flag}${t.cleanKey}`),o.default("span",` (${t.frq})`)])])}function i(r,n){let o=null===n.val?"simpleTag":"roundTagVal",s="hide";return(null===n.val&&t.has(e)||t.has(r)||l.searchModel.refinesQuery.vals.has(n.clean))&&(s=""),{class:`${o} ${s}`,onclick:()=>function(e){null===e.val?l.searchModel.refinesQuery.simpleKeys.has(e.clean)?l.searchModel.refinesQuery.simpleKeys.delete(e.clean):l.searchModel.refinesQuery.simpleKeys.set(e.clean,e):l.searchModel.refinesQuery.vals.has(e.clean)?l.searchModel.refinesQuery.vals.delete(e.clean):l.searchModel.refinesQuery.vals.set(e.clean,e)}(n)}}return{view:function(){const e=s.urlController.getActiveJournal();if(void 0!==e&&!1!==e.loaded)return o.default("#tagsWrap",o.default("#tags",[o.default(".tempguidancePre","Tags"),r(),Array.from(l.searchModel.complexRefines,(([e,t])=>o.default(".tagRefineWrap",[n(e,t.length),t.map((t=>[a(e,t)]))])))]))}}}},9423:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(r(3615)),l=r(3607),s=r(5045);t.searchbarComponent=function(){const e={pos:null,el:null};return{view:function(){const t=s.urlController.getActiveJournal();if(void 0!==t&&!1!==t.loaded)return o.default("#search",[o.default("#searchQuery",{placeholder:"Search for text or tags",contenteditable:"true",class:"entry breakwrap",oninput:t=>function(t){let r=s.caretController.getCaretPosition(t.target);e.pos=r?r[1]:null,e.el=t.target,s.searchController.updateSearchbar(s.textController.escape(t.target.innerText))}(t),onupdate:()=>(s.caretController.setCaretPosition(e.el,e.pos),e.pos=null,void(e.el=null)),onkeydown:e=>function(e){13!=e.keyCode||e.shiftKey||(e.preventDefault(),e.target.blur())}(e)},o.default.trust(l.searchModel.barQuery.rendered)),o.default("button",{id:"clearSearch",class:"del",onclick:()=>s.searchController.updateSearchbar("")},"x")])}}}},4711:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(r(3615)),l=r(3607),s=r(5045);t.shelvesComponent=function(){function e(e){return o.default("button",{class:"del",onclick:()=>s.libraryController.removeShelves([e])},"del")}function t(e){return o.default("button",{onclick:()=>s.libraryController.loadShelves(!0,[e])},"retry")}return{view:function(){let r=Array.from(l.libraryModel.shelves.entries());return o.default("#shelvesList",r.map((([r,n])=>function(r,n){return void 0===n?o.default("li",[e(r),o.default("span",r)]):n.error?o.default("li",[e(r),o.default("span",{class:"solidError"},`${r}`),t(r)]):o.default("li",[e(r),o.default("a",{href:`#/library/${r}`,id:`shelf-${r}`},n.title)])}(r,n))))}}}},9902:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(r(3615)),l=r(1230),s=r(5045),a=r(3607);t.syncStateComponent=function(){function e(){let e="",t=`syncState ${n()}`;switch(a.syncerModel.state){case l.SyncerState.DOWNLOADING:e="Downloading journal data from drive";break;case l.SyncerState.PAUSED:e="Warning! - Syncing is paused";break;case l.SyncerState.SYNCED:e="Cloud synced";break;case l.SyncerState.UPLOADING:e="Uploading changes to drive";break;case l.SyncerState.INITIALIZING:e="Initializing"}return o.default("span",{id:"syncStateText",class:t},e)}function t(){let e=`material-icons material-icons-outlined syncState ${n()}`;return o.default("i",{id:"syncStateIcon",class:e},a.syncerModel.state)}function r(){if(a.syncerModel.state===l.SyncerState.PAUSED)return o.default("button",{id:"unpauseSync",class:"syncState",onclick:()=>s.syncerController.unpause()},"Unpause Syncing")}function n(){switch(a.syncerModel.state){case l.SyncerState.PAUSED:return"error";case l.SyncerState.SYNCED:return"okay";default:return"warn"}}return{view:function(){if(a.googleModel.isSignedIn&&0!==a.libraryModel.shelves.size&&a.appStateModel.testMode!==l.TestMode.DEMO)return o.default("#status",o.default("span",o.default("span",[t(),e(),r()])))}}}},4979:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(r(3615)),l=r(3607),s=r(1230),a=r(5045);t.testModeComponent=function(){function e(){if(l.appStateModel.testMode===s.TestMode.DEMO)return o.default("button",{onclick:()=>{a.appStateController.updateTestMode(s.TestMode.OFF),a.urlController.redirect("/library")},class:"stopDemo"},"Start Now")}return{view:function(){if(l.appStateModel.testMode!==s.TestMode.OFF)return o.default("#testMode",[o.default("span",`${l.appStateModel.testMode} active `),e()])}}}},1490:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=r(3607),o=r(9245),l=r(1230);t.appStateController={updateTestMode:function(e){void 0!==e&&l.instanceOfTestMode(e)&&e!==n.appStateModel.testMode&&(n.appStateModel.testMode=e,o.syncerController.updateTestMode(e))}}},2500:(e,t)=>{function r(e,t){var n=t(e);for(e=e.firstChild;!1!==n&&e;e=e.nextSibling)n=r(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.caretController={getCaretPosition:function(e){var t=window.getSelection(),n=[0,0];if(t.anchorNode==e)n=[t.anchorNode.innerText.length,t.extentNode.innerText.length];else{var o=[t.anchorNode,t.extentNode];if(!e.contains(t.anchorNode)||!e.contains(t.extentNode))return;var l,s=[0,0];r(e,(function(e){for(l=0;l<2;l++)if(e==o[l]&&(s[l]=1,s[0==l?1:0]))return;if(e.textContent&&!e.firstChild)for(l=0;l<2;l++)s[l]||(n[l]+=e.textContent.length)})),n[0]+=t.anchorOffset,n[1]+=t.extentOffset}return n[0]<=n[1]?n:[n[1],n[0]]},setCaretPosition:function e(t,r){if(null!==t&&null!==r){for(var n of t.childNodes)if(3==n.nodeType){if(n.length>=r){let e=document.createRange(),t=window.getSelection();return e.setStart(n,r),e.collapse(!0),t.removeAllRanges(),t.addRange(e),-1}r-=n.length}else if(-1==(r=e(n,r)))return-1;return r}}}},6436:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=r(5045),o=r(1118),l=/(\@)([\w-']+)+(:)?([\w-'\*]+)?/g;t.entryController={save:function(e,t){e.saved=t,e.savedClean=n.textController.clean(e.saved),e.tags=function(e){let t=new Map;for(let{tag:r}of e)t.has(r.clean)?t.get(r.clean).frq+=1:t.set(r.clean,r);return t}(e.tagMatches)},update:function(e,t){e.raw=t,e.clean=n.textController.clean(t),e.safe=n.textController.escape(e.raw),e.tokens=e.clean.split(" ").filter((e=>void 0!==e&&""!==e.trim()&&"-"!==e)),e.tagMatches=function(e){let t=[],r=e.matchAll(l);for(let e of r){let r=o.tagFactory.createTag(e[0],e[1],e[2],e[3],e[4]);t.push({tag:r,match:e})}return t.sort(((e,t)=>e.match.index>t.match.index?-1:1)),t}(e.safe),e.rendered=function(e,t){for(let{tag:r,match:n}of t){let t=e.split("");t.splice(n.index,n[0].length,r.rendered),e=t.join("")}return e}(e.safe,e.tagMatches)}}},5724:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=r(3607),o=r(8037);t.errorsController={add:function(e,t){console.error(e),n.errorsModel.add(new o.FriendlyError(e,t))},remove:function(e){n.errorsModel.remove(e)}}},1591:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,l){function s(e){try{i(n.next(e))}catch(e){l(e)}}function a(e){try{i(n.throw(e))}catch(e){l(e)}}function i(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}i((n=n.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const l=o(r(3615)),s=r(646),a=r(1230),i=r(3607),u=r(5045),d=r(5787);function c(e){return n(this,void 0,void 0,(function*(){i.googleModel.isSignedIn=e,i.googleModel.isSignedIn?(i.googleModel.user=i.googleModel.gapi_.auth2.getAuthInstance().currentUser.get(),u.syncerController.updateAuth(i.googleModel.token),u.libraryController.loadShelves()):(u.libraryController.removeShelves(),d.urlController.redirect("/")),l.default.redraw()}))}t.googleController={signIn:function(){i.googleModel.gapi_.auth2.getAuthInstance().signIn()},signOut:function(){i.googleModel.gapi_.auth2.getAuthInstance().signOut()},initGapi:function(){let e=i.appStateModel.testMode===a.TestMode.OFF?gapi:new s.MockGapi;i.googleModel.gapi_=e,i.googleModel.gapi_.load("auth2",(()=>{i.googleModel.gapi_.auth2.init({scope:i.googleModel.scope,client_id:i.googleModel.clientId}).then((()=>{i.googleModel.gapi_.auth2.getAuthInstance().isSignedIn.listen(c),c(i.googleModel.gapi_.auth2.getAuthInstance().isSignedIn.get())}))}))}}},5045:(e,t,r)=>{function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(5787)),n(r(2519)),n(r(6436)),n(r(2500)),n(r(6688)),n(r(1591)),n(r(9245)),n(r(5724)),n(r(4340)),n(r(9758)),n(r(1490))},9758:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(r(3615)),l=r(3607),s=r(1118),a=r(5045);function i(e,t,r){r=void 0===r?"":r;let n=s.entryFactory.createJournalEntry(e.shelf,e,r);e.createEntry(t,n),a.entryController.save(n,r),u(e)}function u(e){let t=new Map,r=Array.from(e.entries.values());for(let{entry:e}of r.reverse())for(let[r,n]of e.tags)t.has(r)?t.get(r).frq+=n.frq:t.set(r,s.tagFactory.createTag(n.raw,n.flag,n.key,n.separator,n.val));e.tags=t,a.searchController.buildRefines(e)}t.journalController={addEntry:i,createEntry:function(e,t,r){r=void 0===r?"":r;let n=s.entryFactory.createJournalEntry(e.shelf,e,r);e.createEntry(t,n),a.entryController.save(n,r),a.syncerController.createRow(e.shelf.id,e.id,t),a.syncerController.updateRow(e.shelf.id,e.id,e.title,t,n.raw),u(e)},updateEntry:function(e,t,r,n){t.saved!==n&&(a.entryController.save(t,n),a.syncerController.updateRow(e.shelf.id,e.id,e.title,r,t.raw),u(e))},moveEntry:function(e,t,r){t!==r&&(e.moveEntry(t,r),u(e))},buildTags:u,deleteEntry:function(e,t){e.deleteEntry(t),a.syncerController.deleteRow(e.shelf.id,e.id,t),u(e)},loadEntries:function(e){var t;void 0!==e&&(t=e,l.libraryModel.shelves.forEach((e=>{void 0!==e&&e.journals.forEach((e=>{t.shelf.id===e.shelf.id&&t.id===e.id||function(e){void 0!==e&&(e.entries=[],e.loaded=!1)}(e)}))})),a.syncerController.getRows(e.shelf.id,e.id,e.title).then((t=>{t.rows.forEach(((t,r)=>i(e,r,t))),e.loaded=!0,o.default.redraw()})).catch((e=>{a.errorsController.add(e.error.message,e.friendlyMsg)})).finally((()=>{o.default.redraw()})))}}},4340:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(r(3615)),l=r(3607),s=r(1118),a=r(5045),i=/\/spreadsheets\/d\/([a-zA-Z0-9-_]+)/g;function u(e,t){void 0===t&&(t=Array.from(l.libraryModel.shelves.keys())),e&&(t.forEach((e=>l.libraryModel.shelves.set(e,void 0))),o.default.redraw()),t.filter((e=>!l.libraryModel.shelves.get(e))).forEach((e=>a.syncerController.getSpreadsheet(e).then((t=>{let r=s.shelfFactory.createShelf(e,t.spreadsheet);l.libraryModel.shelves.set(r.id,r);let n=a.urlController.getActiveJournal();n&&n.shelf===r&&a.journalController.loadEntries(n)})).catch((t=>{a.errorsController.add(t.error.message,t.friendlyMsg);let r=s.shelfFactory.createShelf(e,void 0,!0);l.libraryModel.shelves.set(e,r)})).finally((()=>{o.default.redraw()}))))}function d(e){let t=[];return e&&Array.from(e.matchAll(i)).forEach((e=>t.push(e[1]))),t}t.libraryController={addShelves:function(e){let t=d(e);t=t.filter((e=>!l.libraryModel.shelves.has(e))),t.forEach((e=>l.libraryModel.shelves.set(e,void 0))),l.libraryModel.shelfIds=Array.from(l.libraryModel.shelves.keys()),u(!1,t)},loadShelves:u,removeShelves:function(e){void 0===e&&(e=Array.from(l.libraryModel.shelves.keys())),(e=e.filter((e=>l.libraryModel.shelves.has(e)))).forEach((e=>l.libraryModel.shelves.delete(e))),l.libraryModel.shelfIds=Array.from(l.libraryModel.shelves.keys())},getSpreadsheetIdsFromUrls:d}},6688:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=r(3607),o=r(1230),l=r(1118),s=r(6436);function a(e){let t=n.searchModel.query,r=e,l=[];for(let[e,{entry:s}]of r.entries())switch(n.searchModel.searchType){case o.SearchType.AND:t.tokens.every((e=>i(e,s)))&&l.push({idx:e,entry:s});break;case o.SearchType.OR:t.tokens.some((e=>i(e,s)))&&l.push({idx:e,entry:s})}return l}function i(e,t){return e.startsWith("-@")&&!e.endsWith(":")?void 0===t.tags.get(e.substring(1)):e.startsWith("-")?!t.savedClean.includes(e.substring(1)):e.startsWith("@")&&!e.endsWith(":")?void 0!==t.tags.get(e):t.savedClean.includes(e)}t.searchController={reset:function(){n.searchModel.searchType=o.SearchType.NONE,n.searchModel.barQuery=l.entryFactory.createBaseEntry(),n.searchModel.refinesQuery={keys:new Set,vals:new Map,simpleKeys:new Map}},buildRefines:function(e){let t=new Map,r=new Map;for(let n of e.tags.values())if(null===n.val){let e=`${n.flag}${n.cleanKey}`;t.has(e)||t.set(e,n)}else{let e=`${n.flag}${n.cleanKey}${n.separator}`;r.has(e)||r.set(e,[]),r.get(e).push(n)}n.searchModel.simpleRefines=new Map([...t.entries()]),n.searchModel.complexRefines=new Map([...r.entries()].sort()),function(){for(let[e]of n.searchModel.refinesQuery.simpleKeys)n.searchModel.simpleRefines.has(e)||n.searchModel.refinesQuery.simpleKeys.delete(e);for(let e of n.searchModel.refinesQuery.keys)n.searchModel.complexRefines.has(e)||n.searchModel.refinesQuery.keys.delete(e);for(let[e]of n.searchModel.refinesQuery.vals)Array.from(n.searchModel.complexRefines.values()).some((t=>t.some((t=>t.clean===e))))||n.searchModel.refinesQuery.vals.delete(e)}()},filteredEntries:function(e){let t=[];return 0===n.searchModel.query.tokens.length?(n.searchModel.searchType=o.SearchType.NONE,t=e.map((({entry:e},t)=>({idx:t,entry:e})))):(n.searchModel.searchType=o.SearchType.AND,t=a(e),0===t.length&&(n.searchModel.searchType=o.SearchType.OR,t=a(e))),t},updateSearchbar:function(e){s.entryController.update(n.searchModel.barQuery,e)}}},9245:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,l){function s(e){try{i(n.next(e))}catch(e){l(e)}}function a(e){try{i(n.throw(e))}catch(e){l(e)}}function i(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}i((n=n.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const l=o(r(3615)),s=r(5045),a=r(3607),i=r(1230),u=new Worker("./js/syncWebWorker.js");function d(e){if(void 0!==e)return a.syncerModel.pushSyncerTask({type:i.SyncerPayloadType.AUTH_UPDATE,token:e,rejects:!1},u)}u.onmessage=e=>function(e){let{id:t,payload:r,error:n}=e.data;if(null!==t&&a.syncerModel.requests.has(t))a.syncerModel.requests.get(t)({payload:r,error:n});else if(void 0!==r)switch(r.type){case i.SyncerPayloadType.SYNC_STATE:a.syncerModel.state=r.state,l.default.redraw();break;case i.SyncerPayloadType.ERROR:s.errorsController.add(r.error.message,r.friendlyMsg);break;case i.SyncerPayloadType.TOKEN_REQUEST:d(a.googleModel.token)}else s.errorsController.add("undefined payload","An unexpected error occurred.")}(e),t.syncerController={unpause:function(){return n(this,void 0,void 0,(function*(){return yield a.syncerModel.pushSyncerTask({type:i.SyncerPayloadType.UNPAUSE,rejects:!1},u)}))},getRows:function(e,t,r){return a.syncerModel.pushSyncerTask({type:i.SyncerPayloadType.GET_ROWS,spreadsheetId:e,sheetTitle:r,sheetId:t,rows:[],rejects:!0},u)},createRow:function(e,t,r){return n(this,void 0,void 0,(function*(){return yield a.syncerModel.pushSyncerTask({type:i.SyncerPayloadType.CREATE_ROW,spreadsheetId:e,sheetId:t,idx:r,rejects:!1},u)}))},deleteRow:function(e,t,r){return n(this,void 0,void 0,(function*(){return yield a.syncerModel.pushSyncerTask({type:i.SyncerPayloadType.DELETE_ROW,spreadsheetId:e,sheetId:t,idx:r,rejects:!1},u)}))},updateRow:function(e,t,r,o,l){return n(this,void 0,void 0,(function*(){return yield a.syncerModel.pushSyncerTask({type:i.SyncerPayloadType.UPDATE_ROW,spreadsheetId:e,sheetTitle:r,sheetId:t,content:l,idx:o,rejects:!1},u)}))},updateAuth:d,updateTestMode:function(e){return n(this,void 0,void 0,(function*(){return yield a.syncerModel.pushSyncerTask({type:i.SyncerPayloadType.TEST_MODE_UPDATE,testMode:e,rejects:!1},u)}))},getSpreadsheet:function(e){return a.syncerModel.pushSyncerTask({type:i.SyncerPayloadType.GET_SPREADSHEET,spreadsheetId:e,spreadsheet:undefined,rejects:!0},u)}}},2519:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.textController={escape:function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},clean:function(e){return e.toLowerCase()}}},5787:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(r(3615)),l=r(3607);function s(){let e=l.urlModel.shelfId;if(void 0!==e)return l.libraryModel.shelves.get(e)}t.urlController={redirect:function(e){l.urlModel.hash=e},getActiveShelf:s,getActiveJournal:function(){let e=l.urlModel.journalId,t=s();return void 0===e||void 0===t?void 0:t.journals.get(e)},getBreadcrumbTrail:function(){var e,t,r;let n,s=[],a=l.urlModel.hash.split("?")[0].split("/").filter((e=>"#"!==e&&""!==e));for(let i=0;i<a.length;i++){let u=a[i],d="#/"+a.slice(0,i+1).join("/");1===i?(n=u,u=(null===(e=l.libraryModel.shelves.get(u))||void 0===e?void 0:e.title)||u):2===i&&void 0!==n&&(u=(null===(r=null===(t=l.libraryModel.shelves.get(n))||void 0===t?void 0:t.journals.get(parseInt(u)))||void 0===r?void 0:r.title)||u),0!==i&&s.push(o.default("span"," / ")),i===a.length-1?s.push(o.default("span",`${u}`)):s.push(o.default("a",{href:d,id:`bc-${d.replace("#","").replace("/","")}`},`${u}`))}return s}}},5405:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});class r extends Error{constructor(e,t){super(e),this.msg=e,this.friendlyMsg=t}}t.FriendlyError=r},2877:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=r(1230);class o extends Error{constructor(e,t,r,o,l){super(e),this.friendlyMsg=t,this.needsReAuth=r,this.payload={pause:void 0===o||o,error:this,friendlyMsg:this.friendlyMsg,type:n.SyncerPayloadType.ERROR,rejects:void 0!==l&&l}}}t.SyncerError=o},8037:(e,t,r)=>{function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(2877)),n(r(5405))},1935:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=r(5045),o=r(7554);let l=-1;t.entryFactory={createBaseEntry:function(e){let t=new o.BaseEntryModel;return n.entryController.update(t,e||""),t},createJournalEntry:function(e,t,r){let s=new o.JournalEntryModel(e,t,l+=1);return n.entryController.update(s,r),s}}},1118:(e,t,r)=>{function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(2076)),n(r(9531)),n(r(1935))},9531:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=r(7554);t.shelfFactory={createShelf:function(e,t,r){if(void 0!==t&&void 0!==t.spreadsheetId&&void 0!==t.properties&&void 0!==t.properties.title&&void 0!==t.sheets){let e=new n.ShelfModel(t.spreadsheetId,t.properties.title);return function(e,t){let r=[];return t.forEach((t=>{if(void 0!==t.properties&&void 0!==t.properties.title&&void 0!==t.properties.sheetId){let o=new n.JournalModel(e,t.properties.sheetId,t.properties.title);if(void 0===o)return;r.push(o)}})),r}(e,t.sheets).forEach((t=>e.journals.set(t.id,t))),e}return new n.ShelfModel(e,void 0,r)}}},2076:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=r(5045),o=r(7554);function l(e){return(e=(e=n.textController.escape(e)).endsWith("'s")?e.substring(0,e.length-2):e).toLowerCase()}t.tagFactory={createTag:function(e,t,r,n,s){n=void 0!==n?n:null,s=void 0!==s?s:null;let a=l(e),i=l(r),u=null!==s?l(s):null,d="<span onclick=\"tagOnClick(event, '"+t+i+(null!==n?n:"")+'\')" class="'+(null!==n?"tagKey":null===s?"simpleTag":"roundTagVal")+'">'+t+r+"</span>",c="";return null!=n&&(c="<span onclick=\"tagOnClick(event, '"+t+i+n+(null!==u?u.replace(/'/,"\\'"):"")+'\')" class="tagVal">'+n+(null!==s?s:"")+"</span>"),new o.TagModel(e,t,r,n,s,a,i,u,d+c)}}},3607:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(r(3615)),l=r(8055),s=r(7554);t.errorsModel=s.ErrorsModel.getInstance(),t.appStateModel=s.AppStateModel.getInstance(),t.serviceWorkerModel=s.ServiceWorkerModel.getInstance(),t.googleModel=s.GoogleModel.getInstance(),t.syncerModel=s.SyncerModel.getInstance(),t.libraryModel=s.LibraryModel.getInstance(),t.urlModel=s.UrlModel.getInstance(),t.searchModel=s.SearchModel.getInstance();const a=document.getElementById("root");null!==a&&o.default.route(a,"/",{"/":l.signinView,"/demo":l.testModeView,"/signin":l.signinView,"/library":l.libraryView,"/library/:shelfId":l.shelfView,"/setTestMode/:testMode":l.testModeView,"/library/:shelfId/:journalId":l.journalView,"/demo/:shelfId/:journalId":l.journalView})},1937:function(e,t){var r=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,l){function s(e){try{i(n.next(e))}catch(e){l(e)}}function a(e){try{i(n.throw(e))}catch(e){l(e)}}function i(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}i((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.MockGapi=class{constructor(){this.auth2=new n}load(e,t){t()}};class n{getAuthInstance(){return new s}init(e){return r(this,void 0,void 0,(function*(){}))}}class o{get(){return new l}}class l{getAuthResponse(){return{expires_in:9999,access_token:"faketoken"}}reloadAuthResponse(){return r(this,void 0,void 0,(function*(){return{expires_in:9999,access_token:"faketoken"}}))}}t.MockGoogleUser=l;class s{constructor(){this.isSignedIn=new a,this.currentUser=new o}signOut(){}signIn(){}}class a{constructor(){this.listen=e=>{},this.get=()=>!0}}},646:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(1937))},4253:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=r(1230);class o{constructor(){this.testMode=n.TestMode.OFF}static getInstance(){return o.instance?o.instance:new o}}t.AppStateModel=o},1033:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(){this.raw="",this.safe="",this.clean="",this.tokens=[],this.rendered="",this.tags=new Map,this.tagMatches=[]}}t.BaseEntryModel=r,t.JournalEntryModel=class extends r{constructor(e,t,r){super(),this.saved="",this.savedClean="",this.id=r,this.shelf=e,this.journal=t}}},4329:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(){this.errors=[]}add(e){this.errors.push(e)}remove(e){this.errors.splice(e,1)}static getInstance(){return r.instance?r.instance:new r}}t.ErrorsModel=r},892:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(){this.isSignedIn=!1,this.src="https://apis.google.com/js/api.js",this.scope=["https://www.googleapis.com/auth/spreadsheets"].join(" "),this.clientId="893904323330-moo1k9s19qp40kr747pftdo29ejdef0o.apps.googleusercontent.com"}static getInstance(){return r.instance?r.instance:new r}get token(){if(this.user)return this.user.getAuthResponse().access_token}}t.GoogleModel=r},7010:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.JournalModel=class{constructor(e,t,r){this.entries=[],this.shelf=e,this.loaded=!1,this.id=t,this.tags=new Map,this.title=r}createEntry(e,t){this.entries.splice(e,0,{id:t.id,entry:t})}deleteEntry(e){this.entries.splice(e,1)}moveEntry(e,t){this.entries.splice(t,0,this.entries.splice(e,1)[0])}}},98:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(){this.shelves=new Map,this.shelfIds.forEach((e=>this.shelves.set(e,void 0)))}static getInstance(){return r.instance?r.instance:new r}set shelfIds(e){0===e.length?localStorage.removeItem("spreadsheetIds"):localStorage.setItem("spreadsheetIds",e.join(","))}get shelfIds(){let e=localStorage.getItem("spreadsheetIds");return null===e?[]:e.split(",")}}t.LibraryModel=r},2651:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=r(1230),o=r(1118);class l{constructor(){this.searchType=n.SearchType.NONE,this.simpleRefines=new Map,this.complexRefines=new Map,this.barQuery=o.entryFactory.createBaseEntry(),this.refinesQuery={keys:new Set,vals:new Map,simpleKeys:new Map}}static getInstance(){return l.instance?l.instance:new l}get query(){return o.entryFactory.createBaseEntry([this.barQuery.raw,...Array.from(this.refinesQuery.keys.values()),...Array.from(this.refinesQuery.vals.keys()),...Array.from(this.refinesQuery.simpleKeys.keys())].join(" "))}}t.SearchModel=l},5214:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,l){function s(e){try{i(n.next(e))}catch(e){l(e)}}function a(e){try{i(n.throw(e))}catch(e){l(e)}}function i(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}i((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const o=r(5045);class l{constructor(){"serviceWorker"in navigator?window.addEventListener("load",(()=>n(this,void 0,void 0,(function*(){yield navigator.serviceWorker.register("../serviceWorker.js")})))):o.errorsController.add("serviceWorker not supported","Your browser is not supported.")}static getInstance(){return l.instance?l.instance:new l}}t.ServiceWorkerModel=l},5855:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ShelfModel=class{constructor(e,t,r){this.journals=new Map,this.id=e,this.title=t,this.error=void 0!==r&&r}}},5010:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(r(3615)),l=r(5045),s=r(1230);class a{constructor(){this.requestsCounter=0,this.requests=new Map,this.state=s.SyncerState.INITIALIZING}static getInstance(){return a.instance?a.instance:new a}pushSyncerTask(e,t){let r="payload-"+this.requestsCounter++;return new Promise(((n,s)=>{this.requests.set(r,(({payload:e,error:t})=>{t&&t.rejects?(this.requests.delete(r),s(t)):t?(l.errorsController.add(t.error.message,t.friendlyMsg),o.default.redraw()):(this.requests.delete(r),n(e))})),t.postMessage({id:r,payload:e})}))}}t.SyncerModel=a},4338:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TagModel=class{constructor(e,t,r,n,o,l,s,a,i){this.raw=e,this.flag=t,this.key=r,this.separator=n,this.val=o,this.clean=l,this.cleanKey=s,this.cleanVal=a,this.rendered=i,this.frq=1}}},3809:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(r(3615));class l{constructor(){}static getInstance(){return l.instance?l.instance:new l}get hash(){return window.location.hash}set hash(e){window.location.hash=e}get url(){return new URL(window.location.href)}getParam(e){let t=this.url.searchParams.get(e)||o.default.route.param(e);if(""!==t)return t}get shelfId(){let e=o.default.route.param("shelfId");return""===e?void 0:e}get journalId(){let e=o.default.route.param("journalId");return""===e?void 0:parseInt(e)}get newTestMode(){let e=o.default.route.param("testMode");return""===e?void 0:e}}t.UrlModel=l},7554:(e,t,r)=>{function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(3809)),n(r(4338)),n(r(1033)),n(r(5855)),n(r(5010)),n(r(2651)),n(r(892)),n(r(2651)),n(r(4329)),n(r(7010)),n(r(98)),n(r(4253)),n(r(5214))},1230:(e,t,r)=>{function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(1298)),n(r(5579)),n(r(7013))},1298:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),(r=t.SearchType||(t.SearchType={}))[r.NONE=0]="NONE",r[r.AND=1]="AND",r[r.OR=2]="OR"},7013:(e,t)=>{var r,n,o;Object.defineProperty(t,"__esModule",{value:!0}),(o=t.SyncerPayloadType||(t.SyncerPayloadType={}))[o.AUTH_UPDATE=0]="AUTH_UPDATE",o[o.DELETE_ROW=1]="DELETE_ROW",o[o.UPDATE_ROW=2]="UPDATE_ROW",o[o.GET_ROWS=3]="GET_ROWS",o[o.TEST_MODE_UPDATE=4]="TEST_MODE_UPDATE",o[o.UNPAUSE=5]="UNPAUSE",o[o.GET_SPREADSHEET=6]="GET_SPREADSHEET",o[o.EXTEND_SHEET=7]="EXTEND_SHEET",o[o.CREATE_ROW=8]="CREATE_ROW",o[o.MOVE_ROW=9]="MOVE_ROW",o[o.ERROR=10]="ERROR",o[o.TOKEN_REQUEST=11]="TOKEN_REQUEST",o[o.SYNC_STATE=12]="SYNC_STATE",(n=t.SyncerResponseType||(t.SyncerResponseType={}))[n.SYNCER_STATE=0]="SYNCER_STATE",n[n.ERROR=1]="ERROR",n[n.REAUTH=2]="REAUTH",(r=t.SyncerState||(t.SyncerState={})).PAUSED="cloud_off",r.UPLOADING="cloud_upload",r.DOWNLOADING="cloud_download",r.SYNCED="cloud_done",r.INITIALIZING="cloud_queue"},5579:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.OFF="0",e.WORKING="1",e.FAIL_GET_SPREADSHEET_SHEETS="2",e.FAIL_GET_RANGE="3",e.FAIL_UPDATE_RANGE="4",e.FAIL_DELETE_ROW="5",e.RETURN_ROWS="6",e.DEMO="demomode"}(r=t.TestMode||(t.TestMode={})),t.instanceOfTestMode=function(e){return Object.values(r).includes(e)}},8055:(e,t,r)=>{function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(4208)),n(r(9935)),n(r(9393)),n(r(6190)),n(r(1947))},6190:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(r(3615)),l=r(5045),s=r(2740);t.journalView=function(){return{view:function(){return o.default("#shelf",[o.default(s.googleComponent),o.default(s.testModeComponent),o.default(s.syncStateComponent),o.default(s.errorsComponent),o.default(s.breadcrumbComponent),o.default(s.searchbarComponent),o.default(s.refinesComponent),o.default("#entriesWrap",[o.default(s.entriesComponent),o.default(s.composeComponent)])])},oninit:function(){const e=l.urlController.getActiveJournal();void 0===e||e.loaded||l.journalController.loadEntries(e)}}}},9393:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(r(3615)),l=r(2740);t.libraryView=function(){return{view:function(){return o.default("#library",[o.default(l.googleComponent),o.default(l.testModeComponent),o.default(l.syncStateComponent),o.default(l.errorsComponent),o.default(l.addShelvesComponent),o.default(l.shelvesComponent)])}}}},4208:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(r(3615)),l=r(2740);t.shelfView=function(){return{view:function(){return o.default("#shelf",[o.default(l.googleComponent),o.default(l.testModeComponent),o.default(l.syncStateComponent),o.default(l.errorsComponent),o.default(l.breadcrumbComponent),o.default(l.journalsComponent)])}}}},9935:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(r(3615)),l=r(3607),s=r(5045),a=r(2740);t.signinView=function(){return{view:function(){return o.default("#auth",[o.default(a.googleComponent)])},onupdate:function(){l.googleModel.isSignedIn&&s.urlController.redirect("/library")}}}},1947:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=r(3607),o=r(1230),l=r(5045);t.testModeView=function(){return{view:function(){n.urlModel.hash.startsWith("#/demo")&&(l.appStateController.updateTestMode(o.TestMode.DEMO),l.libraryController.addShelves("https://docs.google.com/spreadsheets/d/shelf/edit"),l.urlController.redirect("/library/shelf/0")),n.urlModel.hash.startsWith("#/setTestMode")&&(l.appStateController.updateTestMode(n.urlModel.newTestMode),l.urlController.redirect("/"))}}}},3615:e=>{e.exports=m}},t={};!function r(n){var o=t[n];if(void 0!==o)return o.exports;var l=t[n]={exports:{}};return e[n].call(l.exports,l,l.exports,r),l.exports}(3607)})();
//# sourceMappingURL=dntd.js.map