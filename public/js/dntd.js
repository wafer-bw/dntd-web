!function(n){var e={};function A(l){if(e[l])return e[l].exports;var o=e[l]={i:l,l:!1,exports:{}};return n[l].call(o.exports,o,o.exports,A),o.l=!0,o.exports}A.m=n,A.c=e,A.d=function(n,e,l){A.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:l})},A.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},A.t=function(n,e){if(1&e&&(n=A(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var l=Object.create(null);if(A.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var o in n)A.d(l,o,function(e){return n[e]}.bind(null,o));return l},A.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return A.d(e,"a",e),e},A.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},A.p="",A(A.s=3)}([function(n,e){n.exports=m},function(n,e,A){"use strict";var l,o,t,r,c,i,s=(l="/Users/bwakeford/Documents/personal/dntd-web/src/types/index.ts",o="393c9de530e72a21335fa71dc0497ace7228fd36",t=new(0,function(){}.constructor)("return this")(),c={path:"/Users/bwakeford/Documents/personal/dntd-web/src/types/index.ts",statementMap:{0:{start:{line:3,column:4},end:{line:3,column:71}},1:{start:{line:3,column:21},end:{line:3,column:71}},2:{start:{line:3,column:53},end:{line:3,column:71}},3:{start:{line:5,column:0},end:{line:5,column:62}},4:{start:{line:6,column:0},end:{line:6,column:30}},5:{start:{line:7,column:0},end:{line:7,column:30}},6:{start:{line:8,column:0},end:{line:8,column:31}},7:{start:{line:9,column:0},end:{line:9,column:30}}},fnMap:{0:{name:"__export",decl:{start:{line:2,column:9},end:{line:2,column:17}},loc:{start:{line:2,column:21},end:{line:4,column:1}},line:2}},branchMap:{0:{loc:{start:{line:3,column:21},end:{line:3,column:71}},type:"if",locations:[{start:{line:3,column:21},end:{line:3,column:71}},{start:{line:3,column:21},end:{line:3,column:71}}],line:3}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:"/Users/bwakeford/Documents/personal/dntd-web/src/types/index.ts",sourceRoot:"",sources:["/Users/bwakeford/Documents/personal/dntd-web/src/types/index.ts"],names:[],mappings:";;;;;AACA,8BAAwB;AACxB,8BAAwB;AACxB,+BAAyB;AACzB,8BAAwB",sourcesContent:['export * from "./caret"\nexport * from "./errors"\nexport * from "./search"\nexport * from "./testing"\nexport * from "./syncer"\n']},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},(i=t[r="__coverage__"]||(t[r]={}))[l]&&i[l].hash===o?i[l]:(c.hash=o,i[l]=c));function u(n){for(var A in s.f[0]++,s.s[0]++,n)s.s[1]++,e.hasOwnProperty(A)?s.b[0][1]++:(s.b[0][0]++,s.s[2]++,e[A]=n[A])}s.s[3]++,Object.defineProperty(e,"__esModule",{value:!0}),s.s[4]++,u(A(10)),s.s[5]++,u(A(11)),s.s[6]++,u(A(12)),s.s[7]++,u(A(13))},function(n,e,A){"use strict";var l,o,t,r,c,i,s=(l="/Users/bwakeford/Documents/personal/dntd-web/src/controllers/index.ts",o="976d3222aaeebc4ef06a5d119186d64d895b7b78",t=new(0,function(){}.constructor)("return this")(),c={path:"/Users/bwakeford/Documents/personal/dntd-web/src/controllers/index.ts",statementMap:{0:{start:{line:3,column:4},end:{line:3,column:71}},1:{start:{line:3,column:21},end:{line:3,column:71}},2:{start:{line:3,column:53},end:{line:3,column:71}},3:{start:{line:5,column:0},end:{line:5,column:62}},4:{start:{line:6,column:0},end:{line:6,column:37}},5:{start:{line:7,column:0},end:{line:7,column:38}},6:{start:{line:8,column:0},end:{line:8,column:39}},7:{start:{line:9,column:0},end:{line:9,column:39}},8:{start:{line:10,column:0},end:{line:10,column:40}},9:{start:{line:11,column:0},end:{line:11,column:40}},10:{start:{line:12,column:0},end:{line:12,column:40}},11:{start:{line:13,column:0},end:{line:13,column:41}},12:{start:{line:14,column:0},end:{line:14,column:41}}},fnMap:{0:{name:"__export",decl:{start:{line:2,column:9},end:{line:2,column:17}},loc:{start:{line:2,column:21},end:{line:4,column:1}},line:2}},branchMap:{0:{loc:{start:{line:3,column:21},end:{line:3,column:71}},type:"if",locations:[{start:{line:3,column:21},end:{line:3,column:71}},{start:{line:3,column:21},end:{line:3,column:71}}],line:3}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:"/Users/bwakeford/Documents/personal/dntd-web/src/controllers/index.ts",sourceRoot:"",sources:["/Users/bwakeford/Documents/personal/dntd-web/src/controllers/index.ts"],names:[],mappings:";;;;;AAAA,qCAA+B;AAC/B,sCAAgC;AAChC,uCAAiC;AACjC,uCAAiC;AACjC,wCAAkC;AAClC,wCAAkC;AAClC,wCAAkC;AAClC,yCAAmC;AACnC,yCAAmC",sourcesContent:['export * from "./urlController"\r\nexport * from "./textController"\r\nexport * from "./entryController"\r\nexport * from "./caretController"\r\nexport * from "./searchController"\r\nexport * from "./googleController"\r\nexport * from "./syncerController"\r\nexport * from "./libraryController"\r\nexport * from "./journalController"\r\n']},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},(i=t[r="__coverage__"]||(t[r]={}))[l]&&i[l].hash===o?i[l]:(c.hash=o,i[l]=c));function u(n){for(var A in s.f[0]++,s.s[0]++,n)s.s[1]++,e.hasOwnProperty(A)?s.b[0][1]++:(s.b[0][0]++,s.s[2]++,e[A]=n[A])}s.s[3]++,Object.defineProperty(e,"__esModule",{value:!0}),s.s[4]++,u(A(14)),s.s[5]++,u(A(23)),s.s[6]++,u(A(15)),s.s[7]++,u(A(37)),s.s[8]++,u(A(38)),s.s[9]++,u(A(39)),s.s[10]++,u(A(42)),s.s[11]++,u(A(43)),s.s[12]++,u(A(17))},function(n,e,A){"use strict";var l,o,t,r,c,i,s=(l="/Users/bwakeford/Documents/personal/dntd-web/src/index.ts",o="5934147dfcd8fcaee17e895e60f40ea3c4e5d1ee",t=new(0,function(){}.constructor)("return this")(),c={path:"/Users/bwakeford/Documents/personal/dntd-web/src/index.ts",statementMap:{0:{start:{line:2,column:22},end:{line:4,column:1}},1:{start:{line:3,column:4},end:{line:3,column:62}},2:{start:{line:5,column:0},end:{line:5,column:62}},3:{start:{line:6,column:18},end:{line:6,column:53}},4:{start:{line:7,column:16},end:{line:7,column:34}},5:{start:{line:8,column:17},end:{line:8,column:36}},6:{start:{line:9,column:0},end:{line:9,column:63}},7:{start:{line:10,column:0},end:{line:10,column:49}},8:{start:{line:11,column:0},end:{line:11,column:49}},9:{start:{line:12,column:0},end:{line:12,column:51}},10:{start:{line:13,column:0},end:{line:13,column:43}},11:{start:{line:14,column:0},end:{line:14,column:49}},12:{start:{line:15,column:13},end:{line:15,column:44}},13:{start:{line:16,column:0},end:{line:24,column:1}},14:{start:{line:17,column:4},end:{line:23,column:7}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:2,column:56},end:{line:2,column:57}},loc:{start:{line:2,column:71},end:{line:4,column:1}},line:2}},branchMap:{0:{loc:{start:{line:2,column:22},end:{line:4,column:1}},type:"binary-expr",locations:[{start:{line:2,column:23},end:{line:2,column:27}},{start:{line:2,column:31},end:{line:2,column:51}},{start:{line:2,column:56},end:{line:4,column:1}}],line:2},1:{loc:{start:{line:3,column:11},end:{line:3,column:61}},type:"cond-expr",locations:[{start:{line:3,column:37},end:{line:3,column:40}},{start:{line:3,column:43},end:{line:3,column:61}}],line:3},2:{loc:{start:{line:3,column:12},end:{line:3,column:33}},type:"binary-expr",locations:[{start:{line:3,column:12},end:{line:3,column:15}},{start:{line:3,column:19},end:{line:3,column:33}}],line:3},3:{loc:{start:{line:16,column:0},end:{line:24,column:1}},type:"if",locations:[{start:{line:16,column:0},end:{line:24,column:1}},{start:{line:16,column:0},end:{line:24,column:1}}],line:16}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0},f:{0:0},b:{0:[0,0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:"/Users/bwakeford/Documents/personal/dntd-web/src/index.ts",sourceRoot:"",sources:["/Users/bwakeford/Documents/personal/dntd-web/src/index.ts"],names:[],mappings:";;;;;AAAA,sDAAuB;AACvB,mCAAyE;AACzE,qCAEiB;AAEJ,QAAA,kBAAkB,GAAG,IAAI,2BAAkB,EAAE,CAAA;AAC7C,QAAA,WAAW,GAAG,IAAI,oBAAW,EAAE,CAAA;AAC/B,QAAA,WAAW,GAAG,IAAI,oBAAW,EAAE,CAAA;AAC/B,QAAA,YAAY,GAAG,IAAI,qBAAY,EAAE,CAAA;AACjC,QAAA,QAAQ,GAAG,IAAI,iBAAQ,EAAE,CAAA;AACzB,QAAA,WAAW,GAAG,IAAI,oBAAW,EAAE,CAAA;AAE5C,MAAM,IAAI,GAAG,QAAQ,CAAC,cAAc,CAAC,MAAM,CAAC,CAAA;AAE5C,IAAI,IAAI,KAAK,IAAI,EAAE;IACf,iBAAC,CAAC,KAAK,CAAC,IAAI,EAAE,GAAG,EAAE;QACf,GAAG,EAAE,kBAAU;QACf,SAAS,EAAE,kBAAU;QACrB,UAAU,EAAE,mBAAW;QACvB,mBAAmB,EAAE,iBAAS;QAC9B,8BAA8B,EAAE,mBAAW;KAE9C,CAAC,CAAA;CACL",sourcesContent:['import m from "mithril"\nimport { signinView, libraryView, shelfView, journalView } from "./views"\nimport {\n    ServiceWorkerModel, SyncerModel, LibraryModel, GoogleModel, UrlModel, SearchModel\n} from "./models"\n\nexport const serviceWorkerModel = new ServiceWorkerModel()\nexport const googleModel = new GoogleModel()\nexport const syncerModel = new SyncerModel()\nexport const libraryModel = new LibraryModel()\nexport const urlModel = new UrlModel()\nexport const searchModel = new SearchModel()\n\nconst root = document.getElementById("root")\n\nif (root !== null) {\n    m.route(root, "/", {\n        "/": signinView,                                   // TODO switch to be about page\n        "/signin": signinView,\n        "/library": libraryView,\n        "/library/:shelfId": shelfView,\n        "/library/:shelfId/:journalId": journalView,\n        // "/demo" : app,                                   // TODO\n    })\n}\n']},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},(i=t[r="__coverage__"]||(t[r]={}))[l]&&i[l].hash===o?i[l]:(c.hash=o,i[l]=c)),u=(s.s[0]++,s.b[0][0]++,this&&(s.b[0][1]++,this.__importDefault)||(s.b[0][2]++,function(n){return s.f[0]++,s.s[1]++,s.b[2][0]++,n&&(s.b[2][1]++,n.__esModule)?(s.b[1][0]++,n):(s.b[1][1]++,{default:n})}));s.s[2]++,Object.defineProperty(e,"__esModule",{value:!0});const a=(s.s[3]++,u(A(0))),C=(s.s[4]++,A(20)),m=(s.s[5]++,A(8));s.s[6]++,e.serviceWorkerModel=new m.ServiceWorkerModel,s.s[7]++,e.googleModel=new m.GoogleModel,s.s[8]++,e.syncerModel=new m.SyncerModel,s.s[9]++,e.libraryModel=new m.LibraryModel,s.s[10]++,e.urlModel=new m.UrlModel,s.s[11]++,e.searchModel=new m.SearchModel;const d=(s.s[12]++,document.getElementById("root"));s.s[13]++,null!==d?(s.b[3][0]++,s.s[14]++,a.default.route(d,"/",{"/":C.signinView,"/signin":C.signinView,"/library":C.libraryView,"/library/:shelfId":C.shelfView,"/library/:shelfId/:journalId":C.journalView})):s.b[3][1]++},,function(n,e,A){"use strict";var l,o,t,r,c,i,s=(l="/Users/bwakeford/Documents/personal/dntd-web/src/factories/index.ts",o="6e45b2321f3c752fd69843bced66a99bd33a00b9",t=new(0,function(){}.constructor)("return this")(),c={path:"/Users/bwakeford/Documents/personal/dntd-web/src/factories/index.ts",statementMap:{0:{start:{line:3,column:4},end:{line:3,column:71}},1:{start:{line:3,column:21},end:{line:3,column:71}},2:{start:{line:3,column:53},end:{line:3,column:71}},3:{start:{line:5,column:0},end:{line:5,column:62}},4:{start:{line:6,column:0},end:{line:6,column:34}},5:{start:{line:7,column:0},end:{line:7,column:36}},6:{start:{line:8,column:0},end:{line:8,column:36}}},fnMap:{0:{name:"__export",decl:{start:{line:2,column:9},end:{line:2,column:17}},loc:{start:{line:2,column:21},end:{line:4,column:1}},line:2}},branchMap:{0:{loc:{start:{line:3,column:21},end:{line:3,column:71}},type:"if",locations:[{start:{line:3,column:21},end:{line:3,column:71}},{start:{line:3,column:21},end:{line:3,column:71}}],line:3}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:"/Users/bwakeford/Documents/personal/dntd-web/src/factories/index.ts",sourceRoot:"",sources:["/Users/bwakeford/Documents/personal/dntd-web/src/factories/index.ts"],names:[],mappings:";;;;;AAAA,kCAA4B;AAC5B,oCAA8B;AAC9B,oCAA8B",sourcesContent:['export * from "./tagFactory"\nexport * from "./shelfFactory"\nexport * from "./entryFactory"\n']},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},(i=t[r="__coverage__"]||(t[r]={}))[l]&&i[l].hash===o?i[l]:(c.hash=o,i[l]=c));function u(n){for(var A in s.f[0]++,s.s[0]++,n)s.s[1]++,e.hasOwnProperty(A)?s.b[0][1]++:(s.b[0][0]++,s.s[2]++,e[A]=n[A])}s.s[3]++,Object.defineProperty(e,"__esModule",{value:!0}),s.s[4]++,u(A(24)),s.s[5]++,u(A(35)),s.s[6]++,u(A(36))},,function(n,e,A){"use strict";var l,o,t,r,c,i,s=(l="/Users/bwakeford/Documents/personal/dntd-web/src/components/index.ts",o="249dbc885ade5433735042c1558bb10e563ab4e2",t=new(0,function(){}.constructor)("return this")(),c={path:"/Users/bwakeford/Documents/personal/dntd-web/src/components/index.ts",statementMap:{0:{start:{line:3,column:4},end:{line:3,column:71}},1:{start:{line:3,column:21},end:{line:3,column:71}},2:{start:{line:3,column:53},end:{line:3,column:71}},3:{start:{line:5,column:0},end:{line:5,column:62}},4:{start:{line:6,column:0},end:{line:6,column:39}},5:{start:{line:7,column:0},end:{line:7,column:40}},6:{start:{line:8,column:0},end:{line:8,column:40}},7:{start:{line:9,column:0},end:{line:9,column:40}},8:{start:{line:10,column:0},end:{line:10,column:40}},9:{start:{line:11,column:0},end:{line:11,column:41}},10:{start:{line:12,column:0},end:{line:12,column:42}},11:{start:{line:13,column:0},end:{line:13,column:42}},12:{start:{line:14,column:0},end:{line:14,column:43}},13:{start:{line:15,column:0},end:{line:15,column:43}}},fnMap:{0:{name:"__export",decl:{start:{line:2,column:9},end:{line:2,column:17}},loc:{start:{line:2,column:21},end:{line:4,column:1}},line:2}},branchMap:{0:{loc:{start:{line:3,column:21},end:{line:3,column:71}},type:"if",locations:[{start:{line:3,column:21},end:{line:3,column:71}},{start:{line:3,column:21},end:{line:3,column:71}}],line:3}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:"/Users/bwakeford/Documents/personal/dntd-web/src/components/index.ts",sourceRoot:"",sources:["/Users/bwakeford/Documents/personal/dntd-web/src/components/index.ts"],names:[],mappings:";;;;;AAAA,uCAAiC;AACjC,wCAAkC;AAClC,wCAAkC;AAClC,wCAAkC;AAClC,wCAAkC;AAClC,yCAAmC;AACnC,0CAAoC;AACpC,0CAAoC;AACpC,2CAAqC;AACrC,2CAAqC",sourcesContent:['export * from "./googleComponent"\nexport * from "./composeComponent"\nexport * from "./entriesComponent"\nexport * from "./shelvesComponent"\nexport * from "./refinesComponent"\nexport * from "./journalsComponent"\nexport * from "./syncStateComponent"\nexport * from "./searchbarComponent"\nexport * from "./addShelvesComponent"\nexport * from "./breadcrumbComponent"\n']},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},(i=t[r="__coverage__"]||(t[r]={}))[l]&&i[l].hash===o?i[l]:(c.hash=o,i[l]=c));function u(n){for(var A in s.f[0]++,s.s[0]++,n)s.s[1]++,e.hasOwnProperty(A)?s.b[0][1]++:(s.b[0][0]++,s.s[2]++,e[A]=n[A])}s.s[3]++,Object.defineProperty(e,"__esModule",{value:!0}),s.s[4]++,u(A(22)),s.s[5]++,u(A(44)),s.s[6]++,u(A(45)),s.s[7]++,u(A(46)),s.s[8]++,u(A(47)),s.s[9]++,u(A(48)),s.s[10]++,u(A(49)),s.s[11]++,u(A(50)),s.s[12]++,u(A(51)),s.s[13]++,u(A(52))},function(n,e,A){"use strict";var l,o,t,r,c,i,s=(l="/Users/bwakeford/Documents/personal/dntd-web/src/models/index.ts",o="f007f8f605255f22cc7cff012694add4898820d7",t=new(0,function(){}.constructor)("return this")(),c={path:"/Users/bwakeford/Documents/personal/dntd-web/src/models/index.ts",statementMap:{0:{start:{line:3,column:4},end:{line:3,column:71}},1:{start:{line:3,column:21},end:{line:3,column:71}},2:{start:{line:3,column:53},end:{line:3,column:71}},3:{start:{line:5,column:0},end:{line:5,column:62}},4:{start:{line:6,column:0},end:{line:6,column:32}},5:{start:{line:7,column:0},end:{line:7,column:32}},6:{start:{line:8,column:0},end:{line:8,column:34}},7:{start:{line:9,column:0},end:{line:9,column:34}},8:{start:{line:10,column:0},end:{line:10,column:35}},9:{start:{line:11,column:0},end:{line:11,column:35}},10:{start:{line:12,column:0},end:{line:12,column:35}},11:{start:{line:13,column:0},end:{line:13,column:35}},12:{start:{line:14,column:0},end:{line:14,column:36}},13:{start:{line:15,column:0},end:{line:15,column:36}},14:{start:{line:16,column:0},end:{line:16,column:42}}},fnMap:{0:{name:"__export",decl:{start:{line:2,column:9},end:{line:2,column:17}},loc:{start:{line:2,column:21},end:{line:4,column:1}},line:2}},branchMap:{0:{loc:{start:{line:3,column:21},end:{line:3,column:71}},type:"if",locations:[{start:{line:3,column:21},end:{line:3,column:71}},{start:{line:3,column:21},end:{line:3,column:71}}],line:3}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:"/Users/bwakeford/Documents/personal/dntd-web/src/models/index.ts",sourceRoot:"",sources:["/Users/bwakeford/Documents/personal/dntd-web/src/models/index.ts"],names:[],mappings:";;;;;AAAA,gCAA0B;AAC1B,gCAA0B;AAC1B,kCAA4B;AAC5B,kCAA4B;AAC5B,mCAA6B;AAC7B,mCAA6B;AAC7B,mCAA6B;AAC7B,mCAA6B;AAC7B,oCAA8B;AAC9B,oCAA8B;AAC9B,0CAAoC",sourcesContent:['export * from "./UrlModel"\r\nexport * from "./TagModel"\r\nexport * from "./EntryModel"\r\nexport * from "./ShelfModel"\r\nexport * from "./SyncerModel"\r\nexport * from "./SearchModel"\r\nexport * from "./GoogleModel"\r\nexport * from "./SearchModel"\r\nexport * from "./JournalModel"\r\nexport * from "./LibraryModel"\r\nexport * from "./ServiceWorkerModel"\r\n']},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},(i=t[r="__coverage__"]||(t[r]={}))[l]&&i[l].hash===o?i[l]:(c.hash=o,i[l]=c));function u(n){for(var A in s.f[0]++,s.s[0]++,n)s.s[1]++,e.hasOwnProperty(A)?s.b[0][1]++:(s.b[0][0]++,s.s[2]++,e[A]=n[A])}s.s[3]++,Object.defineProperty(e,"__esModule",{value:!0}),s.s[4]++,u(A(25)),s.s[5]++,u(A(26)),s.s[6]++,u(A(27)),s.s[7]++,u(A(28)),s.s[8]++,u(A(29)),s.s[9]++,u(A(16)),s.s[10]++,u(A(30)),s.s[11]++,u(A(16)),s.s[12]++,u(A(31)),s.s[13]++,u(A(32)),s.s[14]++,u(A(33))},function(n,e,A){"use strict";var l,o,t,r,c,i,s=(l="/Users/bwakeford/Documents/personal/dntd-web/src/errors/index.ts",o="544460fd12883d5853b8b7a430591368c07a044b",t=new(0,function(){}.constructor)("return this")(),c={path:"/Users/bwakeford/Documents/personal/dntd-web/src/errors/index.ts",statementMap:{0:{start:{line:3,column:4},end:{line:3,column:71}},1:{start:{line:3,column:21},end:{line:3,column:71}},2:{start:{line:3,column:53},end:{line:3,column:71}},3:{start:{line:5,column:0},end:{line:5,column:62}},4:{start:{line:6,column:0},end:{line:6,column:37}}},fnMap:{0:{name:"__export",decl:{start:{line:2,column:9},end:{line:2,column:17}},loc:{start:{line:2,column:21},end:{line:4,column:1}},line:2}},branchMap:{0:{loc:{start:{line:3,column:21},end:{line:3,column:71}},type:"if",locations:[{start:{line:3,column:21},end:{line:3,column:71}},{start:{line:3,column:21},end:{line:3,column:71}}],line:3}},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:"/Users/bwakeford/Documents/personal/dntd-web/src/errors/index.ts",sourceRoot:"",sources:["/Users/bwakeford/Documents/personal/dntd-web/src/errors/index.ts"],names:[],mappings:";;;;;AAAA,qCAA+B",sourcesContent:['export * from "./FriendlyError"\n']},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},(i=t[r="__coverage__"]||(t[r]={}))[l]&&i[l].hash===o?i[l]:(c.hash=o,i[l]=c));s.s[3]++,Object.defineProperty(e,"__esModule",{value:!0}),s.s[4]++,function(n){for(var A in s.f[0]++,s.s[0]++,n)s.s[1]++,e.hasOwnProperty(A)?s.b[0][1]++:(s.b[0][0]++,s.s[2]++,e[A]=n[A])}(A(34))},function(n,e,A){"use strict";var l,o,t,r,c,i,s=(l="/Users/bwakeford/Documents/personal/dntd-web/src/types/errors.ts",o="045e93cdef57616e7fb224c75cbe52a373520860",t=new(0,function(){}.constructor)("return this")(),c={path:"/Users/bwakeford/Documents/personal/dntd-web/src/types/errors.ts",statementMap:{0:{start:{line:2,column:0},end:{line:2,column:62}},1:{start:{line:3,column:11},end:{line:3,column:23}},2:{start:{line:6,column:8},end:{line:6,column:24}},3:{start:{line:7,column:8},end:{line:7,column:39}},4:{start:{line:8,column:8},end:{line:8,column:39}},5:{start:{line:9,column:8},end:{line:14,column:10}},6:{start:{line:17,column:0},end:{line:17,column:34}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:4},end:{line:5,column:5}},loc:{start:{line:5,column:59},end:{line:15,column:5}},line:5}},branchMap:{0:{loc:{start:{line:10,column:19},end:{line:10,column:55}},type:"cond-expr",locations:[{start:{line:10,column:43},end:{line:10,column:48}},{start:{line:10,column:51},end:{line:10,column:55}}],line:10}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:"/Users/bwakeford/Documents/personal/dntd-web/src/types/errors.ts",sourceRoot:"",sources:["/Users/bwakeford/Documents/personal/dntd-web/src/types/errors.ts"],names:[],mappings:";;AAAA,wBAAmD;AAYnD,MAAa,WAAY,SAAQ,KAAK;IAGlC,YAAY,QAAgB,EAAS,WAAmB,EAAS,WAAoB,EAAE,KAAe;QAClG,KAAK,CAAC,QAAQ,CAAC,CAAA;QADkB,gBAAW,GAAX,WAAW,CAAQ;QAAS,gBAAW,GAAX,WAAW,CAAS;QAEjF,IAAI,CAAC,OAAO,GAAG;YACX,KAAK,EAAE,CAAC,KAAK,KAAK,SAAS,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI;YAC3C,KAAK,EAAE,IAAI;YACX,WAAW,EAAE,IAAI,CAAC,WAAW;YAC7B,IAAI,EAAE,oBAAiB,CAAC,KAAK;SAChC,CAAA;IACL,CAAC;CACJ;AAZD,kCAYC",sourcesContent:['import { ErrorPayload, SyncerPayloadType } from "."\n\nexport interface GapiErrorResponseBody {\n    code: number,\n    message: string,\n    status: string\n}\n\nexport interface GapiErrorResponse {\n    error: GapiErrorResponseBody\n}\n\nexport class SyncerError extends Error { // TODO: see if this can be moved to src/errors/\n    public payload: ErrorPayload\n\n    constructor(errorMsg: string, public friendlyMsg: string, public needsReAuth: boolean, pause?: boolean) {\n        super(errorMsg)\n        this.payload = {\n            pause: (pause !== undefined) ? pause : true,\n            error: this,\n            friendlyMsg: this.friendlyMsg,\n            type: SyncerPayloadType.ERROR,\n        }\n    }\n}\n']},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},(i=t[r="__coverage__"]||(t[r]={}))[l]&&i[l].hash===o?i[l]:(c.hash=o,i[l]=c));s.s[0]++,Object.defineProperty(e,"__esModule",{value:!0});const u=(s.s[1]++,A(1));class a extends Error{constructor(n,e,A,l){s.f[0]++,s.s[2]++,super(n),s.s[3]++,this.friendlyMsg=e,s.s[4]++,this.needsReAuth=A,s.s[5]++,this.payload={pause:void 0!==l?(s.b[0][0]++,l):(s.b[0][1]++,!0),error:this,friendlyMsg:this.friendlyMsg,type:u.SyncerPayloadType.ERROR}}}s.s[6]++,e.SyncerError=a},function(n,e,A){"use strict";var l,o,t,r,c,i,s=(l="/Users/bwakeford/Documents/personal/dntd-web/src/types/search.ts",o="0ebb96bcffde59510933573a940b9c7b84eb43f5",t=new(0,function(){}.constructor)("return this")(),c={path:"/Users/bwakeford/Documents/personal/dntd-web/src/types/search.ts",statementMap:{0:{start:{line:2,column:0},end:{line:2,column:62}},1:{start:{line:4,column:0},end:{line:8,column:65}},2:{start:{line:5,column:4},end:{line:5,column:48}},3:{start:{line:6,column:4},end:{line:6,column:46}},4:{start:{line:7,column:4},end:{line:7,column:44}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:1},end:{line:4,column:2}},loc:{start:{line:4,column:23},end:{line:8,column:1}},line:4}},branchMap:{0:{loc:{start:{line:8,column:16},end:{line:8,column:63}},type:"binary-expr",locations:[{start:{line:8,column:16},end:{line:8,column:34}},{start:{line:8,column:39},end:{line:8,column:62}}],line:8}},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:"/Users/bwakeford/Documents/personal/dntd-web/src/types/search.ts",sourceRoot:"",sources:["/Users/bwakeford/Documents/personal/dntd-web/src/types/search.ts"],names:[],mappings:";;AAAA,IAAY,UAIX;AAJD,WAAY,UAAU;IAClB,2CAAI,CAAA;IACJ,yCAAG,CAAA;IACH,uCAAE,CAAA;AACN,CAAC,EAJW,UAAU,GAAV,kBAAU,KAAV,kBAAU,QAIrB",sourcesContent:["export enum SearchType {\n    NONE,\n    AND,\n    OR,\n}\n"]},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},(i=t[r="__coverage__"]||(t[r]={}))[l]&&i[l].hash===o?i[l]:(c.hash=o,i[l]=c));s.s[0]++,Object.defineProperty(e,"__esModule",{value:!0}),s.s[1]++,function(n){s.f[0]++,s.s[2]++,n[n.NONE=0]="NONE",s.s[3]++,n[n.AND=1]="AND",s.s[4]++,n[n.OR=2]="OR"}((s.b[0][0]++,e.SearchType||(s.b[0][1]++,e.SearchType={})))},function(n,e,A){"use strict";var l,o,t,r,c,i,s=(l="/Users/bwakeford/Documents/personal/dntd-web/src/types/testing.ts",o="0e21fa2bb80151c302c214db524aa091af727725",t=new(0,function(){}.constructor)("return this")(),c={path:"/Users/bwakeford/Documents/personal/dntd-web/src/types/testing.ts",statementMap:{0:{start:{line:2,column:0},end:{line:2,column:62}},1:{start:{line:4,column:0},end:{line:13,column:59}},2:{start:{line:5,column:4},end:{line:5,column:26}},3:{start:{line:6,column:4},end:{line:6,column:30}},4:{start:{line:7,column:4},end:{line:7,column:50}},5:{start:{line:8,column:4},end:{line:8,column:37}},6:{start:{line:9,column:4},end:{line:9,column:40}},7:{start:{line:10,column:4},end:{line:10,column:38}},8:{start:{line:11,column:4},end:{line:11,column:34}},9:{start:{line:12,column:4},end:{line:12,column:27}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:1},end:{line:4,column:2}},loc:{start:{line:4,column:21},end:{line:13,column:1}},line:4}},branchMap:{0:{loc:{start:{line:13,column:14},end:{line:13,column:57}},type:"binary-expr",locations:[{start:{line:13,column:14},end:{line:13,column:30}},{start:{line:13,column:35},end:{line:13,column:56}}],line:13}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:"/Users/bwakeford/Documents/personal/dntd-web/src/types/testing.ts",sourceRoot:"",sources:["/Users/bwakeford/Documents/personal/dntd-web/src/types/testing.ts"],names:[],mappings:";;AAAA,IAAY,QASX;AATD,WAAY,QAAQ;IAChB,qBAAS,CAAA;IACT,yBAAa,CAAA;IACb,6CAAiC,CAAA;IACjC,gCAAoB,CAAA;IACpB,mCAAuB,CAAA;IACvB,iCAAqB,CAAA;IACrB,6BAAiB,CAAA;IACjB,sBAAU,CAAA;AACd,CAAC,EATW,QAAQ,GAAR,gBAAQ,KAAR,gBAAQ,QASnB",sourcesContent:['export enum TestMode {\n    OFF = "0",\n    WORKING = "1",\n    FAIL_GET_SPREADSHEET_SHEETS = "2",\n    FAIL_GET_RANGE = "3",\n    FAIL_UPDATE_RANGE = "4",\n    FAIL_DELETE_ROW = "5",\n    RETURN_ROWS = "6",\n    DEMO = "7"\n}\n']},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},(i=t[r="__coverage__"]||(t[r]={}))[l]&&i[l].hash===o?i[l]:(c.hash=o,i[l]=c));s.s[0]++,Object.defineProperty(e,"__esModule",{value:!0}),s.s[1]++,function(n){s.f[0]++,s.s[2]++,n.OFF="0",s.s[3]++,n.WORKING="1",s.s[4]++,n.FAIL_GET_SPREADSHEET_SHEETS="2",s.s[5]++,n.FAIL_GET_RANGE="3",s.s[6]++,n.FAIL_UPDATE_RANGE="4",s.s[7]++,n.FAIL_DELETE_ROW="5",s.s[8]++,n.RETURN_ROWS="6",s.s[9]++,n.DEMO="7"}((s.b[0][0]++,e.TestMode||(s.b[0][1]++,e.TestMode={})))},function(n,e,A){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(n){n[n.AUTH_UPDATE=0]="AUTH_UPDATE",n[n.DELETE_ROW=1]="DELETE_ROW",n[n.UPDATE_ROW=2]="UPDATE_ROW",n[n.GET_ROWS=3]="GET_ROWS",n[n.GET_SHEETS=4]="GET_SHEETS",n[n.TEST_MODE_UPDATE=5]="TEST_MODE_UPDATE",n[n.UNPAUSE=6]="UNPAUSE",n[n.GET_SPREADSHEET=7]="GET_SPREADSHEET",n[n.EXTEND_SHEET=8]="EXTEND_SHEET",n[n.CREATE_ROW=9]="CREATE_ROW",n[n.MOVE_ROW=10]="MOVE_ROW",n[n.ERROR=11]="ERROR",n[n.TOKEN_REQUEST=12]="TOKEN_REQUEST",n[n.SYNC_STATE=13]="SYNC_STATE"}(e.SyncerPayloadType||(e.SyncerPayloadType={})),function(n){n[n.SYNCER_STATE=0]="SYNCER_STATE",n[n.ERROR=1]="ERROR",n[n.REAUTH=2]="REAUTH"}(e.SyncerResponseType||(e.SyncerResponseType={})),function(n){n.PAUSED="cloud_off",n.UPLOADING="cloud_upload",n.DOWNLOADING="cloud_download",n.SYNCED="cloud_done",n.INITIALIZING="cloud_queue"}(e.SyncerState||(e.SyncerState={}))},function(n,e,A){"use strict";var l,o,t,r,c,i,s=(l="/Users/bwakeford/Documents/personal/dntd-web/src/controllers/urlController.ts",o="cf8e597e601d8422ffca44017a5bccc152d444ad",t=new(0,function(){}.constructor)("return this")(),c={path:"/Users/bwakeford/Documents/personal/dntd-web/src/controllers/urlController.ts",statementMap:{0:{start:{line:2,column:22},end:{line:4,column:1}},1:{start:{line:3,column:4},end:{line:3,column:62}},2:{start:{line:5,column:0},end:{line:5,column:62}},3:{start:{line:6,column:18},end:{line:6,column:53}},4:{start:{line:7,column:12},end:{line:7,column:25}},5:{start:{line:8,column:0},end:{line:13,column:2}},6:{start:{line:15,column:4},end:{line:15,column:29}},7:{start:{line:18,column:13},end:{line:18,column:33}},8:{start:{line:19,column:4},end:{line:20,column:25}},9:{start:{line:20,column:8},end:{line:20,column:25}},10:{start:{line:21,column:4},end:{line:21,column:44}},11:{start:{line:24,column:13},end:{line:24,column:35}},12:{start:{line:25,column:16},end:{line:25,column:32}},13:{start:{line:26,column:4},end:{line:27,column:25}},14:{start:{line:27,column:8},end:{line:27,column:25}},15:{start:{line:28,column:4},end:{line:28,column:34}},16:{start:{line:32,column:21},end:{line:32,column:23}},17:{start:{line:33,column:15},end:{line:33,column:90}},18:{start:{line:33,column:60},end:{line:33,column:89}},19:{start:{line:34,column:18},end:{line:34,column:27}},20:{start:{line:35,column:4},end:{line:53,column:5}},21:{start:{line:36,column:20},end:{line:36,column:27}},22:{start:{line:37,column:20},end:{line:37,column:57}},23:{start:{line:38,column:8},end:{line:44,column:9}},24:{start:{line:39,column:12},end:{line:39,column:28}},25:{start:{line:40,column:12},end:{line:40,column:120}},26:{start:{line:42,column:13},end:{line:44,column:9}},27:{start:{line:43,column:12},end:{line:43,column:199}},28:{start:{line:45,column:8},end:{line:46,column:62}},29:{start:{line:46,column:12},end:{line:46,column:62}},30:{start:{line:47,column:8},end:{line:52,column:9}},31:{start:{line:48,column:12},end:{line:48,column:67}},32:{start:{line:51,column:12},end:{line:51,column:81}},33:{start:{line:54,column:4},end:{line:54,column:22}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:2,column:56},end:{line:2,column:57}},loc:{start:{line:2,column:71},end:{line:4,column:1}},line:2},1:{name:"redirect",decl:{start:{line:14,column:9},end:{line:14,column:17}},loc:{start:{line:14,column:24},end:{line:16,column:1}},line:14},2:{name:"getActiveShelf",decl:{start:{line:17,column:9},end:{line:17,column:23}},loc:{start:{line:17,column:26},end:{line:22,column:1}},line:17},3:{name:"getActiveJournal",decl:{start:{line:23,column:9},end:{line:23,column:25}},loc:{start:{line:23,column:28},end:{line:29,column:1}},line:23},4:{name:"getBreadcrumbTrail",decl:{start:{line:30,column:9},end:{line:30,column:27}},loc:{start:{line:30,column:30},end:{line:55,column:1}},line:30},5:{name:"(anonymous_5)",decl:{start:{line:33,column:51},end:{line:33,column:52}},loc:{start:{line:33,column:60},end:{line:33,column:89}},line:33}},branchMap:{0:{loc:{start:{line:2,column:22},end:{line:4,column:1}},type:"binary-expr",locations:[{start:{line:2,column:23},end:{line:2,column:27}},{start:{line:2,column:31},end:{line:2,column:51}},{start:{line:2,column:56},end:{line:4,column:1}}],line:2},1:{loc:{start:{line:3,column:11},end:{line:3,column:61}},type:"cond-expr",locations:[{start:{line:3,column:37},end:{line:3,column:40}},{start:{line:3,column:43},end:{line:3,column:61}}],line:3},2:{loc:{start:{line:3,column:12},end:{line:3,column:33}},type:"binary-expr",locations:[{start:{line:3,column:12},end:{line:3,column:15}},{start:{line:3,column:19},end:{line:3,column:33}}],line:3},3:{loc:{start:{line:19,column:4},end:{line:20,column:25}},type:"if",locations:[{start:{line:19,column:4},end:{line:20,column:25}},{start:{line:19,column:4},end:{line:20,column:25}}],line:19},4:{loc:{start:{line:26,column:4},end:{line:27,column:25}},type:"if",locations:[{start:{line:26,column:4},end:{line:27,column:25}},{start:{line:26,column:4},end:{line:27,column:25}}],line:26},5:{loc:{start:{line:26,column:8},end:{line:26,column:47}},type:"binary-expr",locations:[{start:{line:26,column:8},end:{line:26,column:24}},{start:{line:26,column:28},end:{line:26,column:47}}],line:26},6:{loc:{start:{line:33,column:60},end:{line:33,column:89}},type:"binary-expr",locations:[{start:{line:33,column:60},end:{line:33,column:73}},{start:{line:33,column:77},end:{line:33,column:89}}],line:33},7:{loc:{start:{line:38,column:8},end:{line:44,column:9}},type:"if",locations:[{start:{line:38,column:8},end:{line:44,column:9}},{start:{line:38,column:8},end:{line:44,column:9}}],line:38},8:{loc:{start:{line:40,column:20},end:{line:40,column:119}},type:"binary-expr",locations:[{start:{line:40,column:21},end:{line:40,column:109}},{start:{line:40,column:114},end:{line:40,column:119}}],line:40},9:{loc:{start:{line:40,column:21},end:{line:40,column:109}},type:"cond-expr",locations:[{start:{line:40,column:92},end:{line:40,column:98}},{start:{line:40,column:101},end:{line:40,column:109}}],line:40},10:{loc:{start:{line:40,column:21},end:{line:40,column:89}},type:"binary-expr",locations:[{start:{line:40,column:21},end:{line:40,column:72}},{start:{line:40,column:76},end:{line:40,column:89}}],line:40},11:{loc:{start:{line:42,column:13},end:{line:44,column:9}},type:"if",locations:[{start:{line:42,column:13},end:{line:44,column:9}},{start:{line:42,column:13},end:{line:44,column:9}}],line:42},12:{loc:{start:{line:42,column:17},end:{line:42,column:49}},type:"binary-expr",locations:[{start:{line:42,column:17},end:{line:42,column:24}},{start:{line:42,column:28},end:{line:42,column:49}}],line:42},13:{loc:{start:{line:43,column:20},end:{line:43,column:198}},type:"binary-expr",locations:[{start:{line:43,column:21},end:{line:43,column:188}},{start:{line:43,column:193},end:{line:43,column:198}}],line:43},14:{loc:{start:{line:43,column:21},end:{line:43,column:188}},type:"cond-expr",locations:[{start:{line:43,column:171},end:{line:43,column:177}},{start:{line:43,column:180},end:{line:43,column:188}}],line:43},15:{loc:{start:{line:43,column:21},end:{line:43,column:168}},type:"binary-expr",locations:[{start:{line:43,column:21},end:{line:43,column:151}},{start:{line:43,column:155},end:{line:43,column:168}}],line:43},16:{loc:{start:{line:43,column:27},end:{line:43,column:141}},type:"cond-expr",locations:[{start:{line:43,column:100},end:{line:43,column:106}},{start:{line:43,column:109},end:{line:43,column:141}}],line:43},17:{loc:{start:{line:43,column:27},end:{line:43,column:97}},type:"binary-expr",locations:[{start:{line:43,column:27},end:{line:43,column:80}},{start:{line:43,column:84},end:{line:43,column:97}}],line:43},18:{loc:{start:{line:45,column:8},end:{line:46,column:62}},type:"if",locations:[{start:{line:45,column:8},end:{line:46,column:62}},{start:{line:45,column:8},end:{line:46,column:62}}],line:45},19:{loc:{start:{line:47,column:8},end:{line:52,column:9}},type:"if",locations:[{start:{line:47,column:8},end:{line:52,column:9}},{start:{line:47,column:8},end:{line:52,column:9}}],line:47}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{0:[0,0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0]},inputSourceMap:{version:3,file:"/Users/bwakeford/Documents/personal/dntd-web/src/controllers/urlController.ts",sourceRoot:"",sources:["/Users/bwakeford/Documents/personal/dntd-web/src/controllers/urlController.ts"],names:[],mappings:";;;;;AAAA,sDAAuB;AACvB,0BAA2C;AAG9B,QAAA,aAAa,GAAG;IACzB,QAAQ,EAAE,QAAQ;IAClB,cAAc,EAAE,cAAc;IAC9B,gBAAgB,EAAE,gBAAgB;IAClC,kBAAkB,EAAE,kBAAkB;CACzC,CAAA;AAED,SAAS,QAAQ,CAAC,IAAY;IAC1B,YAAQ,CAAC,IAAI,GAAG,IAAI,CAAA;AACxB,CAAC;AAED,SAAS,cAAc;IACnB,IAAI,EAAE,GAAG,YAAQ,CAAC,OAAO,CAAA;IACzB,IAAI,EAAE,KAAK,SAAS;QAAE,OAAO,SAAS,CAAA;IACtC,OAAO,gBAAY,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE,CAAC,CAAA;AACvC,CAAC;AAED,SAAS,gBAAgB;IACrB,IAAI,EAAE,GAAG,YAAQ,CAAC,SAAS,CAAA;IAC3B,IAAI,KAAK,GAAI,cAAc,EAAE,CAAA;IAC7B,IAAI,EAAE,KAAK,SAAS,IAAI,KAAK,KAAK,SAAS;QAAE,OAAO,SAAS,CAAA;IAC7D,OAAO,KAAK,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE,CAAC,CAAA;AACjC,CAAC;AAED,SAAS,kBAAkB;;IAEvB,IAAI,UAAU,GAAc,EAAE,CAAA;IAC9B,IAAI,IAAI,GAAG,YAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,EAAE,CAAC,KAAK,KAAK,GAAG,IAAI,KAAK,KAAK,EAAE,CAAC,CAAA;IAClF,IAAI,OAAO,GAAuB,SAAS,CAAA;IAC3C,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;QAClC,IAAI,KAAK,GAAG,IAAI,CAAC,CAAC,CAAC,CAAA;QACnB,IAAI,KAAK,GAAG,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAA;QACjD,IAAI,CAAC,KAAK,CAAC,EAAE;YACT,OAAO,GAAG,KAAK,CAAA;YACf,KAAK,GAAG,OAAA,gBAAY,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,0CAAE,KAAK,KAAI,KAAK,CAAA;SAC1D;aAAM,IAAI,CAAC,KAAK,CAAC,IAAI,OAAO,KAAK,SAAS,EAAE;YACzC,KAAK,GAAG,aAAA,gBAAY,CAAC,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,0CAAE,QAAQ,CAAC,GAAG,CAAC,QAAQ,CAAC,KAAK,CAAC,2CAAG,KAAK,KAAI,KAAK,CAAA;SAC3F;QACD,IAAI,CAAC,KAAK,CAAC;YAAE,UAAU,CAAC,IAAI,CAAC,iBAAC,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC,CAAA;QAC9C,IAAI,CAAC,KAAK,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE;YACvB,UAAU,CAAC,IAAI,CAAC,iBAAC,CAAC,MAAM,EAAE,GAAG,KAAK,EAAE,CAAC,CAAC,CAAA;SACzC;aAAM;YACH,UAAU,CAAC,IAAI,CAAC,iBAAC,CAAC,GAAG,EAAE,EAAE,IAAI,EAAE,KAAK,EAAE,EAAE,GAAG,KAAK,EAAE,CAAC,CAAC,CAAA;SACvD;KACJ;IACD,OAAO,UAAU,CAAA;AACrB,CAAC",sourcesContent:['import m from "mithril"\nimport { libraryModel, urlModel } from ".."\nimport { ShelfModel, JournalModel } from "../models"\n\nexport const urlController = {\n    redirect: redirect,\n    getActiveShelf: getActiveShelf,\n    getActiveJournal: getActiveJournal,\n    getBreadcrumbTrail: getBreadcrumbTrail,\n}\n\nfunction redirect(hash: string) {\n    urlModel.hash = hash\n}\n\nfunction getActiveShelf(): ShelfModel | undefined {\n    let id = urlModel.shelfId\n    if (id === undefined) return undefined\n    return libraryModel.shelves.get(id)\n}\n\nfunction getActiveJournal(): JournalModel | undefined {\n    let id = urlModel.journalId\n    let shelf =  getActiveShelf()\n    if (id === undefined || shelf === undefined) return undefined\n    return shelf.journals.get(id)\n}\n\nfunction getBreadcrumbTrail() {\n    // TODO: add dropdowns on each shelf and journal crumb\n    let breadcrumb: m.Vnode[] = []\n    let hash = urlModel.hash.split("/").filter(crumb => crumb !== "#" && crumb !== "")\n    let shelfId: string | undefined = undefined\n    for (let i = 0; i < hash.length; i++) {\n        let crumb = hash[i]\n        let trail = "#/" + hash.slice(0, i + 1).join("/")\n        if (i === 1) {\n            shelfId = crumb\n            crumb = libraryModel.shelves.get(crumb)?.title || crumb\n        } else if (i === 2 && shelfId !== undefined) {\n            crumb = libraryModel.shelves.get(shelfId)?.journals.get(parseInt(crumb))?.title || crumb\n        }\n        if (i !== 0) breadcrumb.push(m("span", " / "))\n        if (i === hash.length - 1) {\n            breadcrumb.push(m("span", `${crumb}`))\n        } else {\n            breadcrumb.push(m("a", { href: trail }, `${crumb}`))\n        }\n    }\n    return breadcrumb\n}\n']},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},(i=t[r="__coverage__"]||(t[r]={}))[l]&&i[l].hash===o?i[l]:(c.hash=o,i[l]=c)),u=(s.s[0]++,s.b[0][0]++,this&&(s.b[0][1]++,this.__importDefault)||(s.b[0][2]++,function(n){return s.f[0]++,s.s[1]++,s.b[2][0]++,n&&(s.b[2][1]++,n.__esModule)?(s.b[1][0]++,n):(s.b[1][1]++,{default:n})}));s.s[2]++,Object.defineProperty(e,"__esModule",{value:!0});const a=(s.s[3]++,u(A(0))),C=(s.s[4]++,A(3));function m(){s.f[2]++;let n=(s.s[7]++,C.urlModel.shelfId);return s.s[8]++,void 0===n?(s.b[3][0]++,void s.s[9]++):(s.b[3][1]++,s.s[10]++,C.libraryModel.shelves.get(n))}s.s[5]++,e.urlController={redirect:function(n){s.f[1]++,s.s[6]++,C.urlModel.hash=n},getActiveShelf:m,getActiveJournal:function(){s.f[3]++;let n=(s.s[11]++,C.urlModel.journalId),e=(s.s[12]++,m());if(s.s[13]++,s.b[5][0]++,void 0===n||(s.b[5][1]++,void 0===e))return s.b[4][0]++,void s.s[14]++;s.b[4][1]++;return s.s[15]++,e.journals.get(n)},getBreadcrumbTrail:function(){var n,e,A;s.f[4]++;let l=(s.s[16]++,[]),o=(s.s[17]++,C.urlModel.hash.split("/").filter(n=>(s.f[5]++,s.s[18]++,s.b[6][0]++,"#"!==n&&(s.b[6][1]++,""!==n)))),t=void s.s[19]++;s.s[20]++;for(let r=0;r<o.length;r++){let c=(s.s[21]++,o[r]),i=(s.s[22]++,"#/"+o.slice(0,r+1).join("/"));s.s[23]++,1===r?(s.b[7][0]++,s.s[24]++,t=c,s.s[25]++,s.b[8][0]++,s.b[10][0]++,c=(null===(n=C.libraryModel.shelves.get(c))||(s.b[10][1]++,void 0===n)?void s.b[9][0]++:(s.b[9][1]++,n.title))||(s.b[8][1]++,c)):(s.b[7][1]++,s.s[26]++,s.b[12][0]++,2===r&&(s.b[12][1]++,void 0!==t)?(s.b[11][0]++,s.s[27]++,s.b[13][0]++,s.b[15][0]++,c=(null===(s.b[17][0]++,A=null===(e=C.libraryModel.shelves.get(t))||(s.b[17][1]++,void 0===e)?void s.b[16][0]++:(s.b[16][1]++,e.journals.get(parseInt(c))))||(s.b[15][1]++,void 0===A)?void s.b[14][0]++:(s.b[14][1]++,A.title))||(s.b[13][1]++,c)):s.b[11][1]++),s.s[28]++,0!==r?(s.b[18][0]++,s.s[29]++,l.push(a.default("span"," / "))):s.b[18][1]++,s.s[30]++,r===o.length-1?(s.b[19][0]++,s.s[31]++,l.push(a.default("span",""+c))):(s.b[19][1]++,s.s[32]++,l.push(a.default("a",{href:i},""+c)))}return s.s[33]++,l}}},function(n,e,A){"use strict";var l,o,t,r,c,i,s=(l="/Users/bwakeford/Documents/personal/dntd-web/src/controllers/entryController.ts",o="5be4dd2fc47d102ae302c6f76ab9307f003e5cf6",t=new(0,function(){}.constructor)("return this")(),c={path:"/Users/bwakeford/Documents/personal/dntd-web/src/controllers/entryController.ts",statementMap:{0:{start:{line:2,column:0},end:{line:2,column:62}},1:{start:{line:3,column:20},end:{line:3,column:43}},2:{start:{line:4,column:11},end:{line:4,column:23}},3:{start:{line:5,column:19},end:{line:5,column:52}},4:{start:{line:6,column:0},end:{line:9,column:2}},5:{start:{line:11,column:4},end:{line:18,column:5}},6:{start:{line:12,column:8},end:{line:12,column:30}},7:{start:{line:13,column:8},end:{line:13,column:64}},8:{start:{line:14,column:8},end:{line:14,column:47}},9:{start:{line:15,column:8},end:{line:17,column:9}},10:{start:{line:16,column:12},end:{line:16,column:116}},11:{start:{line:21,column:4},end:{line:21,column:24}},12:{start:{line:22,column:4},end:{line:22,column:51}},13:{start:{line:23,column:4},end:{line:23,column:53}},14:{start:{line:24,column:4},end:{line:24,column:41}},15:{start:{line:25,column:4},end:{line:25,column:49}},16:{start:{line:26,column:4},end:{line:26,column:58}},17:{start:{line:29,column:4},end:{line:33,column:5}},18:{start:{line:30,column:20},end:{line:30,column:34}},19:{start:{line:31,column:8},end:{line:31,column:65}},20:{start:{line:32,column:8},end:{line:32,column:30}},21:{start:{line:34,column:4},end:{line:34,column:16}},22:{start:{line:37,column:15},end:{line:37,column:24}},23:{start:{line:38,column:4},end:{line:45,column:5}},24:{start:{line:39,column:8},end:{line:44,column:9}},25:{start:{line:40,column:12},end:{line:40,column:41}},26:{start:{line:43,column:12},end:{line:43,column:37}},27:{start:{line:46,column:4},end:{line:46,column:16}},28:{start:{line:49,column:21},end:{line:49,column:23}},29:{start:{line:50,column:22},end:{line:50,column:47}},30:{start:{line:51,column:4},end:{line:54,column:5}},31:{start:{line:52,column:18},end:{line:52,column:100}},32:{start:{line:53,column:8},end:{line:53,column:52}},33:{start:{line:55,column:4},end:{line:55,column:72}},34:{start:{line:55,column:30},end:{line:55,column:70}},35:{start:{line:56,column:4},end:{line:56,column:22}},36:{start:{line:59,column:17},end:{line:59,column:32}},37:{start:{line:60,column:4},end:{line:62,column:7}},38:{start:{line:61,column:8},end:{line:61,column:75}}},fnMap:{0:{name:"save",decl:{start:{line:10,column:9},end:{line:10,column:13}},loc:{start:{line:10,column:53},end:{line:19,column:1}},line:10},1:{name:"update",decl:{start:{line:20,column:9},end:{line:20,column:15}},loc:{start:{line:20,column:32},end:{line:27,column:1}},line:20},2:{name:"render",decl:{start:{line:28,column:9},end:{line:28,column:15}},loc:{start:{line:28,column:34},end:{line:35,column:1}},line:28},3:{name:"getTags",decl:{start:{line:36,column:9},end:{line:36,column:16}},loc:{start:{line:36,column:29},end:{line:47,column:1}},line:36},4:{name:"getTagMatches",decl:{start:{line:48,column:9},end:{line:48,column:22}},loc:{start:{line:48,column:29},end:{line:57,column:1}},line:48},5:{name:"(anonymous_5)",decl:{start:{line:55,column:20},end:{line:55,column:21}},loc:{start:{line:55,column:30},end:{line:55,column:70}},line:55},6:{name:"tokenize",decl:{start:{line:58,column:9},end:{line:58,column:17}},loc:{start:{line:58,column:24},end:{line:63,column:1}},line:58},7:{name:"(anonymous_7)",decl:{start:{line:60,column:25},end:{line:60,column:26}},loc:{start:{line:60,column:34},end:{line:62,column:5}},line:60}},branchMap:{0:{loc:{start:{line:11,column:4},end:{line:18,column:5}},type:"if",locations:[{start:{line:11,column:4},end:{line:18,column:5}},{start:{line:11,column:4},end:{line:18,column:5}}],line:11},1:{loc:{start:{line:11,column:8},end:{line:11,column:40}},type:"binary-expr",locations:[{start:{line:11,column:8},end:{line:11,column:31}},{start:{line:11,column:35},end:{line:11,column:40}}],line:11},2:{loc:{start:{line:15,column:8},end:{line:17,column:9}},type:"if",locations:[{start:{line:15,column:8},end:{line:17,column:9}},{start:{line:15,column:8},end:{line:17,column:9}}],line:15},3:{loc:{start:{line:39,column:8},end:{line:44,column:9}},type:"if",locations:[{start:{line:39,column:8},end:{line:44,column:9}},{start:{line:39,column:8},end:{line:44,column:9}}],line:39},4:{loc:{start:{line:55,column:30},end:{line:55,column:70}},type:"cond-expr",locations:[{start:{line:55,column:64},end:{line:55,column:66}},{start:{line:55,column:69},end:{line:55,column:70}}],line:55},5:{loc:{start:{line:61,column:15},end:{line:61,column:74}},type:"binary-expr",locations:[{start:{line:61,column:15},end:{line:61,column:34}},{start:{line:61,column:38},end:{line:61,column:57}},{start:{line:61,column:61},end:{line:61,column:74}}],line:61}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0,0]},inputSourceMap:{version:3,file:"/Users/bwakeford/Documents/personal/dntd-web/src/controllers/entryController.ts",sourceRoot:"",sources:["/Users/bwakeford/Documents/personal/dntd-web/src/controllers/entryController.ts"],names:[],mappings:";;AAAA,4CAAyC;AAEzC,wBAAoD;AAEpD,MAAM,UAAU,GAAG,iCAAiC,CAAA;AAEvC,QAAA,eAAe,GAAG;IAC3B,IAAI,EAAE,IAAI;IACV,MAAM,EAAE,MAAM;CACjB,CAAA;AAED,SAAS,IAAI,CAAC,KAAwB,EAAE,QAAgB,EAAE,OAAe,EAAE,IAAc,EAAE,KAAe;IACtG,IAAI,KAAK,CAAC,KAAK,KAAK,OAAO,IAAI,KAAK,EAAE;QAClC,KAAK,CAAC,KAAK,GAAG,OAAO,CAAA;QACrB,KAAK,CAAC,UAAU,GAAG,iBAAc,CAAC,KAAK,CAAC,KAAK,CAAC,KAAK,CAAC,CAAA;QACpD,KAAK,CAAC,IAAI,GAAG,OAAO,CAAC,KAAK,CAAC,UAAU,CAAC,CAAA;QACtC,IAAI,IAAI,EAAE;YACN,mBAAgB,CAAC,SAAS,CAAC,KAAK,CAAC,KAAK,CAAC,EAAE,EAAE,KAAK,CAAC,OAAO,CAAC,EAAE,EAAE,KAAK,CAAC,OAAO,CAAC,KAAK,EAAE,QAAQ,EAAE,OAAO,CAAC,CAAA;SACvG;KACJ;AACL,CAAC;AAED,SAAS,MAAM,CAAC,KAAyC,EAAE,OAAe;IACtE,KAAK,CAAC,GAAG,GAAG,OAAO,CAAA;IACnB,KAAK,CAAC,KAAK,GAAG,iBAAc,CAAC,KAAK,CAAC,OAAO,CAAC,CAAA;IAC3C,KAAK,CAAC,IAAI,GAAG,iBAAc,CAAC,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,CAAA;IAC7C,KAAK,CAAC,MAAM,GAAG,QAAQ,CAAC,KAAK,CAAC,KAAK,CAAC,CAAA;IACpC,KAAK,CAAC,UAAU,GAAG,aAAa,CAAC,KAAK,CAAC,IAAI,CAAC,CAAA;IAC5C,KAAK,CAAC,QAAQ,GAAG,MAAM,CAAC,KAAK,CAAC,IAAI,EAAE,KAAK,CAAC,UAAU,CAAC,CAAA;AACzD,CAAC;AAED,SAAS,MAAM,CAAC,IAAY,EAAE,UAAwD;IAClF,KAAK,IAAI,EAAE,GAAG,EAAE,KAAK,EAAE,IAAI,UAAU,EAAE;QACnC,IAAI,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,CAAA;QAC1B,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,KAAM,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,GAAG,CAAC,QAAQ,CAAC,CAAA;QACzD,IAAI,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,CAAA;KACxB;IACD,OAAO,IAAI,CAAA;AACf,CAAC;AAED,SAAS,OAAO,CAAC,UAAwD;IACrE,IAAI,IAAI,GAA0B,IAAI,GAAG,EAAE,CAAA;IAC3C,KAAK,IAAI,EAAE,GAAG,EAAE,IAAI,UAAU,EAAE;QAC5B,IAAI,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,KAAK,CAAC,EAAE;YACrB,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,KAAK,CAAE,CAAC,GAAG,IAAI,CAAC,CAAA;SAChC;aAAM;YACH,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,KAAK,EAAE,GAAG,CAAC,CAAA;SAC3B;KACJ;IACD,OAAO,IAAI,CAAA;AACf,CAAC;AAED,SAAS,aAAa,CAAC,IAAY;IAC/B,IAAI,UAAU,GAAG,EAAE,CAAA;IACnB,IAAI,WAAW,GAAG,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAA;IAC3C,KAAK,IAAI,KAAK,IAAI,WAAW,EAAE;QAC3B,IAAI,GAAG,GAAG,sBAAU,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC,CAAA;QAChF,UAAU,CAAC,IAAI,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,CAAA;KAC9C;IACD,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,KAAM,GAAG,CAAC,CAAC,KAAK,CAAC,KAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAA;IACrE,OAAO,UAAU,CAAA;AACrB,CAAC;AAED,SAAS,QAAQ,CAAC,IAAY;IAC1B,IAAI,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAA;IAC5B,OAAO,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC,EAAE;QACzB,OAAO,KAAK,KAAK,SAAS,IAAI,KAAK,CAAC,IAAI,EAAE,KAAK,EAAE,IAAI,KAAK,KAAK,GAAG,CAAA;IACtE,CAAC,CAAC,CAAA;AACN,CAAC",sourcesContent:['import { tagFactory } from "../factories"\nimport { JournalEntryModel, TagModel, BaseEntryModel } from "../models"\nimport { textController, syncerController } from "."\n\nconst tagPattern = /(\\@)([\\w-\']+)+(:)?([\\w-\'\\*]+)?/g\n\nexport const entryController = {\n    save: save,\n    update: update,\n}\n\nfunction save(entry: JournalEntryModel, entryIdx: number, content: string, sync?: boolean, force?: boolean) {\n    if (entry.saved !== content || force) {\n        entry.saved = content\n        entry.savedClean = textController.clean(entry.saved)\n        entry.tags = getTags(entry.tagMatches)\n        if (sync) {\n            syncerController.updateRow(entry.shelf.id, entry.journal.id, entry.journal.title, entryIdx, content)\n        }\n    }\n}\n\nfunction update(entry: BaseEntryModel | JournalEntryModel, content: string) {\n    entry.raw = content\n    entry.clean = textController.clean(content)\n    entry.safe = textController.escape(entry.raw)\n    entry.tokens = tokenize(entry.clean)\n    entry.tagMatches = getTagMatches(entry.safe)\n    entry.rendered = render(entry.safe, entry.tagMatches)\n}\n\nfunction render(text: string, tagMatches: { tag: TagModel, match: RegExpMatchArray }[]): string {\n    for (let { tag, match } of tagMatches) {\n        let chars = text.split("")\n        chars.splice(match.index!, match[0].length, tag.rendered)\n        text = chars.join("")\n    }\n    return text\n}\n\nfunction getTags(tagMatches: { tag: TagModel, match: RegExpMatchArray }[]): Map<string, TagModel> {\n    let tags: Map<string, TagModel> = new Map()\n    for (let { tag } of tagMatches) {\n        if (tags.has(tag.clean)) {\n            tags.get(tag.clean)!.frq += 1\n        } else {\n            tags.set(tag.clean, tag)\n        }\n    }\n    return tags\n}\n\nfunction getTagMatches(text: string): { tag: TagModel, match: RegExpMatchArray }[] {\n    let tagMatches = []\n    let matchesIter = text.matchAll(tagPattern)\n    for (let match of matchesIter) {\n        let tag = tagFactory.createTag(match[0], match[1], match[2], match[3], match[4])\n        tagMatches.push({ tag: tag, match: match })\n    }\n    tagMatches.sort((a, b) => (a.match.index! > b.match.index!) ? -1 : 1)\n    return tagMatches\n}\n\nfunction tokenize(text: string): string[] {\n    let tokens = text.split(" ")\n    return tokens.filter(token => {\n        return token !== undefined && token.trim() !== "" && token !== "-"\n    })\n}\n']},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},(i=t[r="__coverage__"]||(t[r]={}))[l]&&i[l].hash===o?i[l]:(c.hash=o,i[l]=c));s.s[0]++,Object.defineProperty(e,"__esModule",{value:!0});const u=(s.s[1]++,A(5)),a=(s.s[2]++,A(2)),C=(s.s[3]++,/(\@)([\w-']+)+(:)?([\w-'\*]+)?/g);s.s[4]++,e.entryController={save:function(n,e,A,l,o){s.f[0]++,s.s[5]++,s.b[1][0]++,n.saved!==A||(s.b[1][1]++,o)?(s.b[0][0]++,s.s[6]++,n.saved=A,s.s[7]++,n.savedClean=a.textController.clean(n.saved),s.s[8]++,n.tags=function(n){s.f[3]++;let e=(s.s[22]++,new Map);s.s[23]++;for(let{tag:A}of n)s.s[24]++,e.has(A.clean)?(s.b[3][0]++,s.s[25]++,e.get(A.clean).frq+=1):(s.b[3][1]++,s.s[26]++,e.set(A.clean,A));return s.s[27]++,e}(n.tagMatches),s.s[9]++,l?(s.b[2][0]++,s.s[10]++,a.syncerController.updateRow(n.shelf.id,n.journal.id,n.journal.title,e,A)):s.b[2][1]++):s.b[0][1]++},update:function(n,e){s.f[1]++,s.s[11]++,n.raw=e,s.s[12]++,n.clean=a.textController.clean(e),s.s[13]++,n.safe=a.textController.escape(n.raw),s.s[14]++,n.tokens=function(n){s.f[6]++;let e=(s.s[36]++,n.split(" "));return s.s[37]++,e.filter(n=>(s.f[7]++,s.s[38]++,s.b[5][0]++,void 0!==n&&(s.b[5][1]++,""!==n.trim())&&(s.b[5][2]++,"-"!==n)))}(n.clean),s.s[15]++,n.tagMatches=function(n){s.f[4]++;let e=(s.s[28]++,[]),A=(s.s[29]++,n.matchAll(C));s.s[30]++;for(let n of A){let A=(s.s[31]++,u.tagFactory.createTag(n[0],n[1],n[2],n[3],n[4]));s.s[32]++,e.push({tag:A,match:n})}return s.s[33]++,e.sort((n,e)=>(s.f[5]++,s.s[34]++,n.match.index>e.match.index?(s.b[4][0]++,-1):(s.b[4][1]++,1))),s.s[35]++,e}(n.safe),s.s[16]++,n.rendered=function(n,e){s.f[2]++,s.s[17]++;for(let{tag:A,match:l}of e){let e=(s.s[18]++,n.split(""));s.s[19]++,e.splice(l.index,l[0].length,A.rendered),s.s[20]++,n=e.join("")}return s.s[21]++,n}(n.safe,n.tagMatches)}}},function(n,e,A){"use strict";var l,o,t,r,c,i,s=(l="/Users/bwakeford/Documents/personal/dntd-web/src/models/SearchModel.ts",o="cd808b57bba69d817427df08e914c248fcb383e1",t=new(0,function(){}.constructor)("return this")(),c={path:"/Users/bwakeford/Documents/personal/dntd-web/src/models/SearchModel.ts",statementMap:{0:{start:{line:2,column:0},end:{line:2,column:62}},1:{start:{line:3,column:16},end:{line:3,column:35}},2:{start:{line:4,column:20},end:{line:4,column:43}},3:{start:{line:7,column:8},end:{line:7,column:50}},4:{start:{line:8,column:8},end:{line:8,column:39}},5:{start:{line:9,column:8},end:{line:9,column:40}},6:{start:{line:10,column:8},end:{line:10,column:67}},7:{start:{line:11,column:8},end:{line:11,column:88}},8:{start:{line:14,column:8},end:{line:19,column:21}},9:{start:{line:22,column:0},end:{line:22,column:34}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:4},end:{line:6,column:5}},loc:{start:{line:6,column:18},end:{line:12,column:5}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:13,column:4},end:{line:13,column:5}},loc:{start:{line:13,column:16},end:{line:20,column:5}},line:13}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0},f:{0:0,1:0},b:{},inputSourceMap:{version:3,file:"/Users/bwakeford/Documents/personal/dntd-web/src/models/SearchModel.ts",sourceRoot:"",sources:["/Users/bwakeford/Documents/personal/dntd-web/src/models/SearchModel.ts"],names:[],mappings:";;AAAA,oCAAqC;AACrC,4CAA2C;AAG3C,MAAa,WAAW;IAWpB;QAVO,eAAU,GAAe,kBAAU,CAAC,IAAI,CAAA;QACxC,kBAAa,GAA0B,IAAI,GAAG,EAAE,CAAA;QAChD,mBAAc,GAA4B,IAAI,GAAG,EAAE,CAAA;QACnD,aAAQ,GAAmB,wBAAY,CAAC,eAAe,EAAE,CAAA;QACzD,iBAAY,GAIf,EAAE,IAAI,EAAE,IAAI,GAAG,EAAE,EAAE,IAAI,EAAE,IAAI,GAAG,EAAE,EAAE,UAAU,EAAE,IAAI,GAAG,EAAE,EAAE,CAAA;IAE/C,CAAC;IAEjB,IAAI,KAAK;QACL,OAAO,wBAAY,CAAC,eAAe,CAAC;YAChC,IAAI,CAAC,QAAQ,CAAC,GAAG;YACjB,GAAG,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC;YAC9C,GAAG,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC;YAC5C,GAAG,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,IAAI,EAAE,CAAC;SACrD,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAA;IAChB,CAAC;CAEJ;AAtBD,kCAsBC",sourcesContent:['import { SearchType } from "../types"\nimport { entryFactory } from "../factories"\nimport { TagModel, BaseEntryModel } from "."\n\nexport class SearchModel {\n    public searchType: SearchType = SearchType.NONE\n    public simpleRefines: Map<string, TagModel> = new Map()\n    public complexRefines: Map<string, TagModel[]> = new Map()\n    public barQuery: BaseEntryModel = entryFactory.createBaseEntry()\n    public refinesQuery: {\n        keys: Set<string>,\n        vals: Map<string, TagModel>,\n        simpleKeys: Map<string, TagModel>\n    } = { keys: new Set(), vals: new Map(), simpleKeys: new Map() }\n\n    constructor() { }\n\n    get query(): BaseEntryModel {\n        return entryFactory.createBaseEntry([\n            this.barQuery.raw,\n            ...Array.from(this.refinesQuery.keys.values()),\n            ...Array.from(this.refinesQuery.vals.keys()),\n            ...Array.from(this.refinesQuery.simpleKeys.keys())\n        ].join(" "))\n    }\n\n}\n']},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},(i=t[r="__coverage__"]||(t[r]={}))[l]&&i[l].hash===o?i[l]:(c.hash=o,i[l]=c));s.s[0]++,Object.defineProperty(e,"__esModule",{value:!0});const u=(s.s[1]++,A(1)),a=(s.s[2]++,A(5));s.s[9]++,e.SearchModel=class{constructor(){s.f[0]++,s.s[3]++,this.searchType=u.SearchType.NONE,s.s[4]++,this.simpleRefines=new Map,s.s[5]++,this.complexRefines=new Map,s.s[6]++,this.barQuery=a.entryFactory.createBaseEntry(),s.s[7]++,this.refinesQuery={keys:new Set,vals:new Map,simpleKeys:new Map}}get query(){return s.f[1]++,s.s[8]++,a.entryFactory.createBaseEntry([this.barQuery.raw,...Array.from(this.refinesQuery.keys.values()),...Array.from(this.refinesQuery.vals.keys()),...Array.from(this.refinesQuery.simpleKeys.keys())].join(" "))}}},function(n,e,A){"use strict";var l,o,t,r,c,i,s=(l="/Users/bwakeford/Documents/personal/dntd-web/src/controllers/journalController.ts",o="1aa1b711743716a3420130e4247894702c392e25",t=new(0,function(){}.constructor)("return this")(),c={path:"/Users/bwakeford/Documents/personal/dntd-web/src/controllers/journalController.ts",statementMap:{0:{start:{line:2,column:22},end:{line:4,column:1}},1:{start:{line:3,column:4},end:{line:3,column:62}},2:{start:{line:5,column:0},end:{line:5,column:62}},3:{start:{line:6,column:18},end:{line:6,column:53}},4:{start:{line:7,column:12},end:{line:7,column:25}},5:{start:{line:8,column:17},end:{line:8,column:37}},6:{start:{line:9,column:20},end:{line:9,column:43}},7:{start:{line:10,column:11},end:{line:10,column:23}},8:{start:{line:11,column:0},end:{line:17,column:2}},9:{start:{line:19,column:4},end:{line:27,column:7}},10:{start:{line:20,column:8},end:{line:21,column:19}},11:{start:{line:21,column:12},end:{line:21,column:19}},12:{start:{line:22,column:8},end:{line:26,column:11}},13:{start:{line:23,column:12},end:{line:25,column:13}},14:{start:{line:24,column:16},end:{line:24,column:39}},15:{start:{line:30,column:4},end:{line:31,column:15}},16:{start:{line:31,column:8},end:{line:31,column:15}},17:{start:{line:32,column:4},end:{line:32,column:25}},18:{start:{line:33,column:4},end:{line:33,column:27}},19:{start:{line:36,column:4},end:{line:37,column:15}},20:{start:{line:37,column:8},end:{line:37,column:15}},21:{start:{line:38,column:4},end:{line:38,column:33}},22:{start:{line:39,column:4},end:{line:49,column:7}},23:{start:{line:41,column:8},end:{line:41,column:87}},24:{start:{line:41,column:47},end:{line:41,column:85}},25:{start:{line:42,column:8},end:{line:42,column:30}},26:{start:{line:45,column:8},end:{line:45,column:75}},27:{start:{line:48,column:8},end:{line:48,column:35}},28:{start:{line:52,column:16},end:{line:52,column:92}},29:{start:{line:53,column:4},end:{line:53,column:55}},30:{start:{line:54,column:4},end:{line:54,column:33}},31:{start:{line:55,column:4},end:{line:55,column:23}},32:{start:{line:58,column:4},end:{line:58,column:29}},33:{start:{line:59,column:4},end:{line:59,column:23}},34:{start:{line:62,column:4},end:{line:63,column:15}},35:{start:{line:63,column:8},end:{line:63,column:15}},36:{start:{line:64,column:4},end:{line:64,column:38}},37:{start:{line:65,column:4},end:{line:65,column:23}},38:{start:{line:68,column:15},end:{line:68,column:24}},39:{start:{line:69,column:18},end:{line:69,column:54}},40:{start:{line:70,column:4},end:{line:79,column:5}},41:{start:{line:71,column:8},end:{line:78,column:9}},42:{start:{line:72,column:12},end:{line:77,column:13}},43:{start:{line:73,column:16},end:{line:73,column:45}},44:{start:{line:76,column:16},end:{line:76,column:116}},45:{start:{line:80,column:4},end:{line:80,column:24}},46:{start:{line:81,column:4},end:{line:81,column:46}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:2,column:56},end:{line:2,column:57}},loc:{start:{line:2,column:71},end:{line:4,column:1}},line:2},1:{name:"unloadOtherJournals",decl:{start:{line:18,column:9},end:{line:18,column:28}},loc:{start:{line:18,column:42},end:{line:28,column:1}},line:18},2:{name:"(anonymous_2)",decl:{start:{line:19,column:37},end:{line:19,column:38}},loc:{start:{line:19,column:46},end:{line:27,column:5}},line:19},3:{name:"(anonymous_3)",decl:{start:{line:22,column:31},end:{line:22,column:32}},loc:{start:{line:22,column:42},end:{line:26,column:9}},line:22},4:{name:"unloadEntries",decl:{start:{line:29,column:9},end:{line:29,column:22}},loc:{start:{line:29,column:32},end:{line:34,column:1}},line:29},5:{name:"loadEntries",decl:{start:{line:35,column:9},end:{line:35,column:20}},loc:{start:{line:35,column:30},end:{line:50,column:1}},line:35},6:{name:"(anonymous_6)",decl:{start:{line:40,column:14},end:{line:40,column:15}},loc:{start:{line:40,column:25},end:{line:43,column:5}},line:40},7:{name:"(anonymous_7)",decl:{start:{line:41,column:29},end:{line:41,column:30}},loc:{start:{line:41,column:47},end:{line:41,column:85}},line:41},8:{name:"(anonymous_8)",decl:{start:{line:44,column:15},end:{line:44,column:16}},loc:{start:{line:44,column:26},end:{line:46,column:5}},line:44},9:{name:"(anonymous_9)",decl:{start:{line:47,column:17},end:{line:47,column:18}},loc:{start:{line:47,column:23},end:{line:49,column:5}},line:47},10:{name:"addEntry",decl:{start:{line:51,column:9},end:{line:51,column:17}},loc:{start:{line:51,column:47},end:{line:56,column:1}},line:51},11:{name:"deleteEntry",decl:{start:{line:57,column:9},end:{line:57,column:20}},loc:{start:{line:57,column:35},end:{line:60,column:1}},line:57},12:{name:"moveEntry",decl:{start:{line:61,column:9},end:{line:61,column:18}},loc:{start:{line:61,column:44},end:{line:66,column:1}},line:61},13:{name:"buildTags",decl:{start:{line:67,column:9},end:{line:67,column:18}},loc:{start:{line:67,column:28},end:{line:82,column:1}},line:67}},branchMap:{0:{loc:{start:{line:2,column:22},end:{line:4,column:1}},type:"binary-expr",locations:[{start:{line:2,column:23},end:{line:2,column:27}},{start:{line:2,column:31},end:{line:2,column:51}},{start:{line:2,column:56},end:{line:4,column:1}}],line:2},1:{loc:{start:{line:3,column:11},end:{line:3,column:61}},type:"cond-expr",locations:[{start:{line:3,column:37},end:{line:3,column:40}},{start:{line:3,column:43},end:{line:3,column:61}}],line:3},2:{loc:{start:{line:3,column:12},end:{line:3,column:33}},type:"binary-expr",locations:[{start:{line:3,column:12},end:{line:3,column:15}},{start:{line:3,column:19},end:{line:3,column:33}}],line:3},3:{loc:{start:{line:20,column:8},end:{line:21,column:19}},type:"if",locations:[{start:{line:20,column:8},end:{line:21,column:19}},{start:{line:20,column:8},end:{line:21,column:19}}],line:20},4:{loc:{start:{line:23,column:12},end:{line:25,column:13}},type:"if",locations:[{start:{line:23,column:12},end:{line:25,column:13}},{start:{line:23,column:12},end:{line:25,column:13}}],line:23},5:{loc:{start:{line:23,column:16},end:{line:23,column:90}},type:"binary-expr",locations:[{start:{line:23,column:16},end:{line:23,column:57}},{start:{line:23,column:61},end:{line:23,column:90}}],line:23},6:{loc:{start:{line:30,column:4},end:{line:31,column:15}},type:"if",locations:[{start:{line:30,column:4},end:{line:31,column:15}},{start:{line:30,column:4},end:{line:31,column:15}}],line:30},7:{loc:{start:{line:36,column:4},end:{line:37,column:15}},type:"if",locations:[{start:{line:36,column:4},end:{line:37,column:15}},{start:{line:36,column:4},end:{line:37,column:15}}],line:36},8:{loc:{start:{line:62,column:4},end:{line:63,column:15}},type:"if",locations:[{start:{line:62,column:4},end:{line:63,column:15}},{start:{line:62,column:4},end:{line:63,column:15}}],line:62},9:{loc:{start:{line:72,column:12},end:{line:77,column:13}},type:"if",locations:[{start:{line:72,column:12},end:{line:77,column:13}},{start:{line:72,column:12},end:{line:77,column:13}}],line:72}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},b:{0:[0,0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0]},inputSourceMap:{version:3,file:"/Users/bwakeford/Documents/personal/dntd-web/src/controllers/journalController.ts",sourceRoot:"",sources:["/Users/bwakeford/Documents/personal/dntd-web/src/controllers/journalController.ts"],names:[],mappings:"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",sourcesContent:['import m from "mithril"\nimport { libraryModel } from ".."\nimport { ErrorPayload } from "../types"\nimport { FriendlyError } from "../errors"\nimport { JournalModel, TagModel } from "../models"\nimport { tagFactory, entryFactory } from "../factories"\nimport { syncerController, searchController, entryController } from "."\n\nexport const journalController = {\n    addEntry: addEntry,\n    moveEntry: moveEntry,\n    buildTags: buildTags,\n    deleteEntry: deleteEntry,\n    loadEntries: loadEntries,\n}\n\nfunction unloadOtherJournals(keepJournal: JournalModel) {\n    libraryModel.shelves.forEach(shelf => {\n        if (shelf === undefined) return\n        shelf.journals.forEach(journal => {\n            if (keepJournal.shelf.id !== journal.shelf.id || keepJournal.id !== journal.id) {\n                unloadEntries(journal)\n            }\n        })\n    })\n}\n\nfunction unloadEntries(journal: JournalModel | undefined) {\n    if (journal === undefined) return\n    journal.entries = []\n    journal.loaded = false\n}\n\nfunction loadEntries(journal: JournalModel | undefined) {\n    if (journal === undefined) return\n    unloadOtherJournals(journal)\n    syncerController.getRows(journal.shelf.id, journal.id, journal.title)\n        .then(payload => {\n            payload.rows.forEach((content, idx) => addEntry(journal, idx, content, false))\n            journal.loaded = true\n        })\n        .catch((error: ErrorPayload) => {\n            new FriendlyError(error.error.message, error.friendlyMsg)\n        })\n        .finally(() => {\n            m.redraw()\n        })\n}\n\nfunction addEntry(journal: JournalModel, idx: number, content: string, sync?: boolean) {\n    let entry = entryFactory.createJournalEntry(journal.shelf, journal, content)\n    entryController.save(entry, idx, content, sync)\n    journal.addEntry(idx, entry)\n    buildTags(journal)\n}\n\nfunction deleteEntry(journal: JournalModel, idx: number) {\n    journal.deleteEntry(idx)\n    buildTags(journal)\n}\n\nfunction moveEntry(journal: JournalModel, fromIdx: number, toIdx: number) {\n    if (fromIdx === toIdx) return\n    journal.moveEntry(fromIdx, toIdx)\n    buildTags(journal)\n}\n\nfunction buildTags(journal: JournalModel) {\n    let tags: Map<string, TagModel> = new Map()\n    let entries = Array.from(journal.entries.values())\n    for (let { entry } of entries.reverse()) {\n        for (let [key, tag] of entry.tags) {\n            if (tags.has(key)) {\n                tags.get(key)!.frq += tag.frq\n            } else {\n                tags.set(key, tagFactory.createTag(tag.raw, tag.flag, tag.key, tag.separator, tag.val))\n            }\n        }\n    }\n    journal.tags = tags\n    searchController.buildRefines(journal)\n}\n']},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},(i=t[r="__coverage__"]||(t[r]={}))[l]&&i[l].hash===o?i[l]:(c.hash=o,i[l]=c)),u=(s.s[0]++,s.b[0][0]++,this&&(s.b[0][1]++,this.__importDefault)||(s.b[0][2]++,function(n){return s.f[0]++,s.s[1]++,s.b[2][0]++,n&&(s.b[2][1]++,n.__esModule)?(s.b[1][0]++,n):(s.b[1][1]++,{default:n})}));s.s[2]++,Object.defineProperty(e,"__esModule",{value:!0});const a=(s.s[3]++,u(A(0))),C=(s.s[4]++,A(3)),m=(s.s[5]++,A(9)),d=(s.s[6]++,A(5)),f=(s.s[7]++,A(2));function E(n,e,A,l){s.f[10]++;let o=(s.s[28]++,d.entryFactory.createJournalEntry(n.shelf,n,A));s.s[29]++,f.entryController.save(o,e,A,l),s.s[30]++,n.addEntry(e,o),s.s[31]++,p(n)}function p(n){s.f[13]++;let e=(s.s[38]++,new Map),A=(s.s[39]++,Array.from(n.entries.values()));s.s[40]++;for(let{entry:n}of A.reverse()){s.s[41]++;for(let[A,l]of n.tags)s.s[42]++,e.has(A)?(s.b[9][0]++,s.s[43]++,e.get(A).frq+=l.frq):(s.b[9][1]++,s.s[44]++,e.set(A,d.tagFactory.createTag(l.raw,l.flag,l.key,l.separator,l.val)))}s.s[45]++,n.tags=e,s.s[46]++,f.searchController.buildRefines(n)}s.s[8]++,e.journalController={addEntry:E,moveEntry:function(n,e,A){if(s.f[12]++,s.s[34]++,e===A)return s.b[8][0]++,void s.s[35]++;s.b[8][1]++;s.s[36]++,n.moveEntry(e,A),s.s[37]++,p(n)},buildTags:p,deleteEntry:function(n,e){s.f[11]++,s.s[32]++,n.deleteEntry(e),s.s[33]++,p(n)},loadEntries:function(n){if(s.f[5]++,s.s[19]++,void 0===n)return s.b[7][0]++,void s.s[20]++;s.b[7][1]++;s.s[21]++,e=n,s.f[1]++,s.s[9]++,C.libraryModel.shelves.forEach(n=>{if(s.f[2]++,s.s[10]++,void 0===n)return s.b[3][0]++,void s.s[11]++;s.b[3][1]++,s.s[12]++,n.journals.forEach(n=>{s.f[3]++,s.s[13]++,s.b[5][0]++,e.shelf.id!==n.shelf.id||(s.b[5][1]++,e.id!==n.id)?(s.b[4][0]++,s.s[14]++,function(n){if(s.f[4]++,s.s[15]++,void 0===n)return s.b[6][0]++,void s.s[16]++;s.b[6][1]++,s.s[17]++,n.entries=[],s.s[18]++,n.loaded=!1}(n)):s.b[4][1]++})}),s.s[22]++,f.syncerController.getRows(n.shelf.id,n.id,n.title).then(e=>{s.f[6]++,s.s[23]++,e.rows.forEach((e,A)=>(s.f[7]++,s.s[24]++,E(n,A,e,!1))),s.s[25]++,n.loaded=!0}).catch(n=>{s.f[8]++,s.s[26]++,new m.FriendlyError(n.error.message,n.friendlyMsg)}).finally(()=>{s.f[9]++,s.s[27]++,a.default.redraw()});var e}}},,,function(n,e,A){"use strict";var l,o,t,r,c,i,s=(l="/Users/bwakeford/Documents/personal/dntd-web/src/views/index.ts",o="cf7a9154bed99a61f60460739b6279675a760a23",t=new(0,function(){}.constructor)("return this")(),c={path:"/Users/bwakeford/Documents/personal/dntd-web/src/views/index.ts",statementMap:{0:{start:{line:3,column:4},end:{line:3,column:71}},1:{start:{line:3,column:21},end:{line:3,column:71}},2:{start:{line:3,column:53},end:{line:3,column:71}},3:{start:{line:5,column:0},end:{line:5,column:62}},4:{start:{line:6,column:0},end:{line:6,column:33}},5:{start:{line:7,column:0},end:{line:7,column:34}},6:{start:{line:8,column:0},end:{line:8,column:35}},7:{start:{line:9,column:0},end:{line:9,column:35}}},fnMap:{0:{name:"__export",decl:{start:{line:2,column:9},end:{line:2,column:17}},loc:{start:{line:2,column:21},end:{line:4,column:1}},line:2}},branchMap:{0:{loc:{start:{line:3,column:21},end:{line:3,column:71}},type:"if",locations:[{start:{line:3,column:21},end:{line:3,column:71}},{start:{line:3,column:21},end:{line:3,column:71}}],line:3}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:"/Users/bwakeford/Documents/personal/dntd-web/src/views/index.ts",sourceRoot:"",sources:["/Users/bwakeford/Documents/personal/dntd-web/src/views/index.ts"],names:[],mappings:";;;;;AAAA,iCAA2B;AAC3B,kCAA4B;AAC5B,mCAA6B;AAC7B,mCAA6B",sourcesContent:['export * from "./shelfView"\r\nexport * from "./signinView"\r\nexport * from "./libraryView"\r\nexport * from "./journalView"\r\n']},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},(i=t[r="__coverage__"]||(t[r]={}))[l]&&i[l].hash===o?i[l]:(c.hash=o,i[l]=c));function u(n){for(var A in s.f[0]++,s.s[0]++,n)s.s[1]++,e.hasOwnProperty(A)?s.b[0][1]++:(s.b[0][0]++,s.s[2]++,e[A]=n[A])}s.s[3]++,Object.defineProperty(e,"__esModule",{value:!0}),s.s[4]++,u(A(21)),s.s[5]++,u(A(53)),s.s[6]++,u(A(54)),s.s[7]++,u(A(55))},function(n,e,A){"use strict";var l,o,t,r,c,i,s=(l="/Users/bwakeford/Documents/personal/dntd-web/src/views/shelfView.ts",o="4e3359c4211c63a0a19fab9d9d3da5c0e1c3a01c",t=new(0,function(){}.constructor)("return this")(),c={path:"/Users/bwakeford/Documents/personal/dntd-web/src/views/shelfView.ts",statementMap:{0:{start:{line:2,column:22},end:{line:4,column:1}},1:{start:{line:3,column:4},end:{line:3,column:62}},2:{start:{line:5,column:0},end:{line:5,column:62}},3:{start:{line:6,column:18},end:{line:6,column:53}},4:{start:{line:7,column:21},end:{line:7,column:45}},5:{start:{line:10,column:8},end:{line:15,column:11}},6:{start:{line:17,column:4},end:{line:19,column:6}},7:{start:{line:21,column:0},end:{line:21,column:30}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:2,column:56},end:{line:2,column:57}},loc:{start:{line:2,column:71},end:{line:4,column:1}},line:2},1:{name:"shelfView",decl:{start:{line:8,column:9},end:{line:8,column:18}},loc:{start:{line:8,column:21},end:{line:20,column:1}},line:8},2:{name:"view",decl:{start:{line:9,column:13},end:{line:9,column:17}},loc:{start:{line:9,column:20},end:{line:16,column:5}},line:9}},branchMap:{0:{loc:{start:{line:2,column:22},end:{line:4,column:1}},type:"binary-expr",locations:[{start:{line:2,column:23},end:{line:2,column:27}},{start:{line:2,column:31},end:{line:2,column:51}},{start:{line:2,column:56},end:{line:4,column:1}}],line:2},1:{loc:{start:{line:3,column:11},end:{line:3,column:61}},type:"cond-expr",locations:[{start:{line:3,column:37},end:{line:3,column:40}},{start:{line:3,column:43},end:{line:3,column:61}}],line:3},2:{loc:{start:{line:3,column:12},end:{line:3,column:33}},type:"binary-expr",locations:[{start:{line:3,column:12},end:{line:3,column:15}},{start:{line:3,column:19},end:{line:3,column:33}}],line:3}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},f:{0:0,1:0,2:0},b:{0:[0,0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:"/Users/bwakeford/Documents/personal/dntd-web/src/views/shelfView.ts",sourceRoot:"",sources:["/Users/bwakeford/Documents/personal/dntd-web/src/views/shelfView.ts"],names:[],mappings:";;;;;AAAA,sDAAuB;AACvB,8CAA2G;AAE3G,SAAgB,SAAS;IAErB,SAAS,IAAI;QACT,OAAO,iBAAC,CAAC,QAAQ,EAAE;YACf,iBAAC,CAAC,4BAAe,CAAC;YAClB,iBAAC,CAAC,+BAAkB,CAAC;YACrB,iBAAC,CAAC,gCAAmB,CAAC;YACtB,iBAAC,CAAC,8BAAiB,CAAC;SACvB,CAAC,CAAA;IACN,CAAC;IAED,OAAO;QACH,IAAI,EAAE,IAAI;KACb,CAAA;AAEL,CAAC;AAfD,8BAeC",sourcesContent:['import m from "mithril"\nimport { googleComponent, journalsComponent, syncStateComponent, breadcrumbComponent } from "../components"\n\nexport function shelfView() {\n\n    function view() {\n        return m("#shelf", [\n            m(googleComponent),\n            m(syncStateComponent),\n            m(breadcrumbComponent),\n            m(journalsComponent),\n        ])\n    }\n\n    return {\n        view: view\n    }\n\n}']},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},(i=t[r="__coverage__"]||(t[r]={}))[l]&&i[l].hash===o?i[l]:(c.hash=o,i[l]=c)),u=(s.s[0]++,s.b[0][0]++,this&&(s.b[0][1]++,this.__importDefault)||(s.b[0][2]++,function(n){return s.f[0]++,s.s[1]++,s.b[2][0]++,n&&(s.b[2][1]++,n.__esModule)?(s.b[1][0]++,n):(s.b[1][1]++,{default:n})}));s.s[2]++,Object.defineProperty(e,"__esModule",{value:!0});const a=(s.s[3]++,u(A(0))),C=(s.s[4]++,A(7));s.s[7]++,e.shelfView=function(){return s.f[1]++,s.s[6]++,{view:function(){return s.f[2]++,s.s[5]++,a.default("#shelf",[a.default(C.googleComponent),a.default(C.syncStateComponent),a.default(C.breadcrumbComponent),a.default(C.journalsComponent)])}}}},function(n,e,A){"use strict";var l,o,t,r,c,i,s=(l="/Users/bwakeford/Documents/personal/dntd-web/src/components/googleComponent.ts",o="9e624f2cd1800fbee80edbfdc8a4cd7d46ce3ab1",t=new(0,function(){}.constructor)("return this")(),c={path:"/Users/bwakeford/Documents/personal/dntd-web/src/components/googleComponent.ts",statementMap:{0:{start:{line:2,column:22},end:{line:4,column:1}},1:{start:{line:3,column:4},end:{line:3,column:62}},2:{start:{line:5,column:0},end:{line:5,column:62}},3:{start:{line:6,column:18},end:{line:6,column:53}},4:{start:{line:7,column:12},end:{line:7,column:25}},5:{start:{line:8,column:22},end:{line:8,column:47}},6:{start:{line:11,column:8},end:{line:15,column:11}},7:{start:{line:18,column:8},end:{line:27,column:10}},8:{start:{line:23,column:16},end:{line:25,column:17}},9:{start:{line:24,column:20},end:{line:24,column:62}},10:{start:{line:30,column:8},end:{line:32,column:134}},11:{start:{line:31,column:59},end:{line:31,column:99}},12:{start:{line:32,column:59},end:{line:32,column:98}},13:{start:{line:35,column:8},end:{line:37,column:19}},14:{start:{line:39,column:4},end:{line:39,column:26}},15:{start:{line:41,column:0},end:{line:41,column:42}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:2,column:56},end:{line:2,column:57}},loc:{start:{line:2,column:71},end:{line:4,column:1}},line:2},1:{name:"googleComponent",decl:{start:{line:9,column:9},end:{line:9,column:24}},loc:{start:{line:9,column:27},end:{line:40,column:1}},line:9},2:{name:"view",decl:{start:{line:10,column:13},end:{line:10,column:17}},loc:{start:{line:10,column:20},end:{line:16,column:5}},line:10},3:{name:"gapiScriptSettings",decl:{start:{line:17,column:13},end:{line:17,column:31}},loc:{start:{line:17,column:34},end:{line:28,column:5}},line:17},4:{name:"(anonymous_4)",decl:{start:{line:22,column:20},end:{line:22,column:21}},loc:{start:{line:22,column:26},end:{line:26,column:13}},line:22},5:{name:"signInOutButton",decl:{start:{line:29,column:13},end:{line:29,column:28}},loc:{start:{line:29,column:31},end:{line:33,column:5}},line:29},6:{name:"(anonymous_6)",decl:{start:{line:31,column:53},end:{line:31,column:54}},loc:{start:{line:31,column:59},end:{line:31,column:99}},line:31},7:{name:"(anonymous_7)",decl:{start:{line:32,column:53},end:{line:32,column:54}},loc:{start:{line:32,column:59},end:{line:32,column:98}},line:32},8:{name:"preambleMessage",decl:{start:{line:34,column:13},end:{line:34,column:28}},loc:{start:{line:34,column:31},end:{line:38,column:5}},line:34}},branchMap:{0:{loc:{start:{line:2,column:22},end:{line:4,column:1}},type:"binary-expr",locations:[{start:{line:2,column:23},end:{line:2,column:27}},{start:{line:2,column:31},end:{line:2,column:51}},{start:{line:2,column:56},end:{line:4,column:1}}],line:2},1:{loc:{start:{line:3,column:11},end:{line:3,column:61}},type:"cond-expr",locations:[{start:{line:3,column:37},end:{line:3,column:40}},{start:{line:3,column:43},end:{line:3,column:61}}],line:3},2:{loc:{start:{line:3,column:12},end:{line:3,column:33}},type:"binary-expr",locations:[{start:{line:3,column:12},end:{line:3,column:15}},{start:{line:3,column:19},end:{line:3,column:33}}],line:3},3:{loc:{start:{line:23,column:16},end:{line:25,column:17}},type:"if",locations:[{start:{line:23,column:16},end:{line:25,column:17}},{start:{line:23,column:16},end:{line:25,column:17}}],line:23},4:{loc:{start:{line:30,column:15},end:{line:32,column:133}},type:"cond-expr",locations:[{start:{line:31,column:14},end:{line:31,column:135}},{start:{line:32,column:14},end:{line:32,column:133}}],line:30},5:{loc:{start:{line:35,column:15},end:{line:37,column:18}},type:"cond-expr",locations:[{start:{line:36,column:14},end:{line:36,column:60}},{start:{line:37,column:14},end:{line:37,column:18}}],line:35},6:{loc:{start:{line:35,column:16},end:{line:35,column:87}},type:"binary-expr",locations:[{start:{line:35,column:16},end:{line:35,column:56}},{start:{line:35,column:60},end:{line:35,column:87}}],line:35}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},b:{0:[0,0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0]},inputSourceMap:{version:3,file:"/Users/bwakeford/Documents/personal/dntd-web/src/components/googleComponent.ts",sourceRoot:"",sources:["/Users/bwakeford/Documents/personal/dntd-web/src/components/googleComponent.ts"],names:[],mappings:";;;;;AAAA,sDAAuB;AACvB,0BAAgC;AAChC,gDAAiD;AAEjD,SAAgB,eAAe;IAE3B,SAAS,IAAI;QACT,OAAO,iBAAC,CAAC,YAAY,EAAE;YACnB,eAAe,EAAE;YACjB,eAAe,EAAE;YACjB,iBAAC,CAAC,QAAQ,EAAE,kBAAkB,EAAE,CAAC;SACpC,CAAC,CAAA;IACN,CAAC;IAED,SAAS,kBAAkB;QACvB,OAAO;YACH,KAAK,EAAE,IAAI;YACX,KAAK,EAAE,IAAI;YACX,GAAG,EAAE,eAAW,CAAC,GAAG;YACpB,MAAM,EAAE,GAAG,EAAE;gBACT,IAAI,CAAC,eAAW,CAAC,UAAU,EAAE;oBACzB,8BAAgB,CAAC,QAAQ,EAAE,CAAA;iBAC9B;YACL,CAAC;SACJ,CAAA;IACL,CAAC;IAED,SAAS,eAAe;QACpB,OAAO,CAAC,eAAW,CAAC,UAAU,CAAC;YAC3B,CAAC,CAAC,iBAAC,CAAC,QAAQ,EAAE,EAAE,OAAO,EAAE,GAAG,EAAE,CAAC,8BAAgB,CAAC,OAAO,EAAE,EAAE,KAAK,EAAE,YAAY,EAAE,EAAE,UAAU,CAAC;YAC7F,CAAC,CAAC,iBAAC,CAAC,QAAQ,EAAE,EAAE,OAAO,EAAE,GAAG,EAAE,CAAC,8BAAgB,CAAC,MAAM,EAAE,EAAE,KAAK,EAAE,YAAY,EAAE,EAAE,SAAS,CAAC,CAAA;IACnG,CAAC;IAED,SAAS,eAAe;QACpB,OAAO,CAAC,eAAW,CAAC,UAAU,KAAK,SAAS,IAAI,CAAC,eAAW,CAAC,UAAU,CAAC;YACpE,CAAC,CAAC,iBAAC,CAAC,WAAW,EAAE,cAAc,CAAC;YAChC,CAAC,CAAC,IAAI,CAAA;IACd,CAAC;IAED,OAAO,EAAE,IAAI,EAAE,IAAI,EAAE,CAAA;AACzB,CAAC;AApCD,0CAoCC",sourcesContent:['import m from "mithril"\nimport { googleModel } from ".."\nimport { googleController } from "../controllers"\n\nexport function googleComponent() {\n\n    function view() {\n        return m("#googleApi", [\n            preambleMessage(),\n            signInOutButton(),\n            m("script", gapiScriptSettings()),\n        ])\n    }\n\n    function gapiScriptSettings() {\n        return {\n            async: true,\n            defer: true,\n            src: googleModel.src,\n            onload: () => {\n                if (!googleModel.isSignedIn) {\n                    googleController.initGapi()\n                }\n            }\n        }\n    }\n\n    function signInOutButton() {\n        return (googleModel.isSignedIn)\n            ? m("button", { onclick: () => googleController.signOut(), class: "authButton" }, "Sign Out")\n            : m("button", { onclick: () => googleController.signIn(), class: "authButton" }, "Sign In")\n    }\n\n    function preambleMessage() {\n        return (googleModel.isSignedIn !== undefined && !googleModel.isSignedIn)\n            ? m(".preamble", "PREAMBLE MSG") // TODO: fill out\n            : null\n    }\n\n    return { view: view }\n}\n']},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},(i=t[r="__coverage__"]||(t[r]={}))[l]&&i[l].hash===o?i[l]:(c.hash=o,i[l]=c)),u=(s.s[0]++,s.b[0][0]++,this&&(s.b[0][1]++,this.__importDefault)||(s.b[0][2]++,function(n){return s.f[0]++,s.s[1]++,s.b[2][0]++,n&&(s.b[2][1]++,n.__esModule)?(s.b[1][0]++,n):(s.b[1][1]++,{default:n})}));s.s[2]++,Object.defineProperty(e,"__esModule",{value:!0});const a=(s.s[3]++,u(A(0))),C=(s.s[4]++,A(3)),m=(s.s[5]++,A(2));s.s[15]++,e.googleComponent=function(){function n(){return s.f[3]++,s.s[7]++,{async:!0,defer:!0,src:C.googleModel.src,onload:()=>{s.f[4]++,s.s[8]++,C.googleModel.isSignedIn?s.b[3][1]++:(s.b[3][0]++,s.s[9]++,m.googleController.initGapi())}}}function e(){return s.f[5]++,s.s[10]++,C.googleModel.isSignedIn?(s.b[4][0]++,a.default("button",{onclick:()=>(s.f[6]++,s.s[11]++,m.googleController.signOut()),class:"authButton"},"Sign Out")):(s.b[4][1]++,a.default("button",{onclick:()=>(s.f[7]++,s.s[12]++,m.googleController.signIn()),class:"authButton"},"Sign In"))}function A(){return s.f[8]++,s.s[13]++,s.b[6][0]++,void 0===C.googleModel.isSignedIn||(s.b[6][1]++,C.googleModel.isSignedIn)?(s.b[5][1]++,null):(s.b[5][0]++,a.default(".preamble","PREAMBLE MSG"))}return s.f[1]++,s.s[14]++,{view:function(){return s.f[2]++,s.s[6]++,a.default("#googleApi",[A(),e(),a.default("script",n())])}}}},function(n,e,A){"use strict";var l,o,t,r,c,i,s=(l="/Users/bwakeford/Documents/personal/dntd-web/src/controllers/textController.ts",o="792dfc6a1b668640d2e0c5ad861dd290d395e256",t=new(0,function(){}.constructor)("return this")(),c={path:"/Users/bwakeford/Documents/personal/dntd-web/src/controllers/textController.ts",statementMap:{0:{start:{line:2,column:0},end:{line:2,column:62}},1:{start:{line:3,column:0},end:{line:6,column:2}},2:{start:{line:8,column:4},end:{line:11,column:31}},3:{start:{line:14,column:4},end:{line:14,column:33}}},fnMap:{0:{name:"escape",decl:{start:{line:7,column:9},end:{line:7,column:15}},loc:{start:{line:7,column:24},end:{line:12,column:1}},line:7},1:{name:"clean",decl:{start:{line:13,column:9},end:{line:13,column:14}},loc:{start:{line:13,column:24},end:{line:15,column:1}},line:13}},branchMap:{},s:{0:0,1:0,2:0,3:0},f:{0:0,1:0},b:{},inputSourceMap:{version:3,file:"/Users/bwakeford/Documents/personal/dntd-web/src/controllers/textController.ts",sourceRoot:"",sources:["/Users/bwakeford/Documents/personal/dntd-web/src/controllers/textController.ts"],names:[],mappings:";;AAAa,QAAA,cAAc,GAAG;IAC1B,MAAM,EAAE,MAAM;IACd,KAAK,EAAE,KAAK;CACf,CAAA;AAED,SAAS,MAAM,CAAC,MAAc;IAC1B,OAAO,MAAM;SACR,OAAO,CAAC,IAAI,EAAE,OAAO,CAAC;SACtB,OAAO,CAAC,IAAI,EAAE,MAAM,CAAC;SACrB,OAAO,CAAC,IAAI,EAAE,MAAM,CAAC,CAAA;AAC9B,CAAC;AAED,SAAS,KAAK,CAAC,OAAe;IAC1B,OAAO,OAAO,CAAC,WAAW,EAAE,CAAA;AAChC,CAAC",sourcesContent:['export const textController = {\n    escape: escape,\n    clean: clean,\n}\n\nfunction escape(unsafe: string): string {\n    return unsafe\n        .replace(/&/g, "&amp;")\n        .replace(/</g, "&lt;")\n        .replace(/>/g, "&gt;")\n}\n\nfunction clean(content: string): string {\n    return content.toLowerCase()\n}\n']},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},(i=t[r="__coverage__"]||(t[r]={}))[l]&&i[l].hash===o?i[l]:(c.hash=o,i[l]=c));s.s[0]++,Object.defineProperty(e,"__esModule",{value:!0}),s.s[1]++,e.textController={escape:function(n){return s.f[0]++,s.s[2]++,n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},clean:function(n){return s.f[1]++,s.s[3]++,n.toLowerCase()}}},function(n,e,A){"use strict";var l,o,t,r,c,i,s=(l="/Users/bwakeford/Documents/personal/dntd-web/src/factories/tagFactory.ts",o="cf1b06bf83b8a522fbb3fee5bb043a7bbbcf3cbb",t=new(0,function(){}.constructor)("return this")(),c={path:"/Users/bwakeford/Documents/personal/dntd-web/src/factories/tagFactory.ts",statementMap:{0:{start:{line:2,column:0},end:{line:2,column:62}},1:{start:{line:3,column:22},end:{line:3,column:47}},2:{start:{line:4,column:17},end:{line:4,column:37}},3:{start:{line:5,column:0},end:{line:7,column:2}},4:{start:{line:9,column:4},end:{line:9,column:61}},5:{start:{line:10,column:4},end:{line:10,column:43}},6:{start:{line:11,column:16},end:{line:11,column:35}},7:{start:{line:12,column:19},end:{line:12,column:38}},8:{start:{line:13,column:19},end:{line:13,column:62}},9:{start:{line:14,column:22},end:{line:23,column:19}},10:{start:{line:24,column:22},end:{line:24,column:24}},11:{start:{line:25,column:4},end:{line:35,column:5}},12:{start:{line:26,column:8},end:{line:34,column:24}},13:{start:{line:36,column:4},end:{line:36,column:119}},14:{start:{line:39,column:4},end:{line:39,column:51}},15:{start:{line:40,column:4},end:{line:40,column:72}},16:{start:{line:41,column:4},end:{line:41,column:28}},17:{start:{line:42,column:4},end:{line:42,column:15}}},fnMap:{0:{name:"createTag",decl:{start:{line:8,column:9},end:{line:8,column:18}},loc:{start:{line:8,column:51},end:{line:37,column:1}},line:8},1:{name:"cleanTagString",decl:{start:{line:38,column:9},end:{line:38,column:23}},loc:{start:{line:38,column:29},end:{line:43,column:1}},line:38}},branchMap:{0:{loc:{start:{line:9,column:16},end:{line:9,column:60}},type:"cond-expr",locations:[{start:{line:9,column:44},end:{line:9,column:53}},{start:{line:9,column:56},end:{line:9,column:60}}],line:9},1:{loc:{start:{line:10,column:10},end:{line:10,column:42}},type:"cond-expr",locations:[{start:{line:10,column:32},end:{line:10,column:35}},{start:{line:10,column:38},end:{line:10,column:42}}],line:10},2:{loc:{start:{line:13,column:19},end:{line:13,column:62}},type:"cond-expr",locations:[{start:{line:13,column:36},end:{line:13,column:55}},{start:{line:13,column:58},end:{line:13,column:62}}],line:13},3:{loc:{start:{line:17,column:11},end:{line:17,column:48}},type:"cond-expr",locations:[{start:{line:17,column:34},end:{line:17,column:43}},{start:{line:17,column:46},end:{line:17,column:48}}],line:17},4:{loc:{start:{line:19,column:11},end:{line:19,column:89}},type:"cond-expr",locations:[{start:{line:19,column:34},end:{line:19,column:42}},{start:{line:19,column:45},end:{line:19,column:89}}],line:19},5:{loc:{start:{line:19,column:45},end:{line:19,column:89}},type:"cond-expr",locations:[{start:{line:19,column:62},end:{line:19,column:73}},{start:{line:19,column:76},end:{line:19,column:89}}],line:19},6:{loc:{start:{line:25,column:4},end:{line:35,column:5}},type:"if",locations:[{start:{line:25,column:4},end:{line:35,column:5}},{start:{line:25,column:4},end:{line:35,column:5}}],line:25},7:{loc:{start:{line:25,column:8},end:{line:25,column:53}},type:"binary-expr",locations:[{start:{line:25,column:8},end:{line:25,column:31}},{start:{line:25,column:35},end:{line:25,column:53}}],line:25},8:{loc:{start:{line:30,column:15},end:{line:30,column:70}},type:"cond-expr",locations:[{start:{line:30,column:37},end:{line:30,column:65}},{start:{line:30,column:68},end:{line:30,column:70}}],line:30},9:{loc:{start:{line:33,column:15},end:{line:33,column:40}},type:"cond-expr",locations:[{start:{line:33,column:32},end:{line:33,column:35}},{start:{line:33,column:38},end:{line:33,column:40}}],line:33},10:{loc:{start:{line:40,column:10},end:{line:40,column:71}},type:"cond-expr",locations:[{start:{line:40,column:33},end:{line:40,column:65}},{start:{line:40,column:68},end:{line:40,column:71}}],line:40}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0},f:{0:0,1:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:"/Users/bwakeford/Documents/personal/dntd-web/src/factories/tagFactory.ts",sourceRoot:"",sources:["/Users/bwakeford/Documents/personal/dntd-web/src/factories/tagFactory.ts"],names:[],mappings:";;AAAA,gDAA+C;AAC/C,sCAAoC;AAEvB,QAAA,UAAU,GAAG;IACtB,SAAS,EAAE,SAAS;CACvB,CAAA;AAED,SAAS,SAAS,CAAC,GAAW,EAAE,IAAY,EAAE,GAAW,EAAE,SAAyB,EAAE,GAAmB;IACrG,SAAS,GAAG,CAAC,SAAS,KAAK,SAAS,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,IAAI,CAAA;IACxD,GAAG,GAAG,CAAC,GAAG,KAAK,SAAS,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,CAAA;IACtC,IAAI,KAAK,GAAG,cAAc,CAAC,GAAG,CAAC,CAAA;IAC/B,IAAI,QAAQ,GAAG,cAAc,CAAC,GAAG,CAAC,CAAA;IAClC,IAAI,QAAQ,GAAG,CAAC,GAAG,KAAK,IAAI,CAAC,CAAC,CAAC,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAA;IAE1D,IAAI,WAAW,GAAG,qCAAqC;UACjD,IAAI;UACJ,QAAQ;UACR,CAAC,CAAC,SAAS,KAAK,IAAI,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,CAAC;UACvC,eAAe;UACf,CAAC,CAAC,SAAS,KAAK,IAAI,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,GAAG,KAAK,IAAI,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,aAAa,CAAC;UAChF,KAAK;UACL,IAAI;UACJ,GAAG;UACH,SAAS,CAAA;IAEf,IAAI,WAAW,GAAG,EAAE,CAAA;IAEpB,IAAI,SAAS,KAAK,SAAS,IAAI,SAAS,KAAK,IAAI,EAAE;QAC/C,WAAW,GAAG,qCAAqC;cAC7C,IAAI;cACJ,QAAQ;cACR,SAAS;cACT,CAAC,CAAC,QAAQ,KAAK,IAAI,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,OAAO,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;cACzD,wBAAwB;cACxB,SAAS;cACT,CAAC,CAAC,GAAG,KAAK,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC;cAC3B,SAAS,CAAA;KAClB;IAED,OAAO,IAAI,iBAAQ,CAAC,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,SAAS,EAAE,GAAG,EAAE,KAAK,EAAE,QAAQ,EAAE,QAAQ,EAAE,WAAW,GAAG,WAAW,CAAC,CAAA;AAE7G,CAAC;AAED,SAAS,cAAc,CAAC,GAAW;IAC/B,GAAG,GAAG,4BAAc,CAAC,MAAM,CAAC,GAAG,CAAC,CAAA;IAChC,GAAG,GAAG,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,EAAE,GAAG,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAA;IACnE,GAAG,GAAG,GAAG,CAAC,WAAW,EAAE,CAAA;IACvB,OAAO,GAAG,CAAA;AACd,CAAC",sourcesContent:['import { textController } from "../controllers"\r\nimport { TagModel } from "../models"\r\n\r\nexport const tagFactory = {\r\n    createTag: createTag\r\n}\r\n\r\nfunction createTag(raw: string, flag: string, key: string, separator?: string | null, val?: string | null) {\r\n    separator = (separator !== undefined) ? separator : null\r\n    val = (val !== undefined) ? val : null\r\n    let clean = cleanTagString(raw)\r\n    let cleanKey = cleanTagString(key)\r\n    let cleanVal = (val !== null) ? cleanTagString(val) : null\r\n\r\n    let renderedKey = "<span onclick=\\"tagOnClick(event, \'"\r\n        + flag\r\n        + cleanKey\r\n        + ((separator !== null) ? separator : "")\r\n        + "\')\\" class=\\""\r\n        + ((separator !== null) ? "tagKey" : (val === null) ? "simpleTag" : "roundTagVal")\r\n        + "\\">"\r\n        + flag\r\n        + key\r\n        + "</span>"\r\n\r\n    let renderedVal = ""\r\n\r\n    if (separator !== undefined && separator !== null) {\r\n        renderedVal = "<span onclick=\\"tagOnClick(event, \'"\r\n            + flag\r\n            + cleanKey\r\n            + separator\r\n            + ((cleanVal !== null) ? cleanVal.replace(/\'/, "\\\\\'") : "")\r\n            + "\')\\" class=\\"tagVal\\">"\r\n            + separator\r\n            + ((val !== null) ? val : "")\r\n            + "</span>"\r\n    }\r\n\r\n    return new TagModel(raw, flag, key, separator, val, clean, cleanKey, cleanVal, renderedKey + renderedVal)\r\n\r\n}\r\n\r\nfunction cleanTagString(str: string) {\r\n    str = textController.escape(str)\r\n    str = (str.endsWith("\'s")) ? str.substring(0, str.length - 2) : str\r\n    str = str.toLowerCase()\r\n    return str\r\n}\r\n']},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},(i=t[r="__coverage__"]||(t[r]={}))[l]&&i[l].hash===o?i[l]:(c.hash=o,i[l]=c));s.s[0]++,Object.defineProperty(e,"__esModule",{value:!0});const u=(s.s[1]++,A(2)),a=(s.s[2]++,A(8));function C(n){return s.f[1]++,s.s[14]++,n=u.textController.escape(n),s.s[15]++,n=n.endsWith("'s")?(s.b[10][0]++,n.substring(0,n.length-2)):(s.b[10][1]++,n),s.s[16]++,n=n.toLowerCase(),s.s[17]++,n}s.s[3]++,e.tagFactory={createTag:function(n,e,A,l,o){s.f[0]++,s.s[4]++,l=void 0!==l?(s.b[0][0]++,l):(s.b[0][1]++,null),s.s[5]++,o=void 0!==o?(s.b[1][0]++,o):(s.b[1][1]++,null);let t=(s.s[6]++,C(n)),r=(s.s[7]++,C(A)),c=(s.s[8]++,null!==o?(s.b[2][0]++,C(o)):(s.b[2][1]++,null)),i=(s.s[9]++,"<span onclick=\"tagOnClick(event, '"+e+r+(null!==l?(s.b[3][0]++,l):(s.b[3][1]++,""))+'\')" class="'+(null!==l?(s.b[4][0]++,"tagKey"):(s.b[4][1]++,null===o?(s.b[5][0]++,"simpleTag"):(s.b[5][1]++,"roundTagVal")))+'">'+e+A+"</span>"),u=(s.s[10]++,"");s.s[11]++,s.b[7][0]++,void 0!==l&&(s.b[7][1]++,null!==l)?(s.b[6][0]++,s.s[12]++,u="<span onclick=\"tagOnClick(event, '"+e+r+l+(null!==c?(s.b[8][0]++,c.replace(/'/,"\\'")):(s.b[8][1]++,""))+'\')" class="tagVal">'+l+(null!==o?(s.b[9][0]++,o):(s.b[9][1]++,""))+"</span>"):s.b[6][1]++;return s.s[13]++,new a.TagModel(n,e,A,l,o,t,r,c,i+u)}}},function(n,e,A){"use strict";var l,o,t,r,c,i,s=(l="/Users/bwakeford/Documents/personal/dntd-web/src/models/UrlModel.ts",o="4e6e39a539bef4c81c2aed527979c4760f86babd",t=new(0,function(){}.constructor)("return this")(),c={path:"/Users/bwakeford/Documents/personal/dntd-web/src/models/UrlModel.ts",statementMap:{0:{start:{line:2,column:22},end:{line:4,column:1}},1:{start:{line:3,column:4},end:{line:3,column:62}},2:{start:{line:5,column:0},end:{line:5,column:62}},3:{start:{line:6,column:18},end:{line:6,column:53}},4:{start:{line:7,column:16},end:{line:7,column:35}},5:{start:{line:10,column:18},end:{line:10,column:47}},6:{start:{line:11,column:8},end:{line:11,column:24}},7:{start:{line:14,column:8},end:{line:14,column:37}},8:{start:{line:17,column:8},end:{line:18,column:41}},9:{start:{line:18,column:12},end:{line:18,column:41}},10:{start:{line:19,column:19},end:{line:19,column:56}},11:{start:{line:20,column:8},end:{line:20,column:94}},12:{start:{line:23,column:8},end:{line:23,column:63}},13:{start:{line:26,column:17},end:{line:26,column:57}},14:{start:{line:27,column:8},end:{line:27,column:44}},15:{start:{line:30,column:17},end:{line:30,column:59}},16:{start:{line:31,column:8},end:{line:31,column:54}},17:{start:{line:34,column:0},end:{line:34,column:28}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:2,column:56},end:{line:2,column:57}},loc:{start:{line:2,column:71},end:{line:4,column:1}},line:2},1:{name:"(anonymous_1)",decl:{start:{line:9,column:4},end:{line:9,column:5}},loc:{start:{line:9,column:15},end:{line:12,column:5}},line:9},2:{name:"(anonymous_2)",decl:{start:{line:13,column:4},end:{line:13,column:5}},loc:{start:{line:13,column:20},end:{line:15,column:5}},line:13},3:{name:"(anonymous_3)",decl:{start:{line:16,column:4},end:{line:16,column:5}},loc:{start:{line:16,column:19},end:{line:21,column:5}},line:16},4:{name:"(anonymous_4)",decl:{start:{line:22,column:4},end:{line:22,column:5}},loc:{start:{line:22,column:28},end:{line:24,column:5}},line:22},5:{name:"(anonymous_5)",decl:{start:{line:25,column:4},end:{line:25,column:5}},loc:{start:{line:25,column:18},end:{line:28,column:5}},line:25},6:{name:"(anonymous_6)",decl:{start:{line:29,column:4},end:{line:29,column:5}},loc:{start:{line:29,column:20},end:{line:32,column:5}},line:29}},branchMap:{0:{loc:{start:{line:2,column:22},end:{line:4,column:1}},type:"binary-expr",locations:[{start:{line:2,column:23},end:{line:2,column:27}},{start:{line:2,column:31},end:{line:2,column:51}},{start:{line:2,column:56},end:{line:4,column:1}}],line:2},1:{loc:{start:{line:3,column:11},end:{line:3,column:61}},type:"cond-expr",locations:[{start:{line:3,column:37},end:{line:3,column:40}},{start:{line:3,column:43},end:{line:3,column:61}}],line:3},2:{loc:{start:{line:3,column:12},end:{line:3,column:33}},type:"binary-expr",locations:[{start:{line:3,column:12},end:{line:3,column:15}},{start:{line:3,column:19},end:{line:3,column:33}}],line:3},3:{loc:{start:{line:17,column:8},end:{line:18,column:41}},type:"if",locations:[{start:{line:17,column:8},end:{line:18,column:41}},{start:{line:17,column:8},end:{line:18,column:41}}],line:17},4:{loc:{start:{line:20,column:15},end:{line:20,column:93}},type:"cond-expr",locations:[{start:{line:20,column:66},end:{line:20,column:70}},{start:{line:20,column:73},end:{line:20,column:93}}],line:20},5:{loc:{start:{line:20,column:16},end:{line:20,column:62}},type:"binary-expr",locations:[{start:{line:20,column:16},end:{line:20,column:29}},{start:{line:20,column:33},end:{line:20,column:62}}],line:20},6:{loc:{start:{line:27,column:15},end:{line:27,column:43}},type:"cond-expr",locations:[{start:{line:27,column:29},end:{line:27,column:38}},{start:{line:27,column:41},end:{line:27,column:43}}],line:27},7:{loc:{start:{line:31,column:15},end:{line:31,column:53}},type:"cond-expr",locations:[{start:{line:31,column:29},end:{line:31,column:38}},{start:{line:31,column:41},end:{line:31,column:53}}],line:31}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},b:{0:[0,0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0]},inputSourceMap:{version:3,file:"/Users/bwakeford/Documents/personal/dntd-web/src/models/UrlModel.ts",sourceRoot:"",sources:["/Users/bwakeford/Documents/personal/dntd-web/src/models/UrlModel.ts"],names:[],mappings:";;;;;AAAA,sDAAuB;AACvB,oCAAmC;AAEnC,MAAa,QAAQ;IAEjB,IAAI,IAAI;QACJ,IAAI,GAAG,GAAG,IAAI,GAAG,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAA;QACvC,OAAO,GAAG,CAAC,IAAI,CAAA;IACnB,CAAC;IACD,IAAI,IAAI,CAAC,KAAa;QAClB,MAAM,CAAC,QAAQ,CAAC,IAAI,GAAG,KAAK,CAAA;IAChC,CAAC;IAED,IAAI,QAAQ;QACR,IAAI,IAAI,CAAC,IAAI,KAAK,QAAQ;YAAE,OAAO,gBAAQ,CAAC,IAAI,CAAA;QAChD,IAAI,IAAI,GAAG,iBAAC,CAAC,KAAK,CAAC,KAAK,CAAC,MAAM,CAAC,CAAA;QAChC,OAAO,CAAC,IAAI,KAAK,IAAI,IAAI,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,gBAAQ,CAAC,GAAG,CAAA;IACjF,CAAC;IAEO,kBAAkB,CAAC,GAAW;QAClC,OAAO,CAAO,MAAO,CAAC,MAAM,CAAC,gBAAQ,CAAC,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAA;IACzD,CAAC;IAED,IAAI,OAAO;QACP,IAAI,EAAE,GAAG,iBAAC,CAAC,KAAK,CAAC,KAAK,CAAC,SAAS,CAAC,CAAA;QACjC,OAAO,CAAC,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,CAAA;IACvC,CAAC;IAGD,IAAI,SAAS;QACT,IAAI,EAAE,GAAG,iBAAC,CAAC,KAAK,CAAC,KAAK,CAAC,WAAW,CAAC,CAAA;QACnC,OAAO,CAAC,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAA;IACjD,CAAC;CAEJ;AA/BD,4BA+BC",sourcesContent:['import m from "mithril"\nimport { TestMode } from "../types"\n\nexport class UrlModel {\n\n    get hash(): string {\n        let url = new URL(window.location.href)\n        return url.hash\n    }\n    set hash(hash_: string) {\n        window.location.hash = hash_\n    }\n\n    get testMode(): TestMode {\n        if (this.hash === "#!demo") return TestMode.DEMO\n        let test = m.route.param("test")\n        return (test !== null && this.instanceOfTestMode(test)) ? test : TestMode.OFF\n    }\n\n    private instanceOfTestMode(str: string): str is TestMode {\n        return ((<any>Object).values(TestMode).includes(str))\n    }\n\n    get shelfId(): string | undefined {\n        let id = m.route.param("shelfId")\n        return (id === "") ? undefined : id\n    }\n    // TODO: set\n\n    get journalId(): number | undefined {\n        let id = m.route.param("journalId")\n        return (id === "") ? undefined : parseInt(id)\n    }\n    // TODO: set\n}\n']},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},(i=t[r="__coverage__"]||(t[r]={}))[l]&&i[l].hash===o?i[l]:(c.hash=o,i[l]=c)),u=(s.s[0]++,s.b[0][0]++,this&&(s.b[0][1]++,this.__importDefault)||(s.b[0][2]++,function(n){return s.f[0]++,s.s[1]++,s.b[2][0]++,n&&(s.b[2][1]++,n.__esModule)?(s.b[1][0]++,n):(s.b[1][1]++,{default:n})}));s.s[2]++,Object.defineProperty(e,"__esModule",{value:!0});const a=(s.s[3]++,u(A(0))),C=(s.s[4]++,A(1));s.s[17]++,e.UrlModel=class{get hash(){s.f[1]++;let n=(s.s[5]++,new URL(window.location.href));return s.s[6]++,n.hash}set hash(n){s.f[2]++,s.s[7]++,window.location.hash=n}get testMode(){if(s.f[3]++,s.s[8]++,"#!demo"===this.hash)return s.b[3][0]++,s.s[9]++,C.TestMode.DEMO;s.b[3][1]++;let n=(s.s[10]++,a.default.route.param("test"));return s.s[11]++,s.b[5][0]++,null!==n&&(s.b[5][1]++,this.instanceOfTestMode(n))?(s.b[4][0]++,n):(s.b[4][1]++,C.TestMode.OFF)}instanceOfTestMode(n){return s.f[4]++,s.s[12]++,Object.values(C.TestMode).includes(n)}get shelfId(){s.f[5]++;let n=(s.s[13]++,a.default.route.param("shelfId"));return s.s[14]++,""===n?void s.b[6][0]++:(s.b[6][1]++,n)}get journalId(){s.f[6]++;let n=(s.s[15]++,a.default.route.param("journalId"));return s.s[16]++,""===n?void s.b[7][0]++:(s.b[7][1]++,parseInt(n))}}},function(n,e,A){"use strict";var l,o,t,r,c,i,s=(l="/Users/bwakeford/Documents/personal/dntd-web/src/models/TagModel.ts",o="be61c81cc300fa6af6721c963f01cd5974269607",t=new(0,function(){}.constructor)("return this")(),c={path:"/Users/bwakeford/Documents/personal/dntd-web/src/models/TagModel.ts",statementMap:{0:{start:{line:2,column:0},end:{line:2,column:62}},1:{start:{line:5,column:8},end:{line:5,column:23}},2:{start:{line:6,column:8},end:{line:6,column:25}},3:{start:{line:7,column:8},end:{line:7,column:23}},4:{start:{line:8,column:8},end:{line:8,column:35}},5:{start:{line:9,column:8},end:{line:9,column:23}},6:{start:{line:10,column:8},end:{line:10,column:27}},7:{start:{line:11,column:8},end:{line:11,column:33}},8:{start:{line:12,column:8},end:{line:12,column:33}},9:{start:{line:13,column:8},end:{line:13,column:33}},10:{start:{line:14,column:8},end:{line:14,column:21}},11:{start:{line:17,column:0},end:{line:17,column:28}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:4},end:{line:4,column:5}},loc:{start:{line:4,column:85},end:{line:15,column:5}},line:4}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},f:{0:0},b:{},inputSourceMap:{version:3,file:"/Users/bwakeford/Documents/personal/dntd-web/src/models/TagModel.ts",sourceRoot:"",sources:["/Users/bwakeford/Documents/personal/dntd-web/src/models/TagModel.ts"],names:[],mappings:";;AAAA,MAAa,QAAQ;IAGjB,YACW,GAAW,EACX,IAAY,EACZ,GAAW,EACX,SAAwB,EACxB,GAAkB,EAClB,KAAa,EACb,QAAgB,EAChB,QAAuB,EACvB,QAAgB;QARhB,QAAG,GAAH,GAAG,CAAQ;QACX,SAAI,GAAJ,IAAI,CAAQ;QACZ,QAAG,GAAH,GAAG,CAAQ;QACX,cAAS,GAAT,SAAS,CAAe;QACxB,QAAG,GAAH,GAAG,CAAe;QAClB,UAAK,GAAL,KAAK,CAAQ;QACb,aAAQ,GAAR,QAAQ,CAAQ;QAChB,aAAQ,GAAR,QAAQ,CAAe;QACvB,aAAQ,GAAR,QAAQ,CAAQ;QAEvB,IAAI,CAAC,GAAG,GAAG,CAAC,CAAA;IAChB,CAAC;CAEJ;AAjBD,4BAiBC",sourcesContent:["export class TagModel {\n    public frq: number\n\n    constructor(\n        public raw: string,\n        public flag: string,\n        public key: string,\n        public separator: string | null,\n        public val: string | null,\n        public clean: string,\n        public cleanKey: string,\n        public cleanVal: string | null,\n        public rendered: string\n    ) { \n        this.frq = 1\n    }\n\n}\n"]},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},(i=t[r="__coverage__"]||(t[r]={}))[l]&&i[l].hash===o?i[l]:(c.hash=o,i[l]=c));s.s[0]++,Object.defineProperty(e,"__esModule",{value:!0});s.s[11]++,e.TagModel=class{constructor(n,e,A,l,o,t,r,c,i){s.f[0]++,s.s[1]++,this.raw=n,s.s[2]++,this.flag=e,s.s[3]++,this.key=A,s.s[4]++,this.separator=l,s.s[5]++,this.val=o,s.s[6]++,this.clean=t,s.s[7]++,this.cleanKey=r,s.s[8]++,this.cleanVal=c,s.s[9]++,this.rendered=i,s.s[10]++,this.frq=1}}},function(n,e,A){"use strict";var l,o,t,r,c,i,s=(l="/Users/bwakeford/Documents/personal/dntd-web/src/models/EntryModel.ts",o="8f838853039457cc0667e3d35a5b34c4a9d94cc6",t=new(0,function(){}.constructor)("return this")(),c={path:"/Users/bwakeford/Documents/personal/dntd-web/src/models/EntryModel.ts",statementMap:{0:{start:{line:2,column:0},end:{line:2,column:62}},1:{start:{line:5,column:8},end:{line:5,column:22}},2:{start:{line:6,column:8},end:{line:6,column:23}},3:{start:{line:7,column:8},end:{line:7,column:24}},4:{start:{line:8,column:8},end:{line:8,column:25}},5:{start:{line:9,column:8},end:{line:9,column:27}},6:{start:{line:10,column:8},end:{line:10,column:30}},7:{start:{line:11,column:8},end:{line:11,column:29}},8:{start:{line:14,column:0},end:{line:14,column:40}},9:{start:{line:17,column:8},end:{line:17,column:16}},10:{start:{line:18,column:8},end:{line:18,column:24}},11:{start:{line:19,column:8},end:{line:19,column:29}},12:{start:{line:20,column:8},end:{line:20,column:26}},13:{start:{line:21,column:8},end:{line:21,column:27}},14:{start:{line:22,column:8},end:{line:22,column:31}},15:{start:{line:25,column:0},end:{line:25,column:46}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:4},end:{line:4,column:5}},loc:{start:{line:4,column:18},end:{line:12,column:5}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:16,column:4},end:{line:16,column:5}},loc:{start:{line:16,column:41},end:{line:23,column:5}},line:16}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0},f:{0:0,1:0},b:{},inputSourceMap:{version:3,file:"/Users/bwakeford/Documents/personal/dntd-web/src/models/EntryModel.ts",sourceRoot:"",sources:["/Users/bwakeford/Documents/personal/dntd-web/src/models/EntryModel.ts"],names:[],mappings:";;AAGA,MAAa,cAAc;IAA3B;QACW,QAAG,GAAW,EAAE,CAAA;QAChB,SAAI,GAAW,EAAE,CAAA;QACjB,UAAK,GAAW,EAAE,CAAA;QAClB,WAAM,GAAa,EAAE,CAAA;QACrB,aAAQ,GAAW,EAAE,CAAA;QACrB,SAAI,GAA0B,IAAI,GAAG,EAAE,CAAA;QACvC,eAAU,GAAiD,EAAE,CAAA;IACxE,CAAC;CAAA;AARD,wCAQC;AAED,MAAa,iBAAkB,SAAQ,cAAc;IAQjD,YAAY,KAAiB,EAAE,OAAqB,EAAE,OAAe;QACjE,KAAK,EAAE,CAAA;QAJJ,UAAK,GAAW,EAAE,CAAA;QAClB,eAAU,GAAW,EAAE,CAAA;QAI1B,IAAI,CAAC,EAAE,GAAG,OAAO,CAAA;QACjB,IAAI,CAAC,KAAK,GAAG,KAAK,CAAA;QAClB,IAAI,CAAC,OAAO,GAAG,OAAO,CAAA;IAC1B,CAAC;CACJ;AAdD,8CAcC",sourcesContent:['import { TagModel } from "."\nimport { ShelfModel, JournalModel } from "../models"\n\nexport class BaseEntryModel {\n    public raw: string = ""\n    public safe: string = ""\n    public clean: string = ""\n    public tokens: string[] = []\n    public rendered: string = ""\n    public tags: Map<string, TagModel> = new Map()\n    public tagMatches: { tag: TagModel, match: RegExpMatchArray }[] = []\n}\n\nexport class JournalEntryModel extends BaseEntryModel {\n    readonly id: number\n    readonly shelf: ShelfModel\n    readonly journal: JournalModel\n\n    public saved: string = ""\n    public savedClean: string = ""\n\n    constructor(shelf: ShelfModel, journal: JournalModel, entryId: number) {\n        super()\n        this.id = entryId\n        this.shelf = shelf\n        this.journal = journal\n    }\n}\n']},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},(i=t[r="__coverage__"]||(t[r]={}))[l]&&i[l].hash===o?i[l]:(c.hash=o,i[l]=c));s.s[0]++,Object.defineProperty(e,"__esModule",{value:!0});class u{constructor(){s.f[0]++,s.s[1]++,this.raw="",s.s[2]++,this.safe="",s.s[3]++,this.clean="",s.s[4]++,this.tokens=[],s.s[5]++,this.rendered="",s.s[6]++,this.tags=new Map,s.s[7]++,this.tagMatches=[]}}s.s[8]++,e.BaseEntryModel=u;s.s[15]++,e.JournalEntryModel=class extends u{constructor(n,e,A){s.f[1]++,s.s[9]++,super(),s.s[10]++,this.saved="",s.s[11]++,this.savedClean="",s.s[12]++,this.id=A,s.s[13]++,this.shelf=n,s.s[14]++,this.journal=e}}},function(n,e,A){"use strict";var l,o,t,r,c,i,s=(l="/Users/bwakeford/Documents/personal/dntd-web/src/models/ShelfModel.ts",o="b4277ddddfc1f5727c2bcd0f37adf02fe1ac35dd",t=new(0,function(){}.constructor)("return this")(),c={path:"/Users/bwakeford/Documents/personal/dntd-web/src/models/ShelfModel.ts",statementMap:{0:{start:{line:2,column:0},end:{line:2,column:62}},1:{start:{line:5,column:8},end:{line:5,column:34}},2:{start:{line:6,column:8},end:{line:6,column:21}},3:{start:{line:7,column:8},end:{line:7,column:27}},4:{start:{line:8,column:8},end:{line:8,column:27}},5:{start:{line:11,column:0},end:{line:11,column:32}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:4},end:{line:4,column:5}},loc:{start:{line:4,column:34},end:{line:9,column:5}},line:4}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0},f:{0:0},b:{},inputSourceMap:{version:3,file:"/Users/bwakeford/Documents/personal/dntd-web/src/models/ShelfModel.ts",sourceRoot:"",sources:["/Users/bwakeford/Documents/personal/dntd-web/src/models/ShelfModel.ts"],names:[],mappings:";;AAEA,MAAa,UAAU;IAOnB,YAAY,EAAU,EAAE,KAAc,EAAE,KAAc;QAF/C,aAAQ,GAA8B,IAAI,GAAG,EAAE,CAAA;QAGlD,IAAI,CAAC,EAAE,GAAG,EAAE,CAAA;QACZ,IAAI,CAAC,KAAK,GAAG,KAAK,CAAA;QAClB,IAAI,CAAC,KAAK,GAAG,KAAK,CAAA;IACtB,CAAC;CAEJ;AAbD,gCAaC",sourcesContent:['import { JournalModel } from "."\n\nexport class ShelfModel {\n    readonly id: string\n    readonly title: string | undefined\n\n    public error: string | undefined\n    public journals: Map<number, JournalModel> = new Map()\n\n    constructor(id: string, title?: string, error?: string) {\n        this.id = id\n        this.error = error\n        this.title = title\n    }\n\n}\n']},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},(i=t[r="__coverage__"]||(t[r]={}))[l]&&i[l].hash===o?i[l]:(c.hash=o,i[l]=c));s.s[0]++,Object.defineProperty(e,"__esModule",{value:!0});s.s[5]++,e.ShelfModel=class{constructor(n,e,A){s.f[0]++,s.s[1]++,this.journals=new Map,s.s[2]++,this.id=n,s.s[3]++,this.error=A,s.s[4]++,this.title=e}}},function(n,e,A){"use strict";var l,o,t,r,c,i,s=(l="/Users/bwakeford/Documents/personal/dntd-web/src/models/SyncerModel.ts",o="159f711d24a72c92b2709e01575a2413af8e43ae",t=new(0,function(){}.constructor)("return this")(),c={path:"/Users/bwakeford/Documents/personal/dntd-web/src/models/SyncerModel.ts",statementMap:{0:{start:{line:2,column:0},end:{line:2,column:62}},1:{start:{line:3,column:16},end:{line:3,column:35}},2:{start:{line:6,column:8},end:{line:6,column:33}},3:{start:{line:7,column:8},end:{line:7,column:34}},4:{start:{line:8,column:8},end:{line:8,column:54}},5:{start:{line:11,column:17},end:{line:11,column:52}},6:{start:{line:12,column:8},end:{line:17,column:11}},7:{start:{line:13,column:12},end:{line:15,column:15}},8:{start:{line:14,column:16},end:{line:14,column:59}},9:{start:{line:16,column:12},end:{line:16,column:48}},10:{start:{line:20,column:0},end:{line:20,column:34}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:4},end:{line:5,column:5}},loc:{start:{line:5,column:18},end:{line:9,column:5}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:10,column:4},end:{line:10,column:5}},loc:{start:{line:10,column:36},end:{line:18,column:5}},line:10},2:{name:"(anonymous_2)",decl:{start:{line:12,column:27},end:{line:12,column:28}},loc:{start:{line:12,column:48},end:{line:17,column:9}},line:12},3:{name:"(anonymous_3)",decl:{start:{line:13,column:34},end:{line:13,column:35}},loc:{start:{line:13,column:58},end:{line:15,column:13}},line:13}},branchMap:{0:{loc:{start:{line:14,column:16},end:{line:14,column:58}},type:"cond-expr",locations:[{start:{line:14,column:26},end:{line:14,column:39}},{start:{line:14,column:42},end:{line:14,column:58}}],line:14}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},f:{0:0,1:0,2:0,3:0},b:{0:[0,0]},inputSourceMap:{version:3,file:"/Users/bwakeford/Documents/personal/dntd-web/src/models/SyncerModel.ts",sourceRoot:"",sources:["/Users/bwakeford/Documents/personal/dntd-web/src/models/SyncerModel.ts"],names:[],mappings:";;AAAA,oCAAmE;AAEnE,MAAa,WAAW;IAKpB;QACI,IAAI,CAAC,eAAe,GAAG,CAAC,CAAA;QACxB,IAAI,CAAC,QAAQ,GAAG,IAAI,GAAG,EAAE,CAAA;QACzB,IAAI,CAAC,KAAK,GAAG,mBAAW,CAAC,YAAY,CAAA;IACzC,CAAC;IAEM,cAAc,CAA0B,OAAU,EAAE,MAAc;QACrE,IAAI,EAAE,GAAG,WAAW,IAAI,CAAC,eAAe,EAAE,EAAE,CAAA;QAC5C,OAAO,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,MAAM,EAAE,EAAE;YACnC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE,EAAE,CAAC,EAAE,OAAO,EAAE,KAAK,EAAuC,EAAE,EAAE;gBAC9E,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,OAAO,CAAC,CAAA;YAC9C,CAAC,CAAC,CAAA;YACF,MAAM,CAAC,WAAW,CAAC,EAAE,EAAE,EAAE,OAAO,EAAE,CAAC,CAAA;QACvC,CAAC,CAAC,CAAA;IACN,CAAC;CAEJ;AArBD,kCAqBC",sourcesContent:['import { SyncerState, SyncerPayload, ErrorPayload } from "../types"\r\n\r\nexport class SyncerModel {\r\n    public requestsCounter: number\r\n    public requests: Map<string, Function>\r\n    public state: SyncerState\r\n\r\n    constructor() {\r\n        this.requestsCounter = 0\r\n        this.requests = new Map()\r\n        this.state = SyncerState.INITIALIZING\r\n    }\r\n\r\n    public pushSyncerTask<P extends SyncerPayload>(payload: P, worker: Worker): Promise<P> {\r\n        let id = `payload-${this.requestsCounter++}`\r\n        return new Promise((resolve, reject) => {\r\n            this.requests.set(id, ({ payload, error }: { payload: P, error: ErrorPayload }) => {\r\n                (error) ? reject(error) : resolve(payload)\r\n            })\r\n            worker.postMessage({ id, payload })\r\n        })\r\n    }\r\n\r\n}\r\n']},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},(i=t[r="__coverage__"]||(t[r]={}))[l]&&i[l].hash===o?i[l]:(c.hash=o,i[l]=c));s.s[0]++,Object.defineProperty(e,"__esModule",{value:!0});const u=(s.s[1]++,A(1));s.s[10]++,e.SyncerModel=class{constructor(){s.f[0]++,s.s[2]++,this.requestsCounter=0,s.s[3]++,this.requests=new Map,s.s[4]++,this.state=u.SyncerState.INITIALIZING}pushSyncerTask(n,e){s.f[1]++;let A=(s.s[5]++,"payload-"+this.requestsCounter++);return s.s[6]++,new Promise((l,o)=>{s.f[2]++,s.s[7]++,this.requests.set(A,({payload:n,error:e})=>{s.f[3]++,s.s[8]++,e?(s.b[0][0]++,o(e)):(s.b[0][1]++,l(n))}),s.s[9]++,e.postMessage({id:A,payload:n})})}}},function(n,e,A){"use strict";var l,o,t,r,c,i,s=(l="/Users/bwakeford/Documents/personal/dntd-web/src/models/GoogleModel.ts",o="63616122b365814b0295b0b70b51cb6ffca84a3a",t=new(0,function(){}.constructor)("return this")(),c={path:"/Users/bwakeford/Documents/personal/dntd-web/src/models/GoogleModel.ts",statementMap:{0:{start:{line:2,column:0},end:{line:2,column:62}},1:{start:{line:5,column:8},end:{line:5,column:37}},2:{start:{line:6,column:8},end:{line:6,column:55}},3:{start:{line:7,column:8},end:{line:9,column:20}},4:{start:{line:10,column:8},end:{line:10,column:99}},5:{start:{line:13,column:8},end:{line:14,column:19}},6:{start:{line:14,column:12},end:{line:14,column:19}},7:{start:{line:15,column:19},end:{line:15,column:46}},8:{start:{line:16,column:8},end:{line:16,column:33}},9:{start:{line:19,column:0},end:{line:19,column:34}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:4},end:{line:4,column:5}},loc:{start:{line:4,column:28},end:{line:11,column:5}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:12,column:4},end:{line:12,column:5}},loc:{start:{line:12,column:16},end:{line:17,column:5}},line:12}},branchMap:{0:{loc:{start:{line:13,column:8},end:{line:14,column:19}},type:"if",locations:[{start:{line:13,column:8},end:{line:14,column:19}},{start:{line:13,column:8},end:{line:14,column:19}}],line:13}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0},f:{0:0,1:0},b:{0:[0,0]},inputSourceMap:{version:3,file:"/Users/bwakeford/Documents/personal/dntd-web/src/models/GoogleModel.ts",sourceRoot:"",sources:["/Users/bwakeford/Documents/personal/dntd-web/src/models/GoogleModel.ts"],names:[],mappings:";;AAEA,MAAa,WAAW;IASpB,YAAY,UAAoB;QAC5B,IAAI,CAAC,UAAU,GAAG,UAAU,CAAA;QAC5B,IAAI,CAAC,GAAG,GAAG,mCAAmC,CAAA;QAC9C,IAAI,CAAC,KAAK,GAAG;YACT,8CAA8C;SACjD,CAAC,IAAI,CAAC,GAAG,CAAC,CAAA;QACX,IAAI,CAAC,QAAQ,GAAG,0EAA0E,CAAA;IAC9F,CAAC;IAED,IAAI,KAAK;QACL,IAAI,CAAC,IAAI,CAAC,IAAI;YAAE,OAAM;QACtB,IAAI,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,eAAe,EAAE,CAAA;QACtC,OAAO,IAAI,CAAC,YAAY,CAAA;IAC5B,CAAC;CACJ;AAvBD,kCAuBC",sourcesContent:['import { MockGapi, MockGoogleUser } from "../mocks"\n\nexport class GoogleModel {\n    readonly src: string\n    readonly scope: string\n    readonly clientId: string\n\n    public isSignedIn: boolean | undefined\n    public gapi_: MockGapi | typeof gapi | undefined\n    public user: gapi.auth2.GoogleUser | MockGoogleUser | undefined\n\n    constructor(isSignedIn?: boolean) {\n        this.isSignedIn = isSignedIn\n        this.src = "https://apis.google.com/js/api.js"\n        this.scope = [\n            "https://www.googleapis.com/auth/spreadsheets",\n        ].join(" ")\n        this.clientId = "893904323330-moo1k9s19qp40kr747pftdo29ejdef0o.apps.googleusercontent.com"\n    }\n\n    get token(): string | undefined {\n        if (!this.user) return\n        let auth = this.user.getAuthResponse()\n        return auth.access_token\n    }\n}\n']},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},(i=t[r="__coverage__"]||(t[r]={}))[l]&&i[l].hash===o?i[l]:(c.hash=o,i[l]=c));s.s[0]++,Object.defineProperty(e,"__esModule",{value:!0});s.s[9]++,e.GoogleModel=class{constructor(n){s.f[0]++,s.s[1]++,this.isSignedIn=n,s.s[2]++,this.src="https://apis.google.com/js/api.js",s.s[3]++,this.scope=["https://www.googleapis.com/auth/spreadsheets"].join(" "),s.s[4]++,this.clientId="893904323330-moo1k9s19qp40kr747pftdo29ejdef0o.apps.googleusercontent.com"}get token(){if(s.f[1]++,s.s[5]++,!this.user)return s.b[0][0]++,void s.s[6]++;s.b[0][1]++;let n=(s.s[7]++,this.user.getAuthResponse());return s.s[8]++,n.access_token}}},function(n,e,A){"use strict";var l,o,t,r,c,i,s=(l="/Users/bwakeford/Documents/personal/dntd-web/src/models/JournalModel.ts",o="80fba2848bc740783419084361ae7bfb3b406c87",t=new(0,function(){}.constructor)("return this")(),c={path:"/Users/bwakeford/Documents/personal/dntd-web/src/models/JournalModel.ts",statementMap:{0:{start:{line:2,column:0},end:{line:2,column:62}},1:{start:{line:5,column:8},end:{line:5,column:26}},2:{start:{line:6,column:8},end:{line:6,column:27}},3:{start:{line:7,column:8},end:{line:7,column:28}},4:{start:{line:8,column:8},end:{line:8,column:28}},5:{start:{line:9,column:8},end:{line:9,column:30}},6:{start:{line:10,column:8},end:{line:10,column:34}},7:{start:{line:13,column:8},end:{line:13,column:61}},8:{start:{line:16,column:8},end:{line:16,column:40}},9:{start:{line:19,column:8},end:{line:19,column:39}},10:{start:{line:22,column:20},end:{line:22,column:54}},11:{start:{line:23,column:8},end:{line:23,column:45}},12:{start:{line:26,column:0},end:{line:26,column:36}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:4},end:{line:4,column:5}},loc:{start:{line:4,column:48},end:{line:11,column:5}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:12,column:4},end:{line:12,column:5}},loc:{start:{line:12,column:25},end:{line:14,column:5}},line:12},2:{name:"(anonymous_2)",decl:{start:{line:15,column:4},end:{line:15,column:5}},loc:{start:{line:15,column:28},end:{line:17,column:5}},line:15},3:{name:"(anonymous_3)",decl:{start:{line:18,column:4},end:{line:18,column:5}},loc:{start:{line:18,column:21},end:{line:20,column:5}},line:18},4:{name:"(anonymous_4)",decl:{start:{line:21,column:4},end:{line:21,column:5}},loc:{start:{line:21,column:30},end:{line:24,column:5}},line:21}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0},f:{0:0,1:0,2:0,3:0,4:0},b:{},inputSourceMap:{version:3,file:"/Users/bwakeford/Documents/personal/dntd-web/src/models/JournalModel.ts",sourceRoot:"",sources:["/Users/bwakeford/Documents/personal/dntd-web/src/models/JournalModel.ts"],names:[],mappings:";;AAGA,MAAa,YAAY;IASrB,YAAY,KAAiB,EAAE,SAAiB,EAAE,YAAoB;QAClE,IAAI,CAAC,OAAO,GAAG,EAAE,CAAA;QACjB,IAAI,CAAC,KAAK,GAAG,KAAK,CAAA;QAClB,IAAI,CAAC,MAAM,GAAG,KAAK,CAAA;QACnB,IAAI,CAAC,EAAE,GAAG,SAAS,CAAA;QACnB,IAAI,CAAC,IAAI,GAAG,IAAI,GAAG,EAAE,CAAA;QACrB,IAAI,CAAC,KAAK,GAAG,YAAY,CAAA;IAC7B,CAAC;IAEM,QAAQ,CAAC,GAAW,EAAE,KAAwB;QACjD,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,KAAK,CAAC,EAAE,EAAE,KAAK,EAAE,CAAC,CAAA;IACxD,CAAC;IAEM,WAAW,CAAC,GAAW,EAAE,KAAwB;QACpD,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,KAAK,GAAG,KAAK,CAAA;IACnC,CAAC;IAEM,WAAW,CAAC,GAAW;QAC1B,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAA;IAClC,CAAC;IAEM,SAAS,CAAC,OAAe,EAAE,KAAa;QAC3C,IAAI,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAA;QAC9C,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,EAAE,KAAK,CAAC,CAAA;IACxC,CAAC;CAEJ;AAnCD,oCAmCC",sourcesContent:['import { ShelfModel } from "./ShelfModel"\nimport { JournalEntryModel, TagModel } from "."\n\nexport class JournalModel {\n    readonly id: number\n    readonly title: string\n    readonly shelf: ShelfModel\n\n    public loaded: boolean\n    public tags: Map<string, TagModel>\n    public entries: { id: number, entry: JournalEntryModel }[]\n\n    constructor(shelf: ShelfModel, journalId: number, journalTitle: string) {\n        this.entries = []\n        this.shelf = shelf\n        this.loaded = false\n        this.id = journalId\n        this.tags = new Map()\n        this.title = journalTitle\n    }\n\n    public addEntry(idx: number, entry: JournalEntryModel) {\n        this.entries.splice(idx, 0, { id: entry.id, entry })\n    }\n\n    public updateEntry(idx: number, entry: JournalEntryModel) {\n        this.entries[idx].entry = entry\n    }\n\n    public deleteEntry(idx: number) {\n        this.entries.splice(idx, 1)[0]\n    }\n\n    public moveEntry(fromIdx: number, toIdx: number) {\n        let entry = this.entries.splice(fromIdx, 1)[0]\n        this.entries.splice(toIdx, 0, entry)\n    }\n\n}\n']},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},(i=t[r="__coverage__"]||(t[r]={}))[l]&&i[l].hash===o?i[l]:(c.hash=o,i[l]=c));s.s[0]++,Object.defineProperty(e,"__esModule",{value:!0});s.s[12]++,e.JournalModel=class{constructor(n,e,A){s.f[0]++,s.s[1]++,this.entries=[],s.s[2]++,this.shelf=n,s.s[3]++,this.loaded=!1,s.s[4]++,this.id=e,s.s[5]++,this.tags=new Map,s.s[6]++,this.title=A}addEntry(n,e){s.f[1]++,s.s[7]++,this.entries.splice(n,0,{id:e.id,entry:e})}updateEntry(n,e){s.f[2]++,s.s[8]++,this.entries[n].entry=e}deleteEntry(n){s.f[3]++,s.s[9]++,this.entries.splice(n,1)[0]}moveEntry(n,e){s.f[4]++;let A=(s.s[10]++,this.entries.splice(n,1)[0]);s.s[11]++,this.entries.splice(e,0,A)}}},function(n,e,A){"use strict";var l,o,t,r,c,i,s=(l="/Users/bwakeford/Documents/personal/dntd-web/src/models/LibraryModel.ts",o="0cfd2bdf264c0bf0d9a57dbcd18a503a900261b6",t=new(0,function(){}.constructor)("return this")(),c={path:"/Users/bwakeford/Documents/personal/dntd-web/src/models/LibraryModel.ts",statementMap:{0:{start:{line:2,column:0},end:{line:2,column:62}},1:{start:{line:5,column:8},end:{line:5,column:33}},2:{start:{line:6,column:8},end:{line:6,column:69}},3:{start:{line:6,column:36},end:{line:6,column:67}},4:{start:{line:9,column:8},end:{line:9,column:62}},5:{start:{line:12,column:18},end:{line:12,column:56}},6:{start:{line:13,column:8},end:{line:13,column:52}},7:{start:{line:16,column:0},end:{line:16,column:36}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:4},end:{line:4,column:5}},loc:{start:{line:4,column:18},end:{line:7,column:5}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:6,column:30},end:{line:6,column:31}},loc:{start:{line:6,column:36},end:{line:6,column:67}},line:6},2:{name:"(anonymous_2)",decl:{start:{line:8,column:4},end:{line:8,column:5}},loc:{start:{line:8,column:22},end:{line:10,column:5}},line:8},3:{name:"(anonymous_3)",decl:{start:{line:11,column:4},end:{line:11,column:5}},loc:{start:{line:11,column:19},end:{line:14,column:5}},line:11}},branchMap:{0:{loc:{start:{line:13,column:15},end:{line:13,column:51}},type:"cond-expr",locations:[{start:{line:13,column:32},end:{line:13,column:34}},{start:{line:13,column:37},end:{line:13,column:51}}],line:13}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},f:{0:0,1:0,2:0,3:0},b:{0:[0,0]},inputSourceMap:{version:3,file:"/Users/bwakeford/Documents/personal/dntd-web/src/models/LibraryModel.ts",sourceRoot:"",sources:["/Users/bwakeford/Documents/personal/dntd-web/src/models/LibraryModel.ts"],names:[],mappings:";;AAEA,MAAa,YAAY;IAGrB;QACI,IAAI,CAAC,OAAO,GAAG,IAAI,GAAG,EAAE,CAAA;QACxB,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE,EAAE,SAAS,CAAC,CAAC,CAAA;IAChE,CAAC;IAED,IAAI,QAAQ,CAAC,GAAa;QACtB,YAAY,CAAC,OAAO,CAAC,gBAAgB,EAAE,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAA;IACzD,CAAC;IACD,IAAI,QAAQ;QACR,IAAI,GAAG,GAAG,YAAY,CAAC,OAAO,CAAC,gBAAgB,CAAC,CAAA;QAChD,OAAO,CAAC,GAAG,KAAK,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,CAAA;IAC/C,CAAC;CAEJ;AAhBD,oCAgBC",sourcesContent:['import { ShelfModel } from "."\n\nexport class LibraryModel {\n    public shelves: Map<string, ShelfModel | undefined>\n\n    constructor() {\n        this.shelves = new Map()\n        this.shelfIds.forEach(id => this.shelves.set(id, undefined))\n    }\n\n    set shelfIds(ids: string[]) {\n        localStorage.setItem("spreadsheetIds", ids.join(","))\n    }\n    get shelfIds(): string[] {\n        let ids = localStorage.getItem("spreadsheetIds")\n        return (ids === null) ? [] : ids.split(",")\n    }\n\n}\n']},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},(i=t[r="__coverage__"]||(t[r]={}))[l]&&i[l].hash===o?i[l]:(c.hash=o,i[l]=c));s.s[0]++,Object.defineProperty(e,"__esModule",{value:!0});s.s[7]++,e.LibraryModel=class{constructor(){s.f[0]++,s.s[1]++,this.shelves=new Map,s.s[2]++,this.shelfIds.forEach(n=>(s.f[1]++,s.s[3]++,this.shelves.set(n,void 0)))}set shelfIds(n){s.f[2]++,s.s[4]++,localStorage.setItem("spreadsheetIds",n.join(","))}get shelfIds(){s.f[3]++;let n=(s.s[5]++,localStorage.getItem("spreadsheetIds"));return s.s[6]++,null===n?(s.b[0][0]++,[]):(s.b[0][1]++,n.split(","))}}},function(n,e,A){"use strict";var l,o,t,r,c,i,s=(l="/Users/bwakeford/Documents/personal/dntd-web/src/models/ServiceWorkerModel.ts",o="1ad5e6c0b759b526863639dd42d156e15e57c685",t=new(0,function(){}.constructor)("return this")(),c={path:"/Users/bwakeford/Documents/personal/dntd-web/src/models/ServiceWorkerModel.ts",statementMap:{0:{start:{line:2,column:16},end:{line:10,column:1}},1:{start:{line:3,column:28},end:{line:3,column:110}},2:{start:{line:3,column:91},end:{line:3,column:106}},3:{start:{line:4,column:4},end:{line:9,column:7}},4:{start:{line:5,column:36},end:{line:5,column:97}},5:{start:{line:5,column:42},end:{line:5,column:70}},6:{start:{line:5,column:85},end:{line:5,column:95}},7:{start:{line:6,column:35},end:{line:6,column:100}},8:{start:{line:6,column:41},end:{line:6,column:73}},9:{start:{line:6,column:88},end:{line:6,column:98}},10:{start:{line:7,column:32},end:{line:7,column:116}},11:{start:{line:8,column:8},end:{line:8,column:78}},12:{start:{line:11,column:0},end:{line:11,column:62}},13:{start:{line:12,column:17},end:{line:12,column:37}},14:{start:{line:15,column:8},end:{line:22,column:9}},15:{start:{line:16,column:12},end:{line:18,column:16}},16:{start:{line:16,column:50},end:{line:18,column:14}},17:{start:{line:17,column:16},end:{line:17,column:78}},18:{start:{line:21,column:12},end:{line:21,column:110}},19:{start:{line:25,column:0},end:{line:25,column:48}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:2,column:44},end:{line:2,column:45}},loc:{start:{line:2,column:89},end:{line:10,column:1}},line:2},1:{name:"adopt",decl:{start:{line:3,column:13},end:{line:3,column:18}},loc:{start:{line:3,column:26},end:{line:3,column:112}},line:3},2:{name:"(anonymous_2)",decl:{start:{line:3,column:70},end:{line:3,column:71}},loc:{start:{line:3,column:89},end:{line:3,column:108}},line:3},3:{name:"(anonymous_3)",decl:{start:{line:4,column:36},end:{line:4,column:37}},loc:{start:{line:4,column:63},end:{line:9,column:5}},line:4},4:{name:"fulfilled",decl:{start:{line:5,column:17},end:{line:5,column:26}},loc:{start:{line:5,column:34},end:{line:5,column:99}},line:5},5:{name:"rejected",decl:{start:{line:6,column:17},end:{line:6,column:25}},loc:{start:{line:6,column:33},end:{line:6,column:102}},line:6},6:{name:"step",decl:{start:{line:7,column:17},end:{line:7,column:21}},loc:{start:{line:7,column:30},end:{line:7,column:118}},line:7},7:{name:"(anonymous_7)",decl:{start:{line:14,column:4},end:{line:14,column:5}},loc:{start:{line:14,column:18},end:{line:23,column:5}},line:14},8:{name:"(anonymous_8)",decl:{start:{line:16,column:44},end:{line:16,column:45}},loc:{start:{line:16,column:50},end:{line:18,column:14}},line:16},9:{name:"(anonymous_9)",decl:{start:{line:16,column:82},end:{line:16,column:83}},loc:{start:{line:16,column:95},end:{line:18,column:13}},line:16}},branchMap:{0:{loc:{start:{line:2,column:16},end:{line:10,column:1}},type:"binary-expr",locations:[{start:{line:2,column:17},end:{line:2,column:21}},{start:{line:2,column:25},end:{line:2,column:39}},{start:{line:2,column:44},end:{line:10,column:1}}],line:2},1:{loc:{start:{line:3,column:35},end:{line:3,column:109}},type:"cond-expr",locations:[{start:{line:3,column:56},end:{line:3,column:61}},{start:{line:3,column:64},end:{line:3,column:109}}],line:3},2:{loc:{start:{line:4,column:16},end:{line:4,column:34}},type:"binary-expr",locations:[{start:{line:4,column:16},end:{line:4,column:17}},{start:{line:4,column:22},end:{line:4,column:33}}],line:4},3:{loc:{start:{line:7,column:32},end:{line:7,column:115}},type:"cond-expr",locations:[{start:{line:7,column:46},end:{line:7,column:67}},{start:{line:7,column:70},end:{line:7,column:115}}],line:7},4:{loc:{start:{line:8,column:51},end:{line:8,column:67}},type:"binary-expr",locations:[{start:{line:8,column:51},end:{line:8,column:61}},{start:{line:8,column:65},end:{line:8,column:67}}],line:8},5:{loc:{start:{line:15,column:8},end:{line:22,column:9}},type:"if",locations:[{start:{line:15,column:8},end:{line:22,column:9}},{start:{line:15,column:8},end:{line:22,column:9}}],line:15}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0},b:{0:[0,0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0]},inputSourceMap:{version:3,file:"/Users/bwakeford/Documents/personal/dntd-web/src/models/ServiceWorkerModel.ts",sourceRoot:"",sources:["/Users/bwakeford/Documents/personal/dntd-web/src/models/ServiceWorkerModel.ts"],names:[],mappings:";;;;;;;;;;;AAAA,sCAAyC;AAEzC,MAAa,kBAAkB;IAC3B;QACI,IAAI,eAAe,IAAI,SAAS,EAAE;YAC9B,MAAM,CAAC,gBAAgB,CAAC,MAAM,EAAE,GAAS,EAAE;gBACvC,MAAM,SAAS,CAAC,aAAa,CAAC,QAAQ,CAAC,qBAAqB,CAAC,CAAA;YACjE,CAAC,CAAA,CAAC,CAAA;SACL;aAAM;YACH,MAAM,IAAI,sBAAa,CAAC,6BAA6B,EAAE,gCAAgC,CAAC,CAAA;SAC3F;IACL,CAAC;CACJ;AAVD,gDAUC",sourcesContent:['import { FriendlyError } from "../errors"\n\nexport class ServiceWorkerModel {\n    constructor() {\n        if ("serviceWorker" in navigator) {\n            window.addEventListener("load", async () => {\n                await navigator.serviceWorker.register("../serviceWorker.js")\n            })\n        } else {\n            throw new FriendlyError("serviceWorker not supported", "Your browser is not supported.")\n        }\n    }\n}\n']},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},(i=t[r="__coverage__"]||(t[r]={}))[l]&&i[l].hash===o?i[l]:(c.hash=o,i[l]=c)),u=(s.s[0]++,s.b[0][0]++,this&&(s.b[0][1]++,this.__awaiter)||(s.b[0][2]++,function(n,e,A,l){return s.f[0]++,s.s[3]++,new(s.b[2][0]++,A||(s.b[2][1]++,A=Promise))((function(o,t){function r(n){s.f[4]++,s.s[4]++;try{s.s[5]++,i(l.next(n))}catch(n){s.s[6]++,t(n)}}function c(n){s.f[5]++,s.s[7]++;try{s.s[8]++,i(l.throw(n))}catch(n){s.s[9]++,t(n)}}function i(n){var e;s.f[6]++,s.s[10]++,n.done?(s.b[3][0]++,o(n.value)):(s.b[3][1]++,(e=n.value,s.f[1]++,s.s[1]++,e instanceof A?(s.b[1][0]++,e):(s.b[1][1]++,new A((function(n){s.f[2]++,s.s[2]++,n(e)})))).then(r,c))}s.f[3]++,s.s[11]++,i((l=l.apply(n,(s.b[4][0]++,e||(s.b[4][1]++,[])))).next())}))}));s.s[12]++,Object.defineProperty(e,"__esModule",{value:!0});const a=(s.s[13]++,A(9));s.s[19]++,e.ServiceWorkerModel=class{constructor(){if(s.f[7]++,s.s[14]++,!("serviceWorker"in navigator))throw s.b[5][1]++,s.s[18]++,new a.FriendlyError("serviceWorker not supported","Your browser is not supported.");s.b[5][0]++,s.s[15]++,window.addEventListener("load",()=>(s.f[8]++,s.s[16]++,u(this,void 0,void 0,(function*(){s.f[9]++,s.s[17]++,yield navigator.serviceWorker.register("../serviceWorker.js")}))))}}},function(n,e,A){"use strict";var l,o,t,r,c,i,s=(l="/Users/bwakeford/Documents/personal/dntd-web/src/errors/FriendlyError.ts",o="6495e519b66b7fd7703384c25a0ded36f1d8bd1a",t=new(0,function(){}.constructor)("return this")(),c={path:"/Users/bwakeford/Documents/personal/dntd-web/src/errors/FriendlyError.ts",statementMap:{0:{start:{line:2,column:22},end:{line:4,column:1}},1:{start:{line:3,column:4},end:{line:3,column:62}},2:{start:{line:5,column:0},end:{line:5,column:62}},3:{start:{line:6,column:18},end:{line:6,column:53}},4:{start:{line:9,column:8},end:{line:9,column:24}},5:{start:{line:10,column:8},end:{line:10,column:39}},6:{start:{line:11,column:8},end:{line:11,column:31}},7:{start:{line:12,column:8},end:{line:12,column:35}},8:{start:{line:15,column:0},end:{line:15,column:38}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:2,column:56},end:{line:2,column:57}},loc:{start:{line:2,column:71},end:{line:4,column:1}},line:2},1:{name:"(anonymous_1)",decl:{start:{line:8,column:4},end:{line:8,column:5}},loc:{start:{line:8,column:39},end:{line:13,column:5}},line:8}},branchMap:{0:{loc:{start:{line:2,column:22},end:{line:4,column:1}},type:"binary-expr",locations:[{start:{line:2,column:23},end:{line:2,column:27}},{start:{line:2,column:31},end:{line:2,column:51}},{start:{line:2,column:56},end:{line:4,column:1}}],line:2},1:{loc:{start:{line:3,column:11},end:{line:3,column:61}},type:"cond-expr",locations:[{start:{line:3,column:37},end:{line:3,column:40}},{start:{line:3,column:43},end:{line:3,column:61}}],line:3},2:{loc:{start:{line:3,column:12},end:{line:3,column:33}},type:"binary-expr",locations:[{start:{line:3,column:12},end:{line:3,column:15}},{start:{line:3,column:19},end:{line:3,column:33}}],line:3}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},f:{0:0,1:0},b:{0:[0,0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:"/Users/bwakeford/Documents/personal/dntd-web/src/errors/FriendlyError.ts",sourceRoot:"",sources:["/Users/bwakeford/Documents/personal/dntd-web/src/errors/FriendlyError.ts"],names:[],mappings:";;;;;AAAA,sDAAuB;AAEvB,MAAa,aAAc,SAAQ,KAAK;IACpC,YAAY,QAAgB,EAAS,WAAmB;QACpD,KAAK,CAAC,QAAQ,CAAC,CAAA;QADkB,gBAAW,GAAX,WAAW,CAAQ;QAEpD,OAAO,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAA;QAEtB,iBAAC,CAAC,MAAM,EAAE,CAAA;IACd,CAAC;CACJ;AAPD,sCAOC",sourcesContent:['import m from "mithril"\n\nexport class FriendlyError extends Error {\n    constructor(errorMsg: string, public friendlyMsg: string) {\n        super(errorMsg)\n        console.warn(errorMsg)\n        // journal.errors.push(friendlyMsg) // TODO reassign\n        m.redraw()\n    }\n}\n']},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},(i=t[r="__coverage__"]||(t[r]={}))[l]&&i[l].hash===o?i[l]:(c.hash=o,i[l]=c)),u=(s.s[0]++,s.b[0][0]++,this&&(s.b[0][1]++,this.__importDefault)||(s.b[0][2]++,function(n){return s.f[0]++,s.s[1]++,s.b[2][0]++,n&&(s.b[2][1]++,n.__esModule)?(s.b[1][0]++,n):(s.b[1][1]++,{default:n})}));s.s[2]++,Object.defineProperty(e,"__esModule",{value:!0});const a=(s.s[3]++,u(A(0)));class C extends Error{constructor(n,e){s.f[1]++,s.s[4]++,super(n),s.s[5]++,this.friendlyMsg=e,s.s[6]++,console.warn(n),s.s[7]++,a.default.redraw()}}s.s[8]++,e.FriendlyError=C},function(n,e,A){"use strict";var l,o,t,r,c,i,s=(l="/Users/bwakeford/Documents/personal/dntd-web/src/factories/shelfFactory.ts",o="9b6190b9009ea46eec476f86f2f309e84f86ebc6",t=new(0,function(){}.constructor)("return this")(),c={path:"/Users/bwakeford/Documents/personal/dntd-web/src/factories/shelfFactory.ts",statementMap:{0:{start:{line:2,column:0},end:{line:2,column:62}},1:{start:{line:3,column:17},end:{line:3,column:37}},2:{start:{line:4,column:0},end:{line:6,column:2}},3:{start:{line:8,column:4},end:{line:16,column:5}},4:{start:{line:13,column:20},end:{line:13,column:100}},5:{start:{line:14,column:8},end:{line:14,column:107}},6:{start:{line:14,column:66},end:{line:14,column:105}},7:{start:{line:15,column:8},end:{line:15,column:21}},8:{start:{line:17,column:4},end:{line:17,column:68}},9:{start:{line:20,column:19},end:{line:20,column:21}},10:{start:{line:21,column:4},end:{line:30,column:7}},11:{start:{line:22,column:8},end:{line:29,column:9}},12:{start:{line:25,column:26},end:{line:25,column:108}},13:{start:{line:26,column:12},end:{line:27,column:23}},14:{start:{line:27,column:16},end:{line:27,column:23}},15:{start:{line:28,column:12},end:{line:28,column:35}},16:{start:{line:31,column:4},end:{line:31,column:20}}},fnMap:{0:{name:"createShelf",decl:{start:{line:7,column:9},end:{line:7,column:20}},loc:{start:{line:7,column:56},end:{line:18,column:1}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:14,column:55},end:{line:14,column:56}},loc:{start:{line:14,column:66},end:{line:14,column:105}},line:14},2:{name:"getJournals",decl:{start:{line:19,column:9},end:{line:19,column:20}},loc:{start:{line:19,column:36},end:{line:32,column:1}},line:19},3:{name:"(anonymous_3)",decl:{start:{line:21,column:19},end:{line:21,column:20}},loc:{start:{line:21,column:28},end:{line:30,column:5}},line:21}},branchMap:{0:{loc:{start:{line:8,column:4},end:{line:16,column:5}},type:"if",locations:[{start:{line:8,column:4},end:{line:16,column:5}},{start:{line:8,column:4},end:{line:16,column:5}}],line:8},1:{loc:{start:{line:8,column:8},end:{line:12,column:40}},type:"binary-expr",locations:[{start:{line:8,column:8},end:{line:8,column:33}},{start:{line:9,column:8},end:{line:9,column:47}},{start:{line:10,column:8},end:{line:10,column:44}},{start:{line:11,column:8},end:{line:11,column:50}},{start:{line:12,column:8},end:{line:12,column:40}}],line:8},2:{loc:{start:{line:22,column:8},end:{line:29,column:9}},type:"if",locations:[{start:{line:22,column:8},end:{line:29,column:9}},{start:{line:22,column:8},end:{line:29,column:9}}],line:22},3:{loc:{start:{line:22,column:12},end:{line:24,column:50}},type:"binary-expr",locations:[{start:{line:22,column:12},end:{line:22,column:42}},{start:{line:23,column:12},end:{line:23,column:48}},{start:{line:24,column:12},end:{line:24,column:50}}],line:22},4:{loc:{start:{line:26,column:12},end:{line:27,column:23}},type:"if",locations:[{start:{line:26,column:12},end:{line:27,column:23}},{start:{line:26,column:12},end:{line:27,column:23}}],line:26}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0},f:{0:0,1:0,2:0,3:0},b:{0:[0,0],1:[0,0,0,0,0],2:[0,0],3:[0,0,0],4:[0,0]},inputSourceMap:{version:3,file:"/Users/bwakeford/Documents/personal/dntd-web/src/factories/shelfFactory.ts",sourceRoot:"",sources:["/Users/bwakeford/Documents/personal/dntd-web/src/factories/shelfFactory.ts"],names:[],mappings:";;AAAA,sCAAoD;AAEvC,QAAA,YAAY,GAAG;IACxB,WAAW,EAAE,WAAW;CAC3B,CAAA;AAED,SAAS,WAAW,CAAC,aAAqB,EAAE,WAA4C,EAAE,KAAc;IACpG,IACI,WAAW,KAAK,SAAS;QACzB,WAAW,CAAC,aAAa,KAAK,SAAS;QACvC,WAAW,CAAC,UAAU,KAAK,SAAS;QACpC,WAAW,CAAC,UAAU,CAAC,KAAK,KAAK,SAAS;QAC1C,WAAW,CAAC,MAAM,KAAK,SAAS,EAClC;QACE,IAAI,KAAK,GAAG,IAAI,mBAAU,CAAC,WAAW,CAAC,aAAa,EAAE,WAAW,CAAC,UAAU,CAAC,KAAK,CAAC,CAAA;QACnF,WAAW,CAAC,KAAK,EAAE,WAAW,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,OAAO,CAAC,EAAE,CAAC,KAAK,CAAC,QAAQ,CAAC,GAAG,CAAC,OAAO,CAAC,EAAE,EAAE,OAAO,CAAC,CAAC,CAAA;QAClG,OAAO,KAAK,CAAA;KACf;IACD,OAAO,IAAI,mBAAU,CAAC,aAAa,EAAE,SAAS,EAAE,KAAK,CAAC,CAAA;AAC1D,CAAC;AAED,SAAS,WAAW,CAAC,KAAiB,EAAE,MAAkC;IACtE,IAAI,QAAQ,GAAmB,EAAE,CAAA;IACjC,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE;QACnB,IACI,KAAK,CAAC,UAAU,KAAK,SAAS;YAC9B,KAAK,CAAC,UAAU,CAAC,KAAK,KAAK,SAAS;YACpC,KAAK,CAAC,UAAU,CAAC,OAAO,KAAK,SAAS,EACxC;YACE,IAAI,OAAO,GAAG,IAAI,qBAAY,CAC1B,KAAK,EAAE,KAAK,CAAC,UAAU,CAAC,OAAO,EAAE,KAAK,CAAC,UAAU,CAAC,KAAK,CAC1D,CAAA;YACD,IAAI,OAAO,KAAK,SAAS;gBAAE,OAAM;YACjC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,CAAA;SACzB;IACL,CAAC,CAAC,CAAA;IACF,OAAO,QAAQ,CAAA;AACnB,CAAC",sourcesContent:['import { ShelfModel, JournalModel } from "../models"\n\nexport const shelfFactory = {\n    createShelf: createShelf,\n}\n\nfunction createShelf(spreadsheetId: string, spreadsheet?: gapi.client.sheets.Spreadsheet, error?: string): ShelfModel {\n    if (\n        spreadsheet !== undefined &&\n        spreadsheet.spreadsheetId !== undefined &&\n        spreadsheet.properties !== undefined &&\n        spreadsheet.properties.title !== undefined &&\n        spreadsheet.sheets !== undefined\n    ) {\n        let shelf = new ShelfModel(spreadsheet.spreadsheetId, spreadsheet.properties.title)\n        getJournals(shelf, spreadsheet.sheets).forEach(journal => shelf.journals.set(journal.id, journal))\n        return shelf\n    }\n    return new ShelfModel(spreadsheetId, undefined, error)\n}\n\nfunction getJournals(shelf: ShelfModel, sheets: gapi.client.sheets.Sheet[]): JournalModel[] {\n    let journals: JournalModel[] = []\n    sheets.forEach(sheet => {\n        if (\n            sheet.properties !== undefined &&\n            sheet.properties.title !== undefined &&\n            sheet.properties.sheetId !== undefined\n        ) {\n            let journal = new JournalModel(\n                shelf, sheet.properties.sheetId, sheet.properties.title\n            )\n            if (journal === undefined) return\n            journals.push(journal)\n        }\n    })\n    return journals\n}\n']},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},(i=t[r="__coverage__"]||(t[r]={}))[l]&&i[l].hash===o?i[l]:(c.hash=o,i[l]=c));s.s[0]++,Object.defineProperty(e,"__esModule",{value:!0});const u=(s.s[1]++,A(8));s.s[2]++,e.shelfFactory={createShelf:function(n,e,A){if(s.f[0]++,s.s[3]++,s.b[1][0]++,void 0!==e&&(s.b[1][1]++,void 0!==e.spreadsheetId)&&(s.b[1][2]++,void 0!==e.properties)&&(s.b[1][3]++,void 0!==e.properties.title)&&(s.b[1][4]++,void 0!==e.sheets)){s.b[0][0]++;let n=(s.s[4]++,new u.ShelfModel(e.spreadsheetId,e.properties.title));return s.s[5]++,function(n,e){s.f[2]++;let A=(s.s[9]++,[]);return s.s[10]++,e.forEach(e=>{if(s.f[3]++,s.s[11]++,s.b[3][0]++,void 0!==e.properties&&(s.b[3][1]++,void 0!==e.properties.title)&&(s.b[3][2]++,void 0!==e.properties.sheetId)){s.b[2][0]++;let l=(s.s[12]++,new u.JournalModel(n,e.properties.sheetId,e.properties.title));if(s.s[13]++,void 0===l)return s.b[4][0]++,void s.s[14]++;s.b[4][1]++,s.s[15]++,A.push(l)}else s.b[2][1]++}),s.s[16]++,A}(n,e.sheets).forEach(e=>(s.f[1]++,s.s[6]++,n.journals.set(e.id,e))),s.s[7]++,n}s.b[0][1]++;return s.s[8]++,new u.ShelfModel(n,void 0,A)}}},function(n,e,A){"use strict";var l,o,t,r,c,i,s=(l="/Users/bwakeford/Documents/personal/dntd-web/src/factories/entryFactory.ts",o="95392b6c098b9b8ad33abbdf0dc86fe85c99de27",t=new(0,function(){}.constructor)("return this")(),c={path:"/Users/bwakeford/Documents/personal/dntd-web/src/factories/entryFactory.ts",statementMap:{0:{start:{line:2,column:0},end:{line:2,column:62}},1:{start:{line:3,column:22},end:{line:3,column:47}},2:{start:{line:4,column:17},end:{line:4,column:37}},3:{start:{line:5,column:19},end:{line:5,column:21}},4:{start:{line:6,column:0},end:{line:9,column:2}},5:{start:{line:11,column:16},end:{line:11,column:45}},6:{start:{line:12,column:4},end:{line:12,column:63}},7:{start:{line:13,column:4},end:{line:13,column:17}},8:{start:{line:16,column:16},end:{line:16,column:81}},9:{start:{line:17,column:4},end:{line:17,column:57}},10:{start:{line:18,column:4},end:{line:18,column:17}}},fnMap:{0:{name:"createBaseEntry",decl:{start:{line:10,column:9},end:{line:10,column:24}},loc:{start:{line:10,column:34},end:{line:14,column:1}},line:10},1:{name:"createJournalEntry",decl:{start:{line:15,column:9},end:{line:15,column:27}},loc:{start:{line:15,column:53},end:{line:19,column:1}},line:15}},branchMap:{0:{loc:{start:{line:12,column:48},end:{line:12,column:61}},type:"binary-expr",locations:[{start:{line:12,column:48},end:{line:12,column:55}},{start:{line:12,column:59},end:{line:12,column:61}}],line:12}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},f:{0:0,1:0},b:{0:[0,0]},inputSourceMap:{version:3,file:"/Users/bwakeford/Documents/personal/dntd-web/src/factories/entryFactory.ts",sourceRoot:"",sources:["/Users/bwakeford/Documents/personal/dntd-web/src/factories/entryFactory.ts"],names:[],mappings:";;AAAA,gDAAgD;AAChD,sCAAuF;AAEvF,IAAI,YAAY,GAAG,CAAC,CAAC,CAAA;AAER,QAAA,YAAY,GAAG;IACxB,eAAe,EAAE,eAAe;IAChC,kBAAkB,EAAE,kBAAkB;CACzC,CAAA;AAED,SAAS,eAAe,CAAC,OAAgB;IACrC,IAAI,KAAK,GAAG,IAAI,uBAAc,EAAE,CAAA;IAChC,6BAAe,CAAC,MAAM,CAAC,KAAK,EAAE,OAAO,IAAI,EAAE,CAAC,CAAA;IAC5C,OAAO,KAAK,CAAA;AAChB,CAAC;AAED,SAAS,kBAAkB,CAAC,KAAiB,EAAE,OAAqB,EAAE,OAAe;IACjF,IAAI,KAAK,GAAG,IAAI,0BAAiB,CAAC,KAAK,EAAE,OAAO,EAAE,YAAY,IAAI,CAAC,CAAC,CAAA;IACpE,6BAAe,CAAC,MAAM,CAAC,KAAK,EAAE,OAAO,CAAC,CAAA;IACtC,OAAO,KAAK,CAAA;AAChB,CAAC",sourcesContent:['import { entryController } from "../controllers"\nimport { JournalEntryModel, ShelfModel, JournalModel, BaseEntryModel } from "../models"\n\nlet entryCounter = -1\n\nexport const entryFactory = {\n    createBaseEntry: createBaseEntry,\n    createJournalEntry: createJournalEntry\n}\n\nfunction createBaseEntry(content?: string) {\n    let entry = new BaseEntryModel()\n    entryController.update(entry, content || "")\n    return entry\n}\n\nfunction createJournalEntry(shelf: ShelfModel, journal: JournalModel, content: string) {\n    let entry = new JournalEntryModel(shelf, journal, entryCounter += 1)\n    entryController.update(entry, content)\n    return entry\n}\n']},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},(i=t[r="__coverage__"]||(t[r]={}))[l]&&i[l].hash===o?i[l]:(c.hash=o,i[l]=c));s.s[0]++,Object.defineProperty(e,"__esModule",{value:!0});const u=(s.s[1]++,A(2)),a=(s.s[2]++,A(8));let C=(s.s[3]++,-1);s.s[4]++,e.entryFactory={createBaseEntry:function(n){s.f[0]++;let e=(s.s[5]++,new a.BaseEntryModel);return s.s[6]++,u.entryController.update(e,(s.b[0][0]++,n||(s.b[0][1]++,""))),s.s[7]++,e},createJournalEntry:function(n,e,A){s.f[1]++;let l=(s.s[8]++,new a.JournalEntryModel(n,e,C+=1));return s.s[9]++,u.entryController.update(l,A),s.s[10]++,l}}},function(n,e,A){"use strict";var l,o,t,r,c,i,s=(l="/Users/bwakeford/Documents/personal/dntd-web/src/controllers/caretController.ts",o="0e97f94d3181a9563a4af4185d371a1e96edccb4",t=new(0,function(){}.constructor)("return this")(),c={path:"/Users/bwakeford/Documents/personal/dntd-web/src/controllers/caretController.ts",statementMap:{0:{start:{line:2,column:0},end:{line:2,column:62}},1:{start:{line:3,column:0},end:{line:6,column:2}},2:{start:{line:8,column:17},end:{line:8,column:27}},3:{start:{line:9,column:4},end:{line:10,column:39}},4:{start:{line:10,column:8},end:{line:10,column:39}},5:{start:{line:11,column:4},end:{line:11,column:11}},6:{start:{line:14,column:14},end:{line:14,column:35}},7:{start:{line:15,column:21},end:{line:15,column:27}},8:{start:{line:16,column:4},end:{line:47,column:5}},9:{start:{line:17,column:8},end:{line:17,column:88}},10:{start:{line:20,column:28},end:{line:20,column:60}},11:{start:{line:21,column:8},end:{line:46,column:9}},12:{start:{line:22,column:12},end:{line:22,column:29}},13:{start:{line:25,column:24},end:{line:25,column:30}},14:{start:{line:27,column:12},end:{line:43,column:15}},15:{start:{line:28,column:16},end:{line:35,column:17}},16:{start:{line:29,column:20},end:{line:34,column:21}},17:{start:{line:30,column:24},end:{line:30,column:37}},18:{start:{line:31,column:24},end:{line:33,column:25}},19:{start:{line:32,column:28},end:{line:32,column:35}},20:{start:{line:36,column:16},end:{line:42,column:17}},21:{start:{line:37,column:20},end:{line:41,column:21}},22:{start:{line:38,column:24},end:{line:40,column:25}},23:{start:{line:39,column:28},end:{line:39,column:69}},24:{start:{line:44,column:12},end:{line:44,column:46}},25:{start:{line:45,column:12},end:{line:45,column:46}},26:{start:{line:48,column:4},end:{line:50,column:5}},27:{start:{line:49,column:8},end:{line:49,column:26}},28:{start:{line:51,column:4},end:{line:51,column:42}},29:{start:{line:54,column:4},end:{line:78,column:5}},30:{start:{line:55,column:8},end:{line:76,column:9}},31:{start:{line:56,column:12},end:{line:75,column:13}},32:{start:{line:57,column:16},end:{line:68,column:17}},33:{start:{line:58,column:32},end:{line:58,column:54}},34:{start:{line:59,column:30},end:{line:59,column:51}},35:{start:{line:60,column:20},end:{line:60,column:46}},36:{start:{line:61,column:20},end:{line:61,column:41}},37:{start:{line:62,column:20},end:{line:62,column:42}},38:{start:{line:63,column:20},end:{line:63,column:40}},39:{start:{line:64,column:20},end:{line:64,column:30}},40:{start:{line:67,column:20},end:{line:67,column:39}},41:{start:{line:71,column:16},end:{line:71,column:50}},42:{start:{line:72,column:16},end:{line:74,column:17}},43:{start:{line:73,column:20},end:{line:73,column:30}},44:{start:{line:77,column:8},end:{line:77,column:19}}},fnMap:{0:{name:"node_walk",decl:{start:{line:7,column:9},end:{line:7,column:18}},loc:{start:{line:7,column:31},end:{line:12,column:1}},line:7},1:{name:"getCaretPosition",decl:{start:{line:13,column:9},end:{line:13,column:25}},loc:{start:{line:13,column:32},end:{line:52,column:1}},line:13},2:{name:"(anonymous_2)",decl:{start:{line:27,column:28},end:{line:27,column:29}},loc:{start:{line:27,column:44},end:{line:43,column:13}},line:27},3:{name:"setCaretPosition",decl:{start:{line:53,column:9},end:{line:53,column:25}},loc:{start:{line:53,column:35},end:{line:79,column:1}},line:53}},branchMap:{0:{loc:{start:{line:9,column:33},end:{line:9,column:57}},type:"binary-expr",locations:[{start:{line:9,column:33},end:{line:9,column:49}},{start:{line:9,column:53},end:{line:9,column:57}}],line:9},1:{loc:{start:{line:16,column:4},end:{line:47,column:5}},type:"if",locations:[{start:{line:16,column:4},end:{line:47,column:5}},{start:{line:16,column:4},end:{line:47,column:5}}],line:16},2:{loc:{start:{line:21,column:8},end:{line:46,column:9}},type:"if",locations:[{start:{line:21,column:8},end:{line:46,column:9}},{start:{line:21,column:8},end:{line:46,column:9}}],line:21},3:{loc:{start:{line:21,column:12},end:{line:21,column:76}},type:"binary-expr",locations:[{start:{line:21,column:12},end:{line:21,column:42}},{start:{line:21,column:46},end:{line:21,column:76}}],line:21},4:{loc:{start:{line:29,column:20},end:{line:34,column:21}},type:"if",locations:[{start:{line:29,column:20},end:{line:34,column:21}},{start:{line:29,column:20},end:{line:34,column:21}}],line:29},5:{loc:{start:{line:31,column:24},end:{line:33,column:25}},type:"if",locations:[{start:{line:31,column:24},end:{line:33,column:25}},{start:{line:31,column:24},end:{line:33,column:25}}],line:31},6:{loc:{start:{line:31,column:34},end:{line:31,column:48}},type:"cond-expr",locations:[{start:{line:31,column:43},end:{line:31,column:44}},{start:{line:31,column:47},end:{line:31,column:48}}],line:31},7:{loc:{start:{line:36,column:16},end:{line:42,column:17}},type:"if",locations:[{start:{line:36,column:16},end:{line:42,column:17}},{start:{line:36,column:16},end:{line:42,column:17}}],line:36},8:{loc:{start:{line:36,column:20},end:{line:36,column:56}},type:"binary-expr",locations:[{start:{line:36,column:20},end:{line:36,column:36}},{start:{line:36,column:40},end:{line:36,column:56}}],line:36},9:{loc:{start:{line:38,column:24},end:{line:40,column:25}},type:"if",locations:[{start:{line:38,column:24},end:{line:40,column:25}},{start:{line:38,column:24},end:{line:40,column:25}}],line:38},10:{loc:{start:{line:48,column:4},end:{line:50,column:5}},type:"if",locations:[{start:{line:48,column:4},end:{line:50,column:5}},{start:{line:48,column:4},end:{line:50,column:5}}],line:48},11:{loc:{start:{line:54,column:4},end:{line:78,column:5}},type:"if",locations:[{start:{line:54,column:4},end:{line:78,column:5}},{start:{line:54,column:4},end:{line:78,column:5}}],line:54},12:{loc:{start:{line:54,column:8},end:{line:54,column:35}},type:"binary-expr",locations:[{start:{line:54,column:8},end:{line:54,column:19}},{start:{line:54,column:23},end:{line:54,column:35}}],line:54},13:{loc:{start:{line:56,column:12},end:{line:75,column:13}},type:"if",locations:[{start:{line:56,column:12},end:{line:75,column:13}},{start:{line:56,column:12},end:{line:75,column:13}}],line:56},14:{loc:{start:{line:57,column:16},end:{line:68,column:17}},type:"if",locations:[{start:{line:57,column:16},end:{line:68,column:17}},{start:{line:57,column:16},end:{line:68,column:17}}],line:57},15:{loc:{start:{line:72,column:16},end:{line:74,column:17}},type:"if",locations:[{start:{line:72,column:16},end:{line:74,column:17}},{start:{line:72,column:16},end:{line:74,column:17}}],line:72}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0},f:{0:0,1:0,2:0,3:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0]},inputSourceMap:{version:3,file:"/Users/bwakeford/Documents/personal/dntd-web/src/controllers/caretController.ts",sourceRoot:"",sources:["/Users/bwakeford/Documents/personal/dntd-web/src/controllers/caretController.ts"],names:[],mappings:"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",sourcesContent:["export const caretController = {\n    getCaretPosition: getCaretPosition,\n    setCaretPosition: setCaretPosition,\n}\n\nfunction node_walk(node: any, func: any): void {\n    var result = func(node)\n    for (node = node.firstChild; result !== false && node; node = node.nextSibling)\n        result = node_walk(node, func)\n    return\n}\n\nfunction getCaretPosition(elem: any) {\n    var sel: any = window.getSelection()\n    var cum_length = [0, 0]\n\n    if (sel.anchorNode == elem) {\n        cum_length = [sel.anchorNode.innerText.length, sel.extentNode.innerText.length]\n    } else {\n        var nodes_to_find = [sel.anchorNode, sel.extentNode]\n        if (!elem.contains(sel.anchorNode) || !elem.contains(sel.extentNode)) {\n            return undefined\n        } else {\n            var found = [0, 0]\n            var i\n            node_walk(elem, function (node: any): void {\n                for (i = 0; i < 2; i++) {\n                    if (node == nodes_to_find[i]) {\n                        found[i] = 1\n                        if (found[i == 0 ? 1 : 0]) {\n                            return\n                        }\n                    }\n                }\n                if (node.textContent && !node.firstChild) {\n                    for (i = 0; i < 2; i++) {\n                        if (!found[i]) {\n                            cum_length[i] += node.textContent.length\n                        }\n                    }\n                }\n            })\n            cum_length[0] += sel.anchorOffset\n            cum_length[1] += sel.extentOffset\n        }\n    }\n    if (cum_length[0] <= cum_length[1]) {\n        return cum_length\n    }\n    return [cum_length[1], cum_length[0]]\n}\n\nfunction setCaretPosition(el: any, pos: any): any {\n    if (el !== null && pos !== null) {\n        for (var node of el.childNodes) {\n            if (node.nodeType == 3) {\n                if (node.length >= pos) {\n                    let range = document.createRange()\n                    let sel: any = window.getSelection()\n                    range.setStart(node, pos)\n                    range.collapse(true)\n                    sel.removeAllRanges()\n                    sel.addRange(range)\n                    return -1\n                } else {\n                    pos -= node.length\n                }\n            } else {\n                pos = setCaretPosition(node, pos)\n                if (pos == -1) {\n                    return -1\n                }\n            }\n        }\n        return pos\n    }\n}\n"]},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},(i=t[r="__coverage__"]||(t[r]={}))[l]&&i[l].hash===o?i[l]:(c.hash=o,i[l]=c));s.s[0]++,Object.defineProperty(e,"__esModule",{value:!0}),s.s[1]++,e.caretController={getCaretPosition:function(n){s.f[1]++;var e=(s.s[6]++,window.getSelection()),A=(s.s[7]++,[0,0]);if(s.s[8]++,e.anchorNode==n)s.b[1][0]++,s.s[9]++,A=[e.anchorNode.innerText.length,e.extentNode.innerText.length];else{s.b[1][1]++;var l=(s.s[10]++,[e.anchorNode,e.extentNode]);if(s.s[11]++,s.b[3][0]++,!n.contains(e.anchorNode)||(s.b[3][1]++,!n.contains(e.extentNode)))return s.b[2][0]++,void s.s[12]++;s.b[2][1]++;var o,t=(s.s[13]++,[0,0]);s.s[14]++,function n(e,A){s.f[0]++;var l=(s.s[2]++,A(e));for(s.s[3]++,e=e.firstChild;s.b[0][0]++,!1!==l&&(s.b[0][1]++,e);e=e.nextSibling)s.s[4]++,l=n(e,A);return void s.s[5]++}(n,(function(n){for(s.f[2]++,s.s[15]++,o=0;o<2;o++)if(s.s[16]++,n==l[o]){if(s.b[4][0]++,s.s[17]++,t[o]=1,s.s[18]++,t[0==o?(s.b[6][0]++,1):(s.b[6][1]++,0)])return s.b[5][0]++,void s.s[19]++;s.b[5][1]++}else s.b[4][1]++;if(s.s[20]++,s.b[8][0]++,n.textContent&&(s.b[8][1]++,!n.firstChild))for(s.b[7][0]++,s.s[21]++,o=0;o<2;o++)s.s[22]++,t[o]?s.b[9][1]++:(s.b[9][0]++,s.s[23]++,A[o]+=n.textContent.length);else s.b[7][1]++})),s.s[24]++,A[0]+=e.anchorOffset,s.s[25]++,A[1]+=e.extentOffset}if(s.s[26]++,A[0]<=A[1])return s.b[10][0]++,s.s[27]++,A;s.b[10][1]++;return s.s[28]++,[A[1],A[0]]},setCaretPosition:function n(e,A){if(s.f[3]++,s.s[29]++,s.b[12][0]++,null!==e&&(s.b[12][1]++,null!==A)){for(var l of(s.b[11][0]++,s.s[30]++,e.childNodes))if(s.s[31]++,3==l.nodeType){if(s.b[13][0]++,s.s[32]++,l.length>=A){s.b[14][0]++;let n=(s.s[33]++,document.createRange()),e=(s.s[34]++,window.getSelection());return s.s[35]++,n.setStart(l,A),s.s[36]++,n.collapse(!0),s.s[37]++,e.removeAllRanges(),s.s[38]++,e.addRange(n),s.s[39]++,-1}s.b[14][1]++,s.s[40]++,A-=l.length}else{if(s.b[13][1]++,s.s[41]++,A=n(l,A),s.s[42]++,-1==A)return s.b[15][0]++,s.s[43]++,-1;s.b[15][1]++}return s.s[44]++,A}s.b[11][1]++}}},function(n,e,A){"use strict";var l,o,t,r,c,i,s=(l="/Users/bwakeford/Documents/personal/dntd-web/src/controllers/searchController.ts",o="f320f7d2651e14998598d38b1fce91234c7822ac",t=new(0,function(){}.constructor)("return this")(),c={path:"/Users/bwakeford/Documents/personal/dntd-web/src/controllers/searchController.ts",statementMap:{0:{start:{line:2,column:0},end:{line:2,column:62}},1:{start:{line:3,column:12},end:{line:3,column:25}},2:{start:{line:4,column:16},end:{line:4,column:35}},3:{start:{line:5,column:20},end:{line:5,column:43}},4:{start:{line:6,column:26},end:{line:6,column:54}},5:{start:{line:7,column:0},end:{line:12,column:2}},6:{start:{line:14,column:4},end:{line:14,column:80}},7:{start:{line:17,column:4},end:{line:17,column:57}},8:{start:{line:18,column:4},end:{line:18,column:74}},9:{start:{line:19,column:4},end:{line:19,column:95}},10:{start:{line:22,column:24},end:{line:22,column:33}},11:{start:{line:23,column:25},end:{line:23,column:34}},12:{start:{line:24,column:4},end:{line:38,column:5}},13:{start:{line:25,column:8},end:{line:37,column:9}},14:{start:{line:26,column:22},end:{line:26,column:50}},15:{start:{line:27,column:12},end:{line:29,column:13}},16:{start:{line:28,column:16},end:{line:28,column:44}},17:{start:{line:32,column:22},end:{line:32,column:66}},18:{start:{line:33,column:12},end:{line:35,column:13}},19:{start:{line:34,column:16},end:{line:34,column:44}},20:{start:{line:36,column:12},end:{line:36,column:46}},21:{start:{line:39,column:4},end:{line:39,column:74}},22:{start:{line:40,column:4},end:{line:40,column:83}},23:{start:{line:41,column:4},end:{line:41,column:19}},24:{start:{line:44,column:4},end:{line:48,column:5}},25:{start:{line:45,column:8},end:{line:47,column:9}},26:{start:{line:46,column:12},end:{line:46,column:64}},27:{start:{line:49,column:4},end:{line:53,column:5}},28:{start:{line:50,column:8},end:{line:52,column:9}},29:{start:{line:51,column:12},end:{line:51,column:58}},30:{start:{line:54,column:4},end:{line:58,column:5}},31:{start:{line:55,column:8},end:{line:57,column:9}},32:{start:{line:55,column:78},end:{line:55,column:113}},33:{start:{line:55,column:95},end:{line:55,column:112}},34:{start:{line:56,column:12},end:{line:56,column:58}},35:{start:{line:61,column:26},end:{line:61,column:28}},36:{start:{line:62,column:4},end:{line:73,column:5}},37:{start:{line:63,column:8},end:{line:63,column:61}},38:{start:{line:64,column:8},end:{line:64,column:86}},39:{start:{line:64,column:60},end:{line:64,column:82}},40:{start:{line:67,column:8},end:{line:67,column:60}},41:{start:{line:68,column:8},end:{line:68,column:42}},42:{start:{line:69,column:8},end:{line:72,column:9}},43:{start:{line:70,column:12},end:{line:70,column:63}},44:{start:{line:71,column:12},end:{line:71,column:46}},45:{start:{line:74,column:4},end:{line:74,column:27}},46:{start:{line:77,column:16},end:{line:77,column:37}},47:{start:{line:78,column:24},end:{line:78,column:31}},48:{start:{line:79,column:26},end:{line:79,column:28}},49:{start:{line:80,column:4},end:{line:93,column:5}},50:{start:{line:81,column:8},end:{line:92,column:9}},51:{start:{line:83,column:16},end:{line:85,column:17}},52:{start:{line:83,column:48},end:{line:83,column:67}},53:{start:{line:84,column:20},end:{line:84,column:57}},54:{start:{line:86,column:16},end:{line:86,column:22}},55:{start:{line:88,column:16},end:{line:90,column:17}},56:{start:{line:88,column:47},end:{line:88,column:66}},57:{start:{line:89,column:20},end:{line:89,column:57}},58:{start:{line:91,column:16},end:{line:91,column:22}},59:{start:{line:94,column:4},end:{line:94,column:27}},60:{start:{line:97,column:4},end:{line:108,column:5}},61:{start:{line:98,column:8},end:{line:98,column:64}},62:{start:{line:100,column:9},end:{line:108,column:5}},63:{start:{line:101,column:8},end:{line:101,column:62}},64:{start:{line:103,column:9},end:{line:108,column:5}},65:{start:{line:104,column:8},end:{line:104,column:51}},66:{start:{line:107,column:8},end:{line:107,column:48}}},fnMap:{0:{name:"updateSearchbar",decl:{start:{line:13,column:9},end:{line:13,column:24}},loc:{start:{line:13,column:34},end:{line:15,column:1}},line:13},1:{name:"reset",decl:{start:{line:16,column:9},end:{line:16,column:14}},loc:{start:{line:16,column:17},end:{line:20,column:1}},line:16},2:{name:"buildRefines",decl:{start:{line:21,column:9},end:{line:21,column:21}},loc:{start:{line:21,column:31},end:{line:42,column:1}},line:21},3:{name:"cleanRefines",decl:{start:{line:43,column:9},end:{line:43,column:21}},loc:{start:{line:43,column:24},end:{line:59,column:1}},line:43},4:{name:"(anonymous_4)",decl:{start:{line:55,column:70},end:{line:55,column:71}},loc:{start:{line:55,column:78},end:{line:55,column:113}},line:55},5:{name:"(anonymous_5)",decl:{start:{line:55,column:88},end:{line:55,column:89}},loc:{start:{line:55,column:95},end:{line:55,column:112}},line:55},6:{name:"filteredEntries",decl:{start:{line:60,column:9},end:{line:60,column:24}},loc:{start:{line:60,column:34},end:{line:75,column:1}},line:60},7:{name:"(anonymous_7)",decl:{start:{line:64,column:38},end:{line:64,column:39}},loc:{start:{line:64,column:58},end:{line:64,column:84}},line:64},8:{name:"search",decl:{start:{line:76,column:9},end:{line:76,column:15}},loc:{start:{line:76,column:25},end:{line:95,column:1}},line:76},9:{name:"(anonymous_9)",decl:{start:{line:83,column:39},end:{line:83,column:40}},loc:{start:{line:83,column:48},end:{line:83,column:67}},line:83},10:{name:"(anonymous_10)",decl:{start:{line:88,column:38},end:{line:88,column:39}},loc:{start:{line:88,column:47},end:{line:88,column:66}},line:88},11:{name:"match",decl:{start:{line:96,column:9},end:{line:96,column:14}},loc:{start:{line:96,column:29},end:{line:109,column:1}},line:96}},branchMap:{0:{loc:{start:{line:25,column:8},end:{line:37,column:9}},type:"if",locations:[{start:{line:25,column:8},end:{line:37,column:9}},{start:{line:25,column:8},end:{line:37,column:9}}],line:25},1:{loc:{start:{line:27,column:12},end:{line:29,column:13}},type:"if",locations:[{start:{line:27,column:12},end:{line:29,column:13}},{start:{line:27,column:12},end:{line:29,column:13}}],line:27},2:{loc:{start:{line:33,column:12},end:{line:35,column:13}},type:"if",locations:[{start:{line:33,column:12},end:{line:35,column:13}},{start:{line:33,column:12},end:{line:35,column:13}}],line:33},3:{loc:{start:{line:45,column:8},end:{line:47,column:9}},type:"if",locations:[{start:{line:45,column:8},end:{line:47,column:9}},{start:{line:45,column:8},end:{line:47,column:9}}],line:45},4:{loc:{start:{line:50,column:8},end:{line:52,column:9}},type:"if",locations:[{start:{line:50,column:8},end:{line:52,column:9}},{start:{line:50,column:8},end:{line:52,column:9}}],line:50},5:{loc:{start:{line:55,column:8},end:{line:57,column:9}},type:"if",locations:[{start:{line:55,column:8},end:{line:57,column:9}},{start:{line:55,column:8},end:{line:57,column:9}}],line:55},6:{loc:{start:{line:62,column:4},end:{line:73,column:5}},type:"if",locations:[{start:{line:62,column:4},end:{line:73,column:5}},{start:{line:62,column:4},end:{line:73,column:5}}],line:62},7:{loc:{start:{line:69,column:8},end:{line:72,column:9}},type:"if",locations:[{start:{line:69,column:8},end:{line:72,column:9}},{start:{line:69,column:8},end:{line:72,column:9}}],line:69},8:{loc:{start:{line:81,column:8},end:{line:92,column:9}},type:"switch",locations:[{start:{line:82,column:12},end:{line:86,column:22}},{start:{line:87,column:12},end:{line:91,column:22}}],line:81},9:{loc:{start:{line:83,column:16},end:{line:85,column:17}},type:"if",locations:[{start:{line:83,column:16},end:{line:85,column:17}},{start:{line:83,column:16},end:{line:85,column:17}}],line:83},10:{loc:{start:{line:88,column:16},end:{line:90,column:17}},type:"if",locations:[{start:{line:88,column:16},end:{line:90,column:17}},{start:{line:88,column:16},end:{line:90,column:17}}],line:88},11:{loc:{start:{line:97,column:4},end:{line:108,column:5}},type:"if",locations:[{start:{line:97,column:4},end:{line:108,column:5}},{start:{line:97,column:4},end:{line:108,column:5}}],line:97},12:{loc:{start:{line:97,column:8},end:{line:97,column:54}},type:"binary-expr",locations:[{start:{line:97,column:8},end:{line:97,column:30}},{start:{line:97,column:34},end:{line:97,column:54}}],line:97},13:{loc:{start:{line:100,column:9},end:{line:108,column:5}},type:"if",locations:[{start:{line:100,column:9},end:{line:108,column:5}},{start:{line:100,column:9},end:{line:108,column:5}}],line:100},14:{loc:{start:{line:103,column:9},end:{line:108,column:5}},type:"if",locations:[{start:{line:103,column:9},end:{line:108,column:5}},{start:{line:103,column:9},end:{line:108,column:5}}],line:103},15:{loc:{start:{line:103,column:13},end:{line:103,column:58}},type:"binary-expr",locations:[{start:{line:103,column:13},end:{line:103,column:34}},{start:{line:103,column:38},end:{line:103,column:58}}],line:103}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0]},inputSourceMap:{version:3,file:"/Users/bwakeford/Documents/personal/dntd-web/src/controllers/searchController.ts",sourceRoot:"",sources:["/Users/bwakeford/Documents/personal/dntd-web/src/controllers/searchController.ts"],names:[],mappings:"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",sourcesContent:['import { searchModel } from ".."\nimport { SearchType } from "../types"\nimport { entryFactory } from "../factories"\nimport { entryController } from "./entryController"\nimport { TagModel, JournalModel, JournalEntryModel } from "../models"\n\nexport const searchController = {\n    reset: reset,\n    buildRefines: buildRefines,\n    filteredEntries: filteredEntries,\n    updateSearchbar: updateSearchbar,\n}\n\nfunction updateSearchbar(content: string) {\n    entryController.update(searchModel.barQuery, content)\n}\n\nfunction reset() {\n    searchModel.searchType = SearchType.NONE\n    searchModel.barQuery = entryFactory.createBaseEntry()\n    searchModel.refinesQuery = { keys: new Set(), vals: new Map(), simpleKeys: new Map() }\n}\n\nfunction buildRefines(journal: JournalModel) {\n    let simpleRefines: Map<string, TagModel> = new Map()\n    let complexRefines: Map<string, TagModel[]> = new Map()\n\n    for (let tag of journal.tags.values()) {\n        if (tag.val === null) {\n            let key = `${tag.flag}${tag.cleanKey}`\n            if (!simpleRefines.has(key)) {\n                simpleRefines.set(key, tag)\n            }\n        } else {\n            let key = `${tag.flag}${tag.cleanKey}${tag.separator}`\n            if (!complexRefines.has(key)) { complexRefines.set(key, []) }\n            complexRefines.get(key)!.push(tag)\n        }\n    }\n\n    searchModel.simpleRefines = new Map([...simpleRefines.entries()])\n    searchModel.complexRefines = new Map([...complexRefines.entries()].sort())\n\n    cleanRefines()\n}\n\nfunction cleanRefines() {\n    // Clean stale simple tag key (refine val) selections\n    for (let [key,] of searchModel.refinesQuery.simpleKeys) {\n        if (!searchModel.simpleRefines.has(key)) {\n            searchModel.refinesQuery.simpleKeys.delete(key)\n        }\n    }\n\n    // Clean stale complex tag key selections\n    for (let key of searchModel.refinesQuery.keys) {\n        if (!searchModel.complexRefines.has(key)) {\n            searchModel.refinesQuery.keys.delete(key)\n        }\n    }\n\n    // Clean stale complex tag val\n    for (let [key,] of searchModel.refinesQuery.vals) {\n        if (!Array.from(searchModel.complexRefines.values()).some(tags => tags.some(tag => tag.clean === key))) {\n            searchModel.refinesQuery.vals.delete(key)\n        }\n    }\n}\n\nfunction filteredEntries(entries: { id: number, entry: JournalEntryModel }[]): { idx: number, entry: JournalEntryModel }[] {\n    let filteredEntries: { idx: number, entry: JournalEntryModel }[] = []\n    if (searchModel.query.tokens.length === 0) {\n        searchModel.searchType = SearchType.NONE\n        filteredEntries = entries.map(({ entry }, idx) => { return { idx, entry } })\n    } else {\n        searchModel.searchType = SearchType.AND\n        filteredEntries = search(entries)\n        if (filteredEntries.length === 0) {\n            searchModel.searchType = SearchType.OR\n            filteredEntries = search(entries)\n        }\n    }\n    return filteredEntries\n}\n\nfunction search(entries: { id: number, entry: JournalEntryModel }[]): { idx: number, entry: JournalEntryModel }[] {\n    let query = searchModel.query\n    let sourceEntries = entries\n    let filteredEntries: { idx: number, entry: JournalEntryModel }[] = []\n    for (let [idx, { entry }] of sourceEntries.entries()) {\n        switch (searchModel.searchType) {\n            case SearchType.AND:\n                if (query.tokens.every(token => match(token, entry))) {\n                    filteredEntries.push({ idx, entry })\n                }\n                break\n            case SearchType.OR:\n                if (query.tokens.some(token => match(token, entry))) {\n                    filteredEntries.push({ idx, entry })\n                }\n                break\n        }\n    }\n    return filteredEntries\n}\n\nfunction match(token: string, entry: JournalEntryModel) {\n\n    if (token.startsWith("-@") && !token.endsWith(":")) {\n        return entry.tags.get(token.substring(1)) === undefined\n    } else if (token.startsWith("-")) {\n        return !entry.savedClean.includes(token.substring(1))\n    } else if (token.startsWith("@") && !token.endsWith(":")) {\n        return entry.tags.get(token) !== undefined\n    } else {\n        return entry.savedClean.includes(token)\n    }\n}\n']},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},(i=t[r="__coverage__"]||(t[r]={}))[l]&&i[l].hash===o?i[l]:(c.hash=o,i[l]=c));s.s[0]++,Object.defineProperty(e,"__esModule",{value:!0});const u=(s.s[1]++,A(3)),a=(s.s[2]++,A(1)),C=(s.s[3]++,A(5)),m=(s.s[4]++,A(15));function d(n){s.f[8]++;let e=(s.s[46]++,u.searchModel.query),A=(s.s[47]++,n),l=(s.s[48]++,[]);s.s[49]++;for(let[n,{entry:o}]of A.entries())switch(s.s[50]++,u.searchModel.searchType){case a.SearchType.AND:s.b[8][0]++,s.s[51]++,e.tokens.every(n=>(s.f[9]++,s.s[52]++,f(n,o)))?(s.b[9][0]++,s.s[53]++,l.push({idx:n,entry:o})):s.b[9][1]++,s.s[54]++;break;case a.SearchType.OR:s.b[8][1]++,s.s[55]++,e.tokens.some(n=>(s.f[10]++,s.s[56]++,f(n,o)))?(s.b[10][0]++,s.s[57]++,l.push({idx:n,entry:o})):s.b[10][1]++,s.s[58]++}return s.s[59]++,l}function f(n,e){return s.f[11]++,s.s[60]++,s.b[12][0]++,n.startsWith("-@")&&(s.b[12][1]++,!n.endsWith(":"))?(s.b[11][0]++,s.s[61]++,void 0===e.tags.get(n.substring(1))):(s.b[11][1]++,s.s[62]++,n.startsWith("-")?(s.b[13][0]++,s.s[63]++,!e.savedClean.includes(n.substring(1))):(s.b[13][1]++,s.s[64]++,s.b[15][0]++,n.startsWith("@")&&(s.b[15][1]++,!n.endsWith(":"))?(s.b[14][0]++,s.s[65]++,void 0!==e.tags.get(n)):(s.b[14][1]++,s.s[66]++,e.savedClean.includes(n))))}s.s[5]++,e.searchController={reset:function(){s.f[1]++,s.s[7]++,u.searchModel.searchType=a.SearchType.NONE,s.s[8]++,u.searchModel.barQuery=C.entryFactory.createBaseEntry(),s.s[9]++,u.searchModel.refinesQuery={keys:new Set,vals:new Map,simpleKeys:new Map}},buildRefines:function(n){s.f[2]++;let e=(s.s[10]++,new Map),A=(s.s[11]++,new Map);s.s[12]++;for(let l of n.tags.values())if(s.s[13]++,null===l.val){s.b[0][0]++;let n=(s.s[14]++,`${l.flag}${l.cleanKey}`);s.s[15]++,e.has(n)?s.b[1][1]++:(s.b[1][0]++,s.s[16]++,e.set(n,l))}else{s.b[0][1]++;let n=(s.s[17]++,`${l.flag}${l.cleanKey}${l.separator}`);s.s[18]++,A.has(n)?s.b[2][1]++:(s.b[2][0]++,s.s[19]++,A.set(n,[])),s.s[20]++,A.get(n).push(l)}s.s[21]++,u.searchModel.simpleRefines=new Map([...e.entries()]),s.s[22]++,u.searchModel.complexRefines=new Map([...A.entries()].sort()),s.s[23]++,function(){s.f[3]++,s.s[24]++;for(let[n]of u.searchModel.refinesQuery.simpleKeys)s.s[25]++,u.searchModel.simpleRefines.has(n)?s.b[3][1]++:(s.b[3][0]++,s.s[26]++,u.searchModel.refinesQuery.simpleKeys.delete(n));s.s[27]++;for(let n of u.searchModel.refinesQuery.keys)s.s[28]++,u.searchModel.complexRefines.has(n)?s.b[4][1]++:(s.b[4][0]++,s.s[29]++,u.searchModel.refinesQuery.keys.delete(n));s.s[30]++;for(let[n]of u.searchModel.refinesQuery.vals)s.s[31]++,Array.from(u.searchModel.complexRefines.values()).some(e=>(s.f[4]++,s.s[32]++,e.some(e=>(s.f[5]++,s.s[33]++,e.clean===n))))?s.b[5][1]++:(s.b[5][0]++,s.s[34]++,u.searchModel.refinesQuery.vals.delete(n))}()},filteredEntries:function(n){s.f[6]++;let e=(s.s[35]++,[]);s.s[36]++,0===u.searchModel.query.tokens.length?(s.b[6][0]++,s.s[37]++,u.searchModel.searchType=a.SearchType.NONE,s.s[38]++,e=n.map(({entry:n},e)=>(s.f[7]++,s.s[39]++,{idx:e,entry:n}))):(s.b[6][1]++,s.s[40]++,u.searchModel.searchType=a.SearchType.AND,s.s[41]++,e=d(n),s.s[42]++,0===e.length?(s.b[7][0]++,s.s[43]++,u.searchModel.searchType=a.SearchType.OR,s.s[44]++,e=d(n)):s.b[7][1]++);return s.s[45]++,e},updateSearchbar:function(n){s.f[0]++,s.s[6]++,m.entryController.update(u.searchModel.barQuery,n)}}},function(n,e,A){"use strict";var l,o,t,r,c,i,s=(l="/Users/bwakeford/Documents/personal/dntd-web/src/controllers/googleController.ts",o="0f36a1b67df4c076d9e3f56baadebe4efae55da7",t=new(0,function(){}.constructor)("return this")(),c={path:"/Users/bwakeford/Documents/personal/dntd-web/src/controllers/googleController.ts",statementMap:{0:{start:{line:2,column:16},end:{line:10,column:1}},1:{start:{line:3,column:28},end:{line:3,column:110}},2:{start:{line:3,column:91},end:{line:3,column:106}},3:{start:{line:4,column:4},end:{line:9,column:7}},4:{start:{line:5,column:36},end:{line:5,column:97}},5:{start:{line:5,column:42},end:{line:5,column:70}},6:{start:{line:5,column:85},end:{line:5,column:95}},7:{start:{line:6,column:35},end:{line:6,column:100}},8:{start:{line:6,column:41},end:{line:6,column:73}},9:{start:{line:6,column:88},end:{line:6,column:98}},10:{start:{line:7,column:32},end:{line:7,column:116}},11:{start:{line:8,column:8},end:{line:8,column:78}},12:{start:{line:11,column:22},end:{line:13,column:1}},13:{start:{line:12,column:4},end:{line:12,column:62}},14:{start:{line:14,column:0},end:{line:14,column:62}},15:{start:{line:15,column:18},end:{line:15,column:53}},16:{start:{line:16,column:16},end:{line:16,column:35}},17:{start:{line:17,column:16},end:{line:17,column:35}},18:{start:{line:18,column:12},end:{line:18,column:25}},19:{start:{line:19,column:22},end:{line:19,column:47}},20:{start:{line:20,column:0},end:{line:24,column:2}},21:{start:{line:26,column:4},end:{line:26,column:60}},22:{start:{line:29,column:4},end:{line:29,column:59}},23:{start:{line:32,column:16},end:{line:32,column:96}},24:{start:{line:33,column:4},end:{line:33,column:34}},25:{start:{line:34,column:4},end:{line:41,column:7}},26:{start:{line:35,column:8},end:{line:40,column:11}},27:{start:{line:38,column:12},end:{line:38,column:88}},28:{start:{line:39,column:12},end:{line:39,column:89}},29:{start:{line:44,column:4},end:{line:55,column:7}},30:{start:{line:45,column:8},end:{line:45,column:46}},31:{start:{line:46,column:8},end:{line:53,column:9}},32:{start:{line:47,column:12},end:{line:47,column:99}},33:{start:{line:48,column:12},end:{line:48,column:77}},34:{start:{line:49,column:12},end:{line:49,column:58}},35:{start:{line:52,column:12},end:{line:52,column:60}},36:{start:{line:54,column:8},end:{line:54,column:35}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:2,column:44},end:{line:2,column:45}},loc:{start:{line:2,column:89},end:{line:10,column:1}},line:2},1:{name:"adopt",decl:{start:{line:3,column:13},end:{line:3,column:18}},loc:{start:{line:3,column:26},end:{line:3,column:112}},line:3},2:{name:"(anonymous_2)",decl:{start:{line:3,column:70},end:{line:3,column:71}},loc:{start:{line:3,column:89},end:{line:3,column:108}},line:3},3:{name:"(anonymous_3)",decl:{start:{line:4,column:36},end:{line:4,column:37}},loc:{start:{line:4,column:63},end:{line:9,column:5}},line:4},4:{name:"fulfilled",decl:{start:{line:5,column:17},end:{line:5,column:26}},loc:{start:{line:5,column:34},end:{line:5,column:99}},line:5},5:{name:"rejected",decl:{start:{line:6,column:17},end:{line:6,column:25}},loc:{start:{line:6,column:33},end:{line:6,column:102}},line:6},6:{name:"step",decl:{start:{line:7,column:17},end:{line:7,column:21}},loc:{start:{line:7,column:30},end:{line:7,column:118}},line:7},7:{name:"(anonymous_7)",decl:{start:{line:11,column:56},end:{line:11,column:57}},loc:{start:{line:11,column:71},end:{line:13,column:1}},line:11},8:{name:"signOut",decl:{start:{line:25,column:9},end:{line:25,column:16}},loc:{start:{line:25,column:19},end:{line:27,column:1}},line:25},9:{name:"signIn",decl:{start:{line:28,column:9},end:{line:28,column:15}},loc:{start:{line:28,column:18},end:{line:30,column:1}},line:28},10:{name:"initGapi",decl:{start:{line:31,column:9},end:{line:31,column:17}},loc:{start:{line:31,column:20},end:{line:42,column:1}},line:31},11:{name:"(anonymous_11)",decl:{start:{line:34,column:40},end:{line:34,column:41}},loc:{start:{line:34,column:46},end:{line:41,column:5}},line:34},12:{name:"(anonymous_12)",decl:{start:{line:37,column:16},end:{line:37,column:17}},loc:{start:{line:37,column:22},end:{line:40,column:9}},line:37},13:{name:"isSignedIn",decl:{start:{line:43,column:9},end:{line:43,column:19}},loc:{start:{line:43,column:30},end:{line:56,column:1}},line:43},14:{name:"(anonymous_14)",decl:{start:{line:44,column:43},end:{line:44,column:44}},loc:{start:{line:44,column:56},end:{line:55,column:5}},line:44}},branchMap:{0:{loc:{start:{line:2,column:16},end:{line:10,column:1}},type:"binary-expr",locations:[{start:{line:2,column:17},end:{line:2,column:21}},{start:{line:2,column:25},end:{line:2,column:39}},{start:{line:2,column:44},end:{line:10,column:1}}],line:2},1:{loc:{start:{line:3,column:35},end:{line:3,column:109}},type:"cond-expr",locations:[{start:{line:3,column:56},end:{line:3,column:61}},{start:{line:3,column:64},end:{line:3,column:109}}],line:3},2:{loc:{start:{line:4,column:16},end:{line:4,column:34}},type:"binary-expr",locations:[{start:{line:4,column:16},end:{line:4,column:17}},{start:{line:4,column:22},end:{line:4,column:33}}],line:4},3:{loc:{start:{line:7,column:32},end:{line:7,column:115}},type:"cond-expr",locations:[{start:{line:7,column:46},end:{line:7,column:67}},{start:{line:7,column:70},end:{line:7,column:115}}],line:7},4:{loc:{start:{line:8,column:51},end:{line:8,column:67}},type:"binary-expr",locations:[{start:{line:8,column:51},end:{line:8,column:61}},{start:{line:8,column:65},end:{line:8,column:67}}],line:8},5:{loc:{start:{line:11,column:22},end:{line:13,column:1}},type:"binary-expr",locations:[{start:{line:11,column:23},end:{line:11,column:27}},{start:{line:11,column:31},end:{line:11,column:51}},{start:{line:11,column:56},end:{line:13,column:1}}],line:11},6:{loc:{start:{line:12,column:11},end:{line:12,column:61}},type:"cond-expr",locations:[{start:{line:12,column:37},end:{line:12,column:40}},{start:{line:12,column:43},end:{line:12,column:61}}],line:12},7:{loc:{start:{line:12,column:12},end:{line:12,column:33}},type:"binary-expr",locations:[{start:{line:12,column:12},end:{line:12,column:15}},{start:{line:12,column:19},end:{line:12,column:33}}],line:12},8:{loc:{start:{line:32,column:16},end:{line:32,column:96}},type:"cond-expr",locations:[{start:{line:32,column:67},end:{line:32,column:71}},{start:{line:32,column:74},end:{line:32,column:96}}],line:32},9:{loc:{start:{line:46,column:8},end:{line:53,column:9}},type:"if",locations:[{start:{line:46,column:8},end:{line:53,column:9}},{start:{line:46,column:8},end:{line:53,column:9}}],line:46}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0},b:{0:[0,0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0]},inputSourceMap:{version:3,file:"/Users/bwakeford/Documents/personal/dntd-web/src/controllers/googleController.ts",sourceRoot:"",sources:["/Users/bwakeford/Documents/personal/dntd-web/src/controllers/googleController.ts"],names:[],mappings:";;;;;;;;;;;;;;AAAA,sDAAuB;AACvB,oCAAmC;AACnC,oCAAmC;AACnC,0BAA0C;AAC1C,gDAAoE;AAEvD,QAAA,gBAAgB,GAAG;IAC5B,MAAM,EAAE,MAAM;IACd,OAAO,EAAE,OAAO;IAChB,QAAQ,EAAE,QAAQ;CACrB,CAAA;AAED,SAAS,OAAO;IACZ,eAAW,CAAC,KAAM,CAAC,KAAK,CAAC,eAAe,EAAE,CAAC,OAAO,EAAE,CAAA;AACxD,CAAC;AAED,SAAS,MAAM;IACX,eAAW,CAAC,KAAM,CAAC,KAAK,CAAC,eAAe,EAAE,CAAC,MAAM,EAAE,CAAA;AACvD,CAAC;AAED,SAAS,QAAQ;IACb,IAAI,KAAK,GAAG,CAAC,YAAQ,CAAC,QAAQ,KAAK,gBAAQ,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,gBAAQ,EAAE,CAAA;IACxE,eAAW,CAAC,KAAK,GAAG,KAAK,CAAA;IACzB,eAAW,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,EAAE,GAAG,EAAE;QACjC,eAAW,CAAC,KAAM,CAAC,KAAK,CAAC,IAAI,CAAC;YAC1B,KAAK,EAAE,eAAW,CAAC,KAAK,EAAE,SAAS,EAAE,eAAW,CAAC,QAAQ;SAC5D,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE;YACT,eAAW,CAAC,KAAM,CAAC,KAAK,CAAC,eAAe,EAAE,CAAC,UAAU,CAAC,MAAM,CAAC,UAAU,CAAC,CAAA;YACxE,UAAU,CAAC,CAAC,eAAW,CAAC,KAAM,CAAC,KAAK,CAAC,eAAe,EAAE,CAAC,UAAU,CAAC,GAAG,EAAE,CAAC,CAAC,CAAA;QAC7E,CAAC,CAAC,CAAA;IACN,CAAC,CAAC,CAAA;AACN,CAAC;AAED,SAAe,UAAU,CAAC,QAAiB;;QACvC,eAAW,CAAC,UAAU,GAAG,QAAQ,CAAA;QACjC,IAAI,eAAW,CAAC,UAAU,EAAE;YACxB,eAAW,CAAC,IAAI,GAAG,eAAW,CAAC,KAAM,CAAC,KAAK,CAAC,eAAe,EAAE,CAAC,WAAW,CAAC,GAAG,EAAE,CAAA;YAC/E,8BAAgB,CAAC,UAAU,CAAC,eAAW,CAAC,KAAK,CAAC,CAAA;YAC9C,+BAAiB,CAAC,WAAW,EAAE,CAAA;SAClC;aAAM;YACH,+BAAiB,CAAC,aAAa,EAAE,CAAA;SACpC;QACD,iBAAC,CAAC,MAAM,EAAE,CAAA;IAOd,CAAC;CAAA",sourcesContent:['import m from "mithril"\r\nimport { MockGapi } from "../mocks"\r\nimport { TestMode } from "../types"\r\nimport { googleModel, urlModel } from ".."\r\nimport { syncerController, libraryController } from "../controllers"\r\n\r\nexport const googleController = {\r\n    signIn: signIn,\r\n    signOut: signOut,\r\n    initGapi: initGapi,\r\n}\r\n\r\nfunction signOut() {\r\n    googleModel.gapi_!.auth2.getAuthInstance().signOut()\r\n}\r\n\r\nfunction signIn() {\r\n    googleModel.gapi_!.auth2.getAuthInstance().signIn()\r\n}\r\n\r\nfunction initGapi() {\r\n    let gapi_ = (urlModel.testMode === TestMode.OFF) ? gapi : new MockGapi()\r\n    googleModel.gapi_ = gapi_\r\n    googleModel.gapi_.load(\'auth2\', () => {\r\n        googleModel.gapi_!.auth2.init({\r\n            scope: googleModel.scope, client_id: googleModel.clientId\r\n        }).then(() => {\r\n            googleModel.gapi_!.auth2.getAuthInstance().isSignedIn.listen(isSignedIn)\r\n            isSignedIn((googleModel.gapi_!.auth2.getAuthInstance().isSignedIn.get()))\r\n        })\r\n    })\r\n}\r\n\r\nasync function isSignedIn(signedIn: boolean) {\r\n    googleModel.isSignedIn = signedIn\r\n    if (googleModel.isSignedIn) {\r\n        googleModel.user = googleModel.gapi_!.auth2.getAuthInstance().currentUser.get()\r\n        syncerController.updateAuth(googleModel.token)\r\n        libraryController.loadShelves()\r\n    } else {\r\n        libraryController.removeShelves()\r\n    }\r\n    m.redraw()\r\n\r\n    // if (getTestMode() === TestMode.DEMO) {\r\n    //     journal.isSignedIn = true\r\n    //     journal.load("https://docs.google.com/spreadsheets/d/demo/edit")\r\n    //     return []\r\n    // }\r\n}\r\n']},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},(i=t[r="__coverage__"]||(t[r]={}))[l]&&i[l].hash===o?i[l]:(c.hash=o,i[l]=c)),u=(s.s[0]++,s.b[0][0]++,this&&(s.b[0][1]++,this.__awaiter)||(s.b[0][2]++,function(n,e,A,l){return s.f[0]++,s.s[3]++,new(s.b[2][0]++,A||(s.b[2][1]++,A=Promise))((function(o,t){function r(n){s.f[4]++,s.s[4]++;try{s.s[5]++,i(l.next(n))}catch(n){s.s[6]++,t(n)}}function c(n){s.f[5]++,s.s[7]++;try{s.s[8]++,i(l.throw(n))}catch(n){s.s[9]++,t(n)}}function i(n){var e;s.f[6]++,s.s[10]++,n.done?(s.b[3][0]++,o(n.value)):(s.b[3][1]++,(e=n.value,s.f[1]++,s.s[1]++,e instanceof A?(s.b[1][0]++,e):(s.b[1][1]++,new A((function(n){s.f[2]++,s.s[2]++,n(e)})))).then(r,c))}s.f[3]++,s.s[11]++,i((l=l.apply(n,(s.b[4][0]++,e||(s.b[4][1]++,[])))).next())}))})),a=(s.s[12]++,s.b[5][0]++,this&&(s.b[5][1]++,this.__importDefault)||(s.b[5][2]++,function(n){return s.f[7]++,s.s[13]++,s.b[7][0]++,n&&(s.b[7][1]++,n.__esModule)?(s.b[6][0]++,n):(s.b[6][1]++,{default:n})}));s.s[14]++,Object.defineProperty(e,"__esModule",{value:!0});const C=(s.s[15]++,a(A(0))),m=(s.s[16]++,A(40)),d=(s.s[17]++,A(1)),f=(s.s[18]++,A(3)),E=(s.s[19]++,A(2));function p(n){return s.f[13]++,s.s[29]++,u(this,void 0,void 0,(function*(){s.f[14]++,s.s[30]++,f.googleModel.isSignedIn=n,s.s[31]++,f.googleModel.isSignedIn?(s.b[9][0]++,s.s[32]++,f.googleModel.user=f.googleModel.gapi_.auth2.getAuthInstance().currentUser.get(),s.s[33]++,E.syncerController.updateAuth(f.googleModel.token),s.s[34]++,E.libraryController.loadShelves()):(s.b[9][1]++,s.s[35]++,E.libraryController.removeShelves()),s.s[36]++,C.default.redraw()}))}s.s[20]++,e.googleController={signIn:function(){s.f[9]++,s.s[22]++,f.googleModel.gapi_.auth2.getAuthInstance().signIn()},signOut:function(){s.f[8]++,s.s[21]++,f.googleModel.gapi_.auth2.getAuthInstance().signOut()},initGapi:function(){s.f[10]++;let n=(s.s[23]++,f.urlModel.testMode===d.TestMode.OFF?(s.b[8][0]++,gapi):(s.b[8][1]++,new m.MockGapi));s.s[24]++,f.googleModel.gapi_=n,s.s[25]++,f.googleModel.gapi_.load("auth2",()=>{s.f[11]++,s.s[26]++,f.googleModel.gapi_.auth2.init({scope:f.googleModel.scope,client_id:f.googleModel.clientId}).then(()=>{s.f[12]++,s.s[27]++,f.googleModel.gapi_.auth2.getAuthInstance().isSignedIn.listen(p),s.s[28]++,p(f.googleModel.gapi_.auth2.getAuthInstance().isSignedIn.get())})})}}},function(n,e,A){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(n){for(var A in n)e.hasOwnProperty(A)||(e[A]=n[A])}(A(41))},function(n,e,A){"use strict";var l=this&&this.__awaiter||function(n,e,A,l){return new(A||(A=Promise))((function(o,t){function r(n){try{i(l.next(n))}catch(n){t(n)}}function c(n){try{i(l.throw(n))}catch(n){t(n)}}function i(n){var e;n.done?o(n.value):(e=n.value,e instanceof A?e:new A((function(n){n(e)}))).then(r,c)}i((l=l.apply(n,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});e.MockGapi=class{constructor(){this.auth2=new o}load(n,e){e()}};class o{getAuthInstance(){return new c}init(n){return l(this,void 0,void 0,(function*(){}))}}class t{get(){return new r}}class r{getAuthResponse(){return{expires_in:9999,access_token:"faketoken"}}reloadAuthResponse(){return l(this,void 0,void 0,(function*(){return{expires_in:9999,access_token:"faketoken"}}))}}e.MockGoogleUser=r;class c{constructor(){this.isSignedIn=new i,this.currentUser=new t}signOut(){}signIn(){}}class i{constructor(){this.listen=n=>{},this.get=()=>!0}}},function(n,e,A){"use strict";var l=this&&this.__awaiter||function(n,e,A,l){return new(A||(A=Promise))((function(o,t){function r(n){try{i(l.next(n))}catch(n){t(n)}}function c(n){try{i(l.throw(n))}catch(n){t(n)}}function i(n){var e;n.done?o(n.value):(e=n.value,e instanceof A?e:new A((function(n){n(e)}))).then(r,c)}i((l=l.apply(n,e||[])).next())}))},o=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(e,"__esModule",{value:!0});const t=o(A(0)),r=A(9),c=A(3),i=A(1),s=new Worker("./js/syncWebWorker.js");function u(n){if(void 0!==n)return c.syncerModel.pushSyncerTask({type:i.SyncerPayloadType.AUTH_UPDATE,token:n},s)}s.onmessage=n=>function(n){let{id:e,payload:A,error:l}=n.data;if(null!==e&&c.syncerModel.requests.has(e))c.syncerModel.requests.get(e)({payload:A,error:l}),c.syncerModel.requests.delete(e);else switch(A.type){case i.SyncerPayloadType.SYNC_STATE:c.syncerModel.state=A.state,t.default.redraw();break;case i.SyncerPayloadType.ERROR:new r.FriendlyError(A.error.message,A.friendlyMsg);break;case i.SyncerPayloadType.TOKEN_REQUEST:u(c.googleModel.token)}}(n),e.syncerController={unpause:function(){return l(this,void 0,void 0,(function*(){return yield c.syncerModel.pushSyncerTask({type:i.SyncerPayloadType.UNPAUSE},s)}))},getRows:function(n,e,A){return c.syncerModel.pushSyncerTask({type:i.SyncerPayloadType.GET_ROWS,spreadsheetId:n,sheetTitle:A,sheetId:e,rows:[]},s)},deleteRow:function(n,e,A){return l(this,void 0,void 0,(function*(){return yield c.syncerModel.pushSyncerTask({type:i.SyncerPayloadType.DELETE_ROW,spreadsheetId:e,sheetId:A,idx:n},s)}))},updateRow:function(n,e,A,o,t){return l(this,void 0,void 0,(function*(){return yield c.syncerModel.pushSyncerTask({type:i.SyncerPayloadType.UPDATE_ROW,spreadsheetId:n,sheetTitle:A,sheetId:e,content:t,idx:o},s)}))},getSheets:function(n){return c.syncerModel.pushSyncerTask({type:i.SyncerPayloadType.GET_SHEETS,spreadsheetId:n,sheets:[]},s)},updateAuth:u,updateTestMode:function(n){return l(this,void 0,void 0,(function*(){return yield c.syncerModel.pushSyncerTask({type:i.SyncerPayloadType.TEST_MODE_UPDATE,testMode:n},s)}))},getSpreadsheet:function(n){return c.syncerModel.pushSyncerTask({type:i.SyncerPayloadType.GET_SPREADSHEET,spreadsheetId:n,spreadsheet:void 0},s)}}},function(n,e,A){"use strict";var l,o,t,r,c,i,s=(l="/Users/bwakeford/Documents/personal/dntd-web/src/controllers/libraryController.ts",o="2a5f6da88366db47326329785803dfe13ae33ded",t=new(0,function(){}.constructor)("return this")(),c={path:"/Users/bwakeford/Documents/personal/dntd-web/src/controllers/libraryController.ts",statementMap:{0:{start:{line:2,column:22},end:{line:4,column:1}},1:{start:{line:3,column:4},end:{line:3,column:62}},2:{start:{line:5,column:0},end:{line:5,column:62}},3:{start:{line:6,column:18},end:{line:6,column:53}},4:{start:{line:7,column:12},end:{line:7,column:25}},5:{start:{line:8,column:17},end:{line:8,column:37}},6:{start:{line:9,column:20},end:{line:9,column:43}},7:{start:{line:10,column:22},end:{line:10,column:47}},8:{start:{line:11,column:24},end:{line:11,column:50}},9:{start:{line:12,column:28},end:{line:12,column:58}},10:{start:{line:13,column:29},end:{line:13,column:67}},11:{start:{line:14,column:0},end:{line:19,column:2}},12:{start:{line:21,column:14},end:{line:21,column:45}},13:{start:{line:22,column:4},end:{line:22,column:62}},14:{start:{line:22,column:27},end:{line:22,column:60}},15:{start:{line:23,column:4},end:{line:23,column:67}},16:{start:{line:23,column:22},end:{line:23,column:65}},17:{start:{line:24,column:4},end:{line:24,column:76}},18:{start:{line:25,column:4},end:{line:25,column:28}},19:{start:{line:28,column:4},end:{line:29,column:58}},20:{start:{line:29,column:8},end:{line:29,column:58}},21:{start:{line:30,column:4},end:{line:30,column:61}},22:{start:{line:30,column:27},end:{line:30,column:59}},23:{start:{line:31,column:4},end:{line:31,column:59}},24:{start:{line:31,column:22},end:{line:31,column:57}},25:{start:{line:32,column:4},end:{line:32,column:76}},26:{start:{line:35,column:4},end:{line:36,column:58}},27:{start:{line:36,column:8},end:{line:36,column:58}},28:{start:{line:37,column:4},end:{line:40,column:5}},29:{start:{line:38,column:8},end:{line:38,column:71}},30:{start:{line:38,column:26},end:{line:38,column:69}},31:{start:{line:39,column:8},end:{line:39,column:35}},32:{start:{line:41,column:4},end:{line:58,column:8}},33:{start:{line:41,column:21},end:{line:41,column:54}},34:{start:{line:42,column:23},end:{line:58,column:6}},35:{start:{line:44,column:20},end:{line:44,column:81}},36:{start:{line:45,column:8},end:{line:45,column:54}},37:{start:{line:46,column:22},end:{line:46,column:70}},38:{start:{line:47,column:8},end:{line:49,column:9}},39:{start:{line:48,column:12},end:{line:48,column:71}},40:{start:{line:52,column:8},end:{line:52,column:75}},41:{start:{line:53,column:20},end:{line:53,column:90}},42:{start:{line:54,column:8},end:{line:54,column:48}},43:{start:{line:57,column:8},end:{line:57,column:35}},44:{start:{line:61,column:14},end:{line:61,column:16}},45:{start:{line:62,column:4},end:{line:64,column:5}},46:{start:{line:63,column:8},end:{line:63,column:85}},47:{start:{line:63,column:69},end:{line:63,column:83}},48:{start:{line:65,column:4},end:{line:65,column:15}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:2,column:56},end:{line:2,column:57}},loc:{start:{line:2,column:71},end:{line:4,column:1}},line:2},1:{name:"addShelves",decl:{start:{line:20,column:9},end:{line:20,column:19}},loc:{start:{line:20,column:26},end:{line:26,column:1}},line:20},2:{name:"(anonymous_2)",decl:{start:{line:22,column:21},end:{line:22,column:22}},loc:{start:{line:22,column:27},end:{line:22,column:60}},line:22},3:{name:"(anonymous_3)",decl:{start:{line:23,column:16},end:{line:23,column:17}},loc:{start:{line:23,column:22},end:{line:23,column:65}},line:23},4:{name:"removeShelves",decl:{start:{line:27,column:9},end:{line:27,column:22}},loc:{start:{line:27,column:28},end:{line:33,column:1}},line:27},5:{name:"(anonymous_5)",decl:{start:{line:30,column:21},end:{line:30,column:22}},loc:{start:{line:30,column:27},end:{line:30,column:59}},line:30},6:{name:"(anonymous_6)",decl:{start:{line:31,column:16},end:{line:31,column:17}},loc:{start:{line:31,column:22},end:{line:31,column:57}},line:31},7:{name:"loadShelves",decl:{start:{line:34,column:9},end:{line:34,column:20}},loc:{start:{line:34,column:40},end:{line:59,column:1}},line:34},8:{name:"(anonymous_8)",decl:{start:{line:38,column:20},end:{line:38,column:21}},loc:{start:{line:38,column:26},end:{line:38,column:69}},line:38},9:{name:"(anonymous_9)",decl:{start:{line:41,column:15},end:{line:41,column:16}},loc:{start:{line:41,column:21},end:{line:41,column:54}},line:41},10:{name:"(anonymous_10)",decl:{start:{line:42,column:17},end:{line:42,column:18}},loc:{start:{line:42,column:23},end:{line:58,column:6}},line:42},11:{name:"(anonymous_11)",decl:{start:{line:43,column:14},end:{line:43,column:15}},loc:{start:{line:43,column:25},end:{line:50,column:5}},line:43},12:{name:"(anonymous_12)",decl:{start:{line:51,column:15},end:{line:51,column:16}},loc:{start:{line:51,column:26},end:{line:55,column:5}},line:51},13:{name:"(anonymous_13)",decl:{start:{line:56,column:17},end:{line:56,column:18}},loc:{start:{line:56,column:23},end:{line:58,column:5}},line:56},14:{name:"getSpreadsheetIdsFromUrls",decl:{start:{line:60,column:9},end:{line:60,column:34}},loc:{start:{line:60,column:41},end:{line:66,column:1}},line:60},15:{name:"(anonymous_15)",decl:{start:{line:63,column:64},end:{line:63,column:65}},loc:{start:{line:63,column:69},end:{line:63,column:83}},line:63}},branchMap:{0:{loc:{start:{line:2,column:22},end:{line:4,column:1}},type:"binary-expr",locations:[{start:{line:2,column:23},end:{line:2,column:27}},{start:{line:2,column:31},end:{line:2,column:51}},{start:{line:2,column:56},end:{line:4,column:1}}],line:2},1:{loc:{start:{line:3,column:11},end:{line:3,column:61}},type:"cond-expr",locations:[{start:{line:3,column:37},end:{line:3,column:40}},{start:{line:3,column:43},end:{line:3,column:61}}],line:3},2:{loc:{start:{line:3,column:12},end:{line:3,column:33}},type:"binary-expr",locations:[{start:{line:3,column:12},end:{line:3,column:15}},{start:{line:3,column:19},end:{line:3,column:33}}],line:3},3:{loc:{start:{line:28,column:4},end:{line:29,column:58}},type:"if",locations:[{start:{line:28,column:4},end:{line:29,column:58}},{start:{line:28,column:4},end:{line:29,column:58}}],line:28},4:{loc:{start:{line:35,column:4},end:{line:36,column:58}},type:"if",locations:[{start:{line:35,column:4},end:{line:36,column:58}},{start:{line:35,column:4},end:{line:36,column:58}}],line:35},5:{loc:{start:{line:37,column:4},end:{line:40,column:5}},type:"if",locations:[{start:{line:37,column:4},end:{line:40,column:5}},{start:{line:37,column:4},end:{line:40,column:5}}],line:37},6:{loc:{start:{line:47,column:8},end:{line:49,column:9}},type:"if",locations:[{start:{line:47,column:8},end:{line:49,column:9}},{start:{line:47,column:8},end:{line:49,column:9}}],line:47},7:{loc:{start:{line:47,column:12},end:{line:47,column:46}},type:"binary-expr",locations:[{start:{line:47,column:12},end:{line:47,column:19}},{start:{line:47,column:23},end:{line:47,column:46}}],line:47},8:{loc:{start:{line:62,column:4},end:{line:64,column:5}},type:"if",locations:[{start:{line:62,column:4},end:{line:64,column:5}},{start:{line:62,column:4},end:{line:64,column:5}}],line:62}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0},b:{0:[0,0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:"/Users/bwakeford/Documents/personal/dntd-web/src/controllers/libraryController.ts",sourceRoot:"",sources:["/Users/bwakeford/Documents/personal/dntd-web/src/controllers/libraryController.ts"],names:[],mappings:"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",sourcesContent:['import m from "mithril"\nimport { libraryModel } from ".."\nimport { ErrorPayload } from "../types"\nimport { FriendlyError } from "../errors"\nimport { shelfFactory } from "../factories"\nimport { syncerController } from "../controllers"\nimport { urlController } from "./urlController"\nimport { journalController } from "./journalController"\n\nconst spreadsheetIdPattern = /\\/spreadsheets\\/d\\/([a-zA-Z0-9-_]+)/g\n\nexport const libraryController = {\n    addShelves: addShelves,\n    loadShelves: loadShelves,\n    removeShelves: removeShelves,\n    getSpreadsheetIdsFromUrls: getSpreadsheetIdsFromUrls,\n}\n\nfunction addShelves(urls: string) {\n    let ids = getSpreadsheetIdsFromUrls(urls)\n    ids = ids.filter(id => !libraryModel.shelves.has(id))\n    ids.forEach(id => libraryModel.shelves.set(id, undefined))\n    libraryModel.shelfIds = Array.from(libraryModel.shelves.keys())\n    loadShelves(false, ids)\n}\n\nfunction removeShelves(ids?: string[]) {\n    if (ids === undefined) ids = Array.from(libraryModel.shelves.keys())\n    ids = ids.filter(id => libraryModel.shelves.has(id))\n    ids.forEach(id => libraryModel.shelves.delete(id))\n    libraryModel.shelfIds = Array.from(libraryModel.shelves.keys())\n}\n\nfunction loadShelves(reloadLoaded?: boolean, ids?: string[]) {\n    if (ids === undefined) ids = Array.from(libraryModel.shelves.keys())\n    if (reloadLoaded) {\n        ids.forEach(id => libraryModel.shelves.set(id, undefined))\n        m.redraw()\n    }\n    ids.filter(id => !libraryModel.shelves.get(id))\n        .forEach(id => syncerController.getSpreadsheet(id)\n        .then(payload => {\n            let shelf = shelfFactory.createShelf(id, payload.spreadsheet)\n            libraryModel.shelves.set(shelf.id, shelf)\n            let journal = urlController.getActiveJournal()\n            if (journal && journal.shelf === shelf) {\n                journalController.loadEntries(journal)\n            }\n        })\n        .catch((error: ErrorPayload) => {\n            new FriendlyError(error.error.message, error.friendlyMsg)\n            let shelf = shelfFactory.createShelf(id, undefined, error.friendlyMsg)\n            libraryModel.shelves.set(id, shelf)\n        })\n        .finally(() => {\n            m.redraw()\n        })\n    )\n}\n\nfunction getSpreadsheetIdsFromUrls(urls: string | undefined): string[] {\n    let ids: string[] = []\n    if (urls) {\n        Array.from(urls.matchAll(spreadsheetIdPattern)).forEach(m => ids.push(m[1]))\n    }\n    return ids\n}\n']},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},(i=t[r="__coverage__"]||(t[r]={}))[l]&&i[l].hash===o?i[l]:(c.hash=o,i[l]=c)),u=(s.s[0]++,s.b[0][0]++,this&&(s.b[0][1]++,this.__importDefault)||(s.b[0][2]++,function(n){return s.f[0]++,s.s[1]++,s.b[2][0]++,n&&(s.b[2][1]++,n.__esModule)?(s.b[1][0]++,n):(s.b[1][1]++,{default:n})}));s.s[2]++,Object.defineProperty(e,"__esModule",{value:!0});const a=(s.s[3]++,u(A(0))),C=(s.s[4]++,A(3)),m=(s.s[5]++,A(9)),d=(s.s[6]++,A(5)),f=(s.s[7]++,A(2)),E=(s.s[8]++,A(14)),p=(s.s[9]++,A(17)),I=(s.s[10]++,/\/spreadsheets\/d\/([a-zA-Z0-9-_]+)/g);function b(n,e){s.f[7]++,s.s[26]++,void 0===e?(s.b[4][0]++,s.s[27]++,e=Array.from(C.libraryModel.shelves.keys())):s.b[4][1]++,s.s[28]++,n?(s.b[5][0]++,s.s[29]++,e.forEach(n=>(s.f[8]++,s.s[30]++,C.libraryModel.shelves.set(n,void 0))),s.s[31]++,a.default.redraw()):s.b[5][1]++,s.s[32]++,e.filter(n=>(s.f[9]++,s.s[33]++,!C.libraryModel.shelves.get(n))).forEach(n=>(s.f[10]++,s.s[34]++,f.syncerController.getSpreadsheet(n).then(e=>{s.f[11]++;let A=(s.s[35]++,d.shelfFactory.createShelf(n,e.spreadsheet));s.s[36]++,C.libraryModel.shelves.set(A.id,A);let l=(s.s[37]++,E.urlController.getActiveJournal());s.s[38]++,s.b[7][0]++,l&&(s.b[7][1]++,l.shelf===A)?(s.b[6][0]++,s.s[39]++,p.journalController.loadEntries(l)):s.b[6][1]++}).catch(e=>{s.f[12]++,s.s[40]++,new m.FriendlyError(e.error.message,e.friendlyMsg);let A=(s.s[41]++,d.shelfFactory.createShelf(n,void 0,e.friendlyMsg));s.s[42]++,C.libraryModel.shelves.set(n,A)}).finally(()=>{s.f[13]++,s.s[43]++,a.default.redraw()})))}function y(n){s.f[14]++;let e=(s.s[44]++,[]);return s.s[45]++,n?(s.b[8][0]++,s.s[46]++,Array.from(n.matchAll(I)).forEach(n=>(s.f[15]++,s.s[47]++,e.push(n[1])))):s.b[8][1]++,s.s[48]++,e}s.s[11]++,e.libraryController={addShelves:function(n){s.f[1]++;let e=(s.s[12]++,y(n));s.s[13]++,e=e.filter(n=>(s.f[2]++,s.s[14]++,!C.libraryModel.shelves.has(n))),s.s[15]++,e.forEach(n=>(s.f[3]++,s.s[16]++,C.libraryModel.shelves.set(n,void 0))),s.s[17]++,C.libraryModel.shelfIds=Array.from(C.libraryModel.shelves.keys()),s.s[18]++,b(!1,e)},loadShelves:b,removeShelves:function(n){s.f[4]++,s.s[19]++,void 0===n?(s.b[3][0]++,s.s[20]++,n=Array.from(C.libraryModel.shelves.keys())):s.b[3][1]++;s.s[21]++,n=n.filter(n=>(s.f[5]++,s.s[22]++,C.libraryModel.shelves.has(n))),s.s[23]++,n.forEach(n=>(s.f[6]++,s.s[24]++,C.libraryModel.shelves.delete(n))),s.s[25]++,C.libraryModel.shelfIds=Array.from(C.libraryModel.shelves.keys())},getSpreadsheetIdsFromUrls:y}},function(n,e,A){"use strict";var l,o,t,r,c,i,s=(l="/Users/bwakeford/Documents/personal/dntd-web/src/components/composeComponent.ts",o="332c0bfcdc7fc0bb58248ec11f6706956ae14b20",t=new(0,function(){}.constructor)("return this")(),c={path:"/Users/bwakeford/Documents/personal/dntd-web/src/components/composeComponent.ts",statementMap:{0:{start:{line:2,column:16},end:{line:10,column:1}},1:{start:{line:3,column:28},end:{line:3,column:110}},2:{start:{line:3,column:91},end:{line:3,column:106}},3:{start:{line:4,column:4},end:{line:9,column:7}},4:{start:{line:5,column:36},end:{line:5,column:97}},5:{start:{line:5,column:42},end:{line:5,column:70}},6:{start:{line:5,column:85},end:{line:5,column:95}},7:{start:{line:6,column:35},end:{line:6,column:100}},8:{start:{line:6,column:41},end:{line:6,column:73}},9:{start:{line:6,column:88},end:{line:6,column:98}},10:{start:{line:7,column:32},end:{line:7,column:116}},11:{start:{line:8,column:8},end:{line:8,column:78}},12:{start:{line:11,column:22},end:{line:13,column:1}},13:{start:{line:12,column:4},end:{line:12,column:62}},14:{start:{line:14,column:0},end:{line:14,column:62}},15:{start:{line:15,column:18},end:{line:15,column:53}},16:{start:{line:16,column:20},end:{line:16,column:43}},17:{start:{line:17,column:22},end:{line:17,column:47}},18:{start:{line:19,column:16},end:{line:19,column:39}},19:{start:{line:20,column:31},end:{line:20,column:73}},20:{start:{line:21,column:32},end:{line:21,column:74}},21:{start:{line:22,column:31},end:{line:22,column:73}},22:{start:{line:23,column:27},end:{line:23,column:67}},23:{start:{line:24,column:26},end:{line:24,column:60}},24:{start:{line:25,column:27},end:{line:25,column:67}},25:{start:{line:27,column:24},end:{line:27,column:70}},26:{start:{line:28,column:8},end:{line:29,column:19}},27:{start:{line:29,column:12},end:{line:29,column:19}},28:{start:{line:30,column:8},end:{line:34,column:11}},29:{start:{line:37,column:18},end:{line:41,column:9}},30:{start:{line:42,column:8},end:{line:42,column:52}},31:{start:{line:42,column:29},end:{line:42,column:41}},32:{start:{line:45,column:27},end:{line:51,column:9}},33:{start:{line:48,column:34},end:{line:48,column:128}},34:{start:{line:48,column:81},end:{line:48,column:125}},35:{start:{line:49,column:32},end:{line:49,column:58}},36:{start:{line:50,column:28},end:{line:50,column:43}},37:{start:{line:52,column:8},end:{line:52,column:58}},38:{start:{line:55,column:8},end:{line:63,column:11}},39:{start:{line:56,column:12},end:{line:62,column:13}},40:{start:{line:57,column:16},end:{line:57,column:39}},41:{start:{line:58,column:30},end:{line:58,column:50}},42:{start:{line:59,column:16},end:{line:59,column:78}},43:{start:{line:60,column:26},end:{line:60,column:48}},44:{start:{line:61,column:16},end:{line:61,column:86}},45:{start:{line:66,column:18},end:{line:66,column:78}},46:{start:{line:67,column:8},end:{line:67,column:42}},47:{start:{line:68,column:8},end:{line:68,column:32}},48:{start:{line:69,column:8},end:{line:69,column:76}},49:{start:{line:72,column:8},end:{line:72,column:76}},50:{start:{line:73,column:8},end:{line:73,column:25}},51:{start:{line:74,column:8},end:{line:74,column:24}},52:{start:{line:76,column:4},end:{line:76,column:26}},53:{start:{line:78,column:0},end:{line:78,column:44}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:2,column:44},end:{line:2,column:45}},loc:{start:{line:2,column:89},end:{line:10,column:1}},line:2},1:{name:"adopt",decl:{start:{line:3,column:13},end:{line:3,column:18}},loc:{start:{line:3,column:26},end:{line:3,column:112}},line:3},2:{name:"(anonymous_2)",decl:{start:{line:3,column:70},end:{line:3,column:71}},loc:{start:{line:3,column:89},end:{line:3,column:108}},line:3},3:{name:"(anonymous_3)",decl:{start:{line:4,column:36},end:{line:4,column:37}},loc:{start:{line:4,column:63},end:{line:9,column:5}},line:4},4:{name:"fulfilled",decl:{start:{line:5,column:17},end:{line:5,column:26}},loc:{start:{line:5,column:34},end:{line:5,column:99}},line:5},5:{name:"rejected",decl:{start:{line:6,column:17},end:{line:6,column:25}},loc:{start:{line:6,column:33},end:{line:6,column:102}},line:6},6:{name:"step",decl:{start:{line:7,column:17},end:{line:7,column:21}},loc:{start:{line:7,column:30},end:{line:7,column:118}},line:7},7:{name:"(anonymous_7)",decl:{start:{line:11,column:56},end:{line:11,column:57}},loc:{start:{line:11,column:71},end:{line:13,column:1}},line:11},8:{name:"composeComponent",decl:{start:{line:18,column:9},end:{line:18,column:25}},loc:{start:{line:18,column:28},end:{line:77,column:1}},line:18},9:{name:"view",decl:{start:{line:26,column:13},end:{line:26,column:17}},loc:{start:{line:26,column:20},end:{line:35,column:5}},line:26},10:{name:"getComposedContent",decl:{start:{line:36,column:13},end:{line:36,column:31}},loc:{start:{line:36,column:34},end:{line:43,column:5}},line:36},11:{name:"(anonymous_11)",decl:{start:{line:42,column:23},end:{line:42,column:24}},loc:{start:{line:42,column:29},end:{line:42,column:41}},line:42},12:{name:"composeNodeSettings",decl:{start:{line:44,column:13},end:{line:44,column:32}},loc:{start:{line:44,column:64},end:{line:53,column:5}},line:44},13:{name:"(anonymous_13)",decl:{start:{line:48,column:23},end:{line:48,column:24}},loc:{start:{line:48,column:34},end:{line:48,column:128}},line:48},14:{name:"(anonymous_14)",decl:{start:{line:48,column:66},end:{line:48,column:67}},loc:{start:{line:48,column:79},end:{line:48,column:127}},line:48},15:{name:"(anonymous_15)",decl:{start:{line:49,column:21},end:{line:49,column:22}},loc:{start:{line:49,column:32},end:{line:49,column:58}},line:49},16:{name:"(anonymous_16)",decl:{start:{line:50,column:22},end:{line:50,column:23}},loc:{start:{line:50,column:28},end:{line:50,column:43}},line:50},17:{name:"composeKeydown",decl:{start:{line:54,column:13},end:{line:54,column:27}},loc:{start:{line:54,column:44},end:{line:64,column:5}},line:54},18:{name:"(anonymous_18)",decl:{start:{line:55,column:47},end:{line:55,column:48}},loc:{start:{line:55,column:60},end:{line:63,column:9}},line:55},19:{name:"composeInput",decl:{start:{line:65,column:13},end:{line:65,column:25}},loc:{start:{line:65,column:40},end:{line:70,column:5}},line:65},20:{name:"composeUpdate",decl:{start:{line:71,column:13},end:{line:71,column:26}},loc:{start:{line:71,column:29},end:{line:75,column:5}},line:71}},branchMap:{0:{loc:{start:{line:2,column:16},end:{line:10,column:1}},type:"binary-expr",locations:[{start:{line:2,column:17},end:{line:2,column:21}},{start:{line:2,column:25},end:{line:2,column:39}},{start:{line:2,column:44},end:{line:10,column:1}}],line:2},1:{loc:{start:{line:3,column:35},end:{line:3,column:109}},type:"cond-expr",locations:[{start:{line:3,column:56},end:{line:3,column:61}},{start:{line:3,column:64},end:{line:3,column:109}}],line:3},2:{loc:{start:{line:4,column:16},end:{line:4,column:34}},type:"binary-expr",locations:[{start:{line:4,column:16},end:{line:4,column:17}},{start:{line:4,column:22},end:{line:4,column:33}}],line:4},3:{loc:{start:{line:7,column:32},end:{line:7,column:115}},type:"cond-expr",locations:[{start:{line:7,column:46},end:{line:7,column:67}},{start:{line:7,column:70},end:{line:7,column:115}}],line:7},4:{loc:{start:{line:8,column:51},end:{line:8,column:67}},type:"binary-expr",locations:[{start:{line:8,column:51},end:{line:8,column:61}},{start:{line:8,column:65},end:{line:8,column:67}}],line:8},5:{loc:{start:{line:11,column:22},end:{line:13,column:1}},type:"binary-expr",locations:[{start:{line:11,column:23},end:{line:11,column:27}},{start:{line:11,column:31},end:{line:11,column:51}},{start:{line:11,column:56},end:{line:13,column:1}}],line:11},6:{loc:{start:{line:12,column:11},end:{line:12,column:61}},type:"cond-expr",locations:[{start:{line:12,column:37},end:{line:12,column:40}},{start:{line:12,column:43},end:{line:12,column:61}}],line:12},7:{loc:{start:{line:12,column:12},end:{line:12,column:33}},type:"binary-expr",locations:[{start:{line:12,column:12},end:{line:12,column:15}},{start:{line:12,column:19},end:{line:12,column:33}}],line:12},8:{loc:{start:{line:28,column:8},end:{line:29,column:19}},type:"if",locations:[{start:{line:28,column:8},end:{line:29,column:19}},{start:{line:28,column:8},end:{line:29,column:19}}],line:28},9:{loc:{start:{line:28,column:12},end:{line:28,column:61}},type:"binary-expr",locations:[{start:{line:28,column:12},end:{line:28,column:33}},{start:{line:28,column:37},end:{line:28,column:61}}],line:28},10:{loc:{start:{line:56,column:12},end:{line:62,column:13}},type:"if",locations:[{start:{line:56,column:12},end:{line:62,column:13}},{start:{line:56,column:12},end:{line:62,column:13}}],line:56},11:{loc:{start:{line:56,column:16},end:{line:56,column:54}},type:"binary-expr",locations:[{start:{line:56,column:16},end:{line:56,column:35}},{start:{line:56,column:39},end:{line:56,column:54}}],line:56},12:{loc:{start:{line:67,column:20},end:{line:67,column:41}},type:"cond-expr",locations:[{start:{line:67,column:28},end:{line:67,column:34}},{start:{line:67,column:37},end:{line:67,column:41}}],line:67}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0},b:{0:[0,0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0]},inputSourceMap:{version:3,file:"/Users/bwakeford/Documents/personal/dntd-web/src/components/composeComponent.ts",sourceRoot:"",sources:["/Users/bwakeford/Documents/personal/dntd-web/src/components/composeComponent.ts"],names:[],mappings:"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",sourcesContent:['import m from "mithril"\nimport { Caret } from "../types"\nimport { entryFactory } from "../factories"\nimport { BaseEntryModel, JournalModel } from "../models"\nimport { urlController, journalController, caretController, entryController } from "../controllers"\n\nexport function composeComponent() {\n    var caret: Caret = { el: null, pos: null }\n\n    const composePrefixEntry = entryFactory.createBaseEntry()\n    const composeContentEntry = entryFactory.createBaseEntry()\n    const composeSuffixEntry = entryFactory.createBaseEntry()\n\n    const prefixSettings = { "placeholder": "Static Entry Prefix" }\n    const entrySettings = { "placeholder": "Entry Content" }\n    const suffixSettings = { "placeholder": "Static Entry Suffix" }\n\n    function view() {\n        const journal = urlController.getActiveJournal()\n        if (journal === undefined || journal.loaded === false) return\n        return m("#compose", [\n            m(\n                "#prefix",\n                composeNodeSettings(composePrefixEntry, journal, prefixSettings),\n                m.trust(composePrefixEntry.rendered)\n            ),\n            m(\n                "#content",\n                composeNodeSettings(composeContentEntry, journal, entrySettings),\n                m.trust(composeContentEntry.rendered)\n            ),\n            m(\n                "#suffix",\n                composeNodeSettings(composeSuffixEntry, journal, suffixSettings),\n                m.trust(composeSuffixEntry.rendered)\n            ),\n        ])\n    }\n\n    function getComposedContent() {\n        let els = [\n            document.getElementById("prefix"),\n            document.getElementById("content"),\n            document.getElementById("suffix"),\n        ]\n        return els.map(el => el!.innerText).join("")\n    }\n\n    function composeNodeSettings(entry: BaseEntryModel, journal: JournalModel, extraSettings: object) {\n        let baseSettings = {\n            contenteditable: "true",\n            class: "entry breakwrap column",\n            onkeydown: async (event: any) => await composeKeydown(event, journal),\n            oninput: (event: any) => composeInput(event, entry),\n            onupdate: () => composeUpdate(),\n        }\n        return Object.assign(baseSettings, extraSettings)\n    }\n\n    async function composeKeydown(event: any, journal: JournalModel) {\n        if (event.keyCode == 13 && !event.shiftKey) {\n            event.preventDefault()\n            let content = getComposedContent()\n            entryController.update(composeContentEntry, "")\n            let idx = journal.entries.length\n            journalController.addEntry(journal, idx, content, true)\n        }\n    }\n\n    function composeInput(event: any, entry: BaseEntryModel) {\n        let pos = caretController.getCaretPosition(event.target)\n        caret.pos = (pos) ? pos[1] : null\n        caret.el = event.target\n        entryController.update(entry, event.target.innerText)\n    }\n\n    function composeUpdate() {\n        caretController.setCaretPosition(caret.el, caret.pos)\n        caret.pos = null\n        caret.el = null\n    }\n\n    return { view: view }\n}\n']},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},(i=t[r="__coverage__"]||(t[r]={}))[l]&&i[l].hash===o?i[l]:(c.hash=o,i[l]=c)),u=(s.s[0]++,s.b[0][0]++,this&&(s.b[0][1]++,this.__awaiter)||(s.b[0][2]++,function(n,e,A,l){return s.f[0]++,s.s[3]++,new(s.b[2][0]++,A||(s.b[2][1]++,A=Promise))((function(o,t){function r(n){s.f[4]++,s.s[4]++;try{s.s[5]++,i(l.next(n))}catch(n){s.s[6]++,t(n)}}function c(n){s.f[5]++,s.s[7]++;try{s.s[8]++,i(l.throw(n))}catch(n){s.s[9]++,t(n)}}function i(n){var e;s.f[6]++,s.s[10]++,n.done?(s.b[3][0]++,o(n.value)):(s.b[3][1]++,(e=n.value,s.f[1]++,s.s[1]++,e instanceof A?(s.b[1][0]++,e):(s.b[1][1]++,new A((function(n){s.f[2]++,s.s[2]++,n(e)})))).then(r,c))}s.f[3]++,s.s[11]++,i((l=l.apply(n,(s.b[4][0]++,e||(s.b[4][1]++,[])))).next())}))})),a=(s.s[12]++,s.b[5][0]++,this&&(s.b[5][1]++,this.__importDefault)||(s.b[5][2]++,function(n){return s.f[7]++,s.s[13]++,s.b[7][0]++,n&&(s.b[7][1]++,n.__esModule)?(s.b[6][0]++,n):(s.b[6][1]++,{default:n})}));s.s[14]++,Object.defineProperty(e,"__esModule",{value:!0});const C=(s.s[15]++,a(A(0))),m=(s.s[16]++,A(5)),d=(s.s[17]++,A(2));s.s[53]++,e.composeComponent=function(){s.f[8]++;var n=(s.s[18]++,{el:null,pos:null});const e=(s.s[19]++,m.entryFactory.createBaseEntry()),A=(s.s[20]++,m.entryFactory.createBaseEntry()),l=(s.s[21]++,m.entryFactory.createBaseEntry()),o=(s.s[22]++,{placeholder:"Static Entry Prefix"}),t=(s.s[23]++,{placeholder:"Entry Content"}),r=(s.s[24]++,{placeholder:"Static Entry Suffix"});function c(e,l,o){s.f[12]++;let t=(s.s[32]++,{contenteditable:"true",class:"entry breakwrap column",onkeydown:n=>(s.f[13]++,s.s[33]++,u(this,void 0,void 0,(function*(){return s.f[14]++,s.s[34]++,yield function(n,e){return s.f[17]++,s.s[38]++,u(this,void 0,void 0,(function*(){if(s.f[18]++,s.s[39]++,s.b[11][0]++,13!=n.keyCode||(s.b[11][1]++,n.shiftKey))s.b[10][1]++;else{s.b[10][0]++,s.s[40]++,n.preventDefault();let l=(s.s[41]++,function(){s.f[10]++;let n=(s.s[29]++,[document.getElementById("prefix"),document.getElementById("content"),document.getElementById("suffix")]);return s.s[30]++,n.map(n=>(s.f[11]++,s.s[31]++,n.innerText)).join("")}());s.s[42]++,d.entryController.update(A,"");let o=(s.s[43]++,e.entries.length);s.s[44]++,d.journalController.addEntry(e,o,l,!0)}}))}(n,l)}))),oninput:A=>(s.f[15]++,s.s[35]++,function(e,A){s.f[19]++;let l=(s.s[45]++,d.caretController.getCaretPosition(e.target));s.s[46]++,n.pos=l?(s.b[12][0]++,l[1]):(s.b[12][1]++,null),s.s[47]++,n.el=e.target,s.s[48]++,d.entryController.update(A,e.target.innerText)}(A,e)),onupdate:()=>(s.f[16]++,s.s[36]++,s.f[20]++,s.s[49]++,d.caretController.setCaretPosition(n.el,n.pos),s.s[50]++,n.pos=null,s.s[51]++,void(n.el=null))});return s.s[37]++,Object.assign(t,o)}return s.s[52]++,{view:function(){s.f[9]++;const n=(s.s[25]++,d.urlController.getActiveJournal());return s.s[26]++,s.b[9][0]++,void 0===n||(s.b[9][1]++,!1===n.loaded)?(s.b[8][0]++,void s.s[27]++):(s.b[8][1]++,s.s[28]++,C.default("#compose",[C.default("#prefix",c(e,n,o),C.default.trust(e.rendered)),C.default("#content",c(A,n,t),C.default.trust(A.rendered)),C.default("#suffix",c(l,n,r),C.default.trust(l.rendered))]))}}}},function(n,e,A){"use strict";var l,o,t,r,c,i,s=(l="/Users/bwakeford/Documents/personal/dntd-web/src/components/entriesComponent.ts",o="8f88f33535d5c09aff31ffca794cea6ac7b54ef2",t=new(0,function(){}.constructor)("return this")(),c={path:"/Users/bwakeford/Documents/personal/dntd-web/src/components/entriesComponent.ts",statementMap:{0:{start:{line:2,column:16},end:{line:10,column:1}},1:{start:{line:3,column:28},end:{line:3,column:110}},2:{start:{line:3,column:91},end:{line:3,column:106}},3:{start:{line:4,column:4},end:{line:9,column:7}},4:{start:{line:5,column:36},end:{line:5,column:97}},5:{start:{line:5,column:42},end:{line:5,column:70}},6:{start:{line:5,column:85},end:{line:5,column:95}},7:{start:{line:6,column:35},end:{line:6,column:100}},8:{start:{line:6,column:41},end:{line:6,column:73}},9:{start:{line:6,column:88},end:{line:6,column:98}},10:{start:{line:7,column:32},end:{line:7,column:116}},11:{start:{line:8,column:8},end:{line:8,column:78}},12:{start:{line:11,column:22},end:{line:13,column:1}},13:{start:{line:12,column:4},end:{line:12,column:62}},14:{start:{line:14,column:0},end:{line:14,column:62}},15:{start:{line:15,column:18},end:{line:15,column:53}},16:{start:{line:16,column:22},end:{line:16,column:47}},17:{start:{line:18,column:18},end:{line:18,column:41}},18:{start:{line:20,column:20},end:{line:20,column:64}},19:{start:{line:21,column:24},end:{line:21,column:70}},20:{start:{line:22,column:8},end:{line:23,column:24}},21:{start:{line:23,column:12},end:{line:23,column:24}},22:{start:{line:24,column:8},end:{line:27,column:11}},23:{start:{line:30,column:8},end:{line:31,column:61}},24:{start:{line:31,column:37},end:{line:31,column:59}},25:{start:{line:34,column:8},end:{line:37,column:11}},26:{start:{line:40,column:8},end:{line:43,column:18}},27:{start:{line:42,column:27},end:{line:42,column:153}},28:{start:{line:42,column:74},end:{line:42,column:150}},29:{start:{line:46,column:8},end:{line:46,column:120}},30:{start:{line:49,column:8},end:{line:49,column:29}},31:{start:{line:50,column:8},end:{line:53,column:9}},32:{start:{line:51,column:12},end:{line:51,column:35}},33:{start:{line:52,column:12},end:{line:52,column:32}},34:{start:{line:56,column:18},end:{line:56,column:78}},35:{start:{line:57,column:8},end:{line:57,column:42}},36:{start:{line:58,column:8},end:{line:58,column:32}},37:{start:{line:59,column:8},end:{line:59,column:76}},38:{start:{line:62,column:8},end:{line:62,column:29}},39:{start:{line:63,column:8},end:{line:63,column:76}},40:{start:{line:64,column:8},end:{line:64,column:25}},41:{start:{line:65,column:8},end:{line:65,column:24}},42:{start:{line:68,column:8},end:{line:72,column:11}},43:{start:{line:69,column:12},end:{line:69,column:33}},44:{start:{line:70,column:12},end:{line:70,column:94}},45:{start:{line:71,column:12},end:{line:71,column:69}},46:{start:{line:75,column:8},end:{line:83,column:10}},47:{start:{line:79,column:34},end:{line:79,column:55}},48:{start:{line:80,column:32},end:{line:80,column:58}},49:{start:{line:81,column:33},end:{line:81,column:53}},50:{start:{line:82,column:31},end:{line:82,column:66}},51:{start:{line:85,column:4},end:{line:85,column:26}},52:{start:{line:87,column:0},end:{line:87,column:44}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:2,column:44},end:{line:2,column:45}},loc:{start:{line:2,column:89},end:{line:10,column:1}},line:2},1:{name:"adopt",decl:{start:{line:3,column:13},end:{line:3,column:18}},loc:{start:{line:3,column:26},end:{line:3,column:112}},line:3},2:{name:"(anonymous_2)",decl:{start:{line:3,column:70},end:{line:3,column:71}},loc:{start:{line:3,column:89},end:{line:3,column:108}},line:3},3:{name:"(anonymous_3)",decl:{start:{line:4,column:36},end:{line:4,column:37}},loc:{start:{line:4,column:63},end:{line:9,column:5}},line:4},4:{name:"fulfilled",decl:{start:{line:5,column:17},end:{line:5,column:26}},loc:{start:{line:5,column:34},end:{line:5,column:99}},line:5},5:{name:"rejected",decl:{start:{line:6,column:17},end:{line:6,column:25}},loc:{start:{line:6,column:33},end:{line:6,column:102}},line:6},6:{name:"step",decl:{start:{line:7,column:17},end:{line:7,column:21}},loc:{start:{line:7,column:30},end:{line:7,column:118}},line:7},7:{name:"(anonymous_7)",decl:{start:{line:11,column:56},end:{line:11,column:57}},loc:{start:{line:11,column:71},end:{line:13,column:1}},line:11},8:{name:"entriesComponent",decl:{start:{line:17,column:9},end:{line:17,column:25}},loc:{start:{line:17,column:28},end:{line:86,column:1}},line:17},9:{name:"view",decl:{start:{line:19,column:13},end:{line:19,column:17}},loc:{start:{line:19,column:20},end:{line:28,column:5}},line:19},10:{name:"entriesList",decl:{start:{line:29,column:13},end:{line:29,column:24}},loc:{start:{line:29,column:34},end:{line:32,column:5}},line:29},11:{name:"(anonymous_11)",decl:{start:{line:31,column:17},end:{line:31,column:18}},loc:{start:{line:31,column:37},end:{line:31,column:59}},line:31},12:{name:"entryVnode",decl:{start:{line:33,column:13},end:{line:33,column:23}},loc:{start:{line:33,column:41},end:{line:38,column:5}},line:33},13:{name:"deleteEntryButton",decl:{start:{line:39,column:13},end:{line:39,column:30}},loc:{start:{line:39,column:48},end:{line:44,column:5}},line:39},14:{name:"(anonymous_14)",decl:{start:{line:42,column:21},end:{line:42,column:22}},loc:{start:{line:42,column:27},end:{line:42,column:153}},line:42},15:{name:"(anonymous_15)",decl:{start:{line:42,column:59},end:{line:42,column:60}},loc:{start:{line:42,column:72},end:{line:42,column:152}},line:42},16:{name:"entryContent",decl:{start:{line:45,column:13},end:{line:45,column:25}},loc:{start:{line:45,column:43},end:{line:47,column:5}},line:45},17:{name:"onEntryKeydown",decl:{start:{line:48,column:13},end:{line:48,column:27}},loc:{start:{line:48,column:35},end:{line:54,column:5}},line:48},18:{name:"onEntryInput",decl:{start:{line:55,column:13},end:{line:55,column:25}},loc:{start:{line:55,column:40},end:{line:60,column:5}},line:55},19:{name:"onEntryUpdate",decl:{start:{line:61,column:13},end:{line:61,column:26}},loc:{start:{line:61,column:34},end:{line:66,column:5}},line:61},20:{name:"onEntryBlur",decl:{start:{line:67,column:13},end:{line:67,column:24}},loc:{start:{line:67,column:49},end:{line:73,column:5}},line:67},21:{name:"(anonymous_21)",decl:{start:{line:68,column:47},end:{line:68,column:48}},loc:{start:{line:68,column:60},end:{line:72,column:9}},line:68},22:{name:"entryContentSettings",decl:{start:{line:74,column:13},end:{line:74,column:33}},loc:{start:{line:74,column:51},end:{line:84,column:5}},line:74},23:{name:"(anonymous_23)",decl:{start:{line:79,column:23},end:{line:79,column:24}},loc:{start:{line:79,column:34},end:{line:79,column:55}},line:79},24:{name:"(anonymous_24)",decl:{start:{line:80,column:21},end:{line:80,column:22}},loc:{start:{line:80,column:32},end:{line:80,column:58}},line:80},25:{name:"(anonymous_25)",decl:{start:{line:81,column:22},end:{line:81,column:23}},loc:{start:{line:81,column:33},end:{line:81,column:53}},line:81},26:{name:"(anonymous_26)",decl:{start:{line:82,column:20},end:{line:82,column:21}},loc:{start:{line:82,column:31},end:{line:82,column:66}},line:82}},branchMap:{0:{loc:{start:{line:2,column:16},end:{line:10,column:1}},type:"binary-expr",locations:[{start:{line:2,column:17},end:{line:2,column:21}},{start:{line:2,column:25},end:{line:2,column:39}},{start:{line:2,column:44},end:{line:10,column:1}}],line:2},1:{loc:{start:{line:3,column:35},end:{line:3,column:109}},type:"cond-expr",locations:[{start:{line:3,column:56},end:{line:3,column:61}},{start:{line:3,column:64},end:{line:3,column:109}}],line:3},2:{loc:{start:{line:4,column:16},end:{line:4,column:34}},type:"binary-expr",locations:[{start:{line:4,column:16},end:{line:4,column:17}},{start:{line:4,column:22},end:{line:4,column:33}}],line:4},3:{loc:{start:{line:7,column:32},end:{line:7,column:115}},type:"cond-expr",locations:[{start:{line:7,column:46},end:{line:7,column:67}},{start:{line:7,column:70},end:{line:7,column:115}}],line:7},4:{loc:{start:{line:8,column:51},end:{line:8,column:67}},type:"binary-expr",locations:[{start:{line:8,column:51},end:{line:8,column:61}},{start:{line:8,column:65},end:{line:8,column:67}}],line:8},5:{loc:{start:{line:11,column:22},end:{line:13,column:1}},type:"binary-expr",locations:[{start:{line:11,column:23},end:{line:11,column:27}},{start:{line:11,column:31},end:{line:11,column:51}},{start:{line:11,column:56},end:{line:13,column:1}}],line:11},6:{loc:{start:{line:12,column:11},end:{line:12,column:61}},type:"cond-expr",locations:[{start:{line:12,column:37},end:{line:12,column:40}},{start:{line:12,column:43},end:{line:12,column:61}}],line:12},7:{loc:{start:{line:12,column:12},end:{line:12,column:33}},type:"binary-expr",locations:[{start:{line:12,column:12},end:{line:12,column:15}},{start:{line:12,column:19},end:{line:12,column:33}}],line:12},8:{loc:{start:{line:22,column:8},end:{line:23,column:24}},type:"if",locations:[{start:{line:22,column:8},end:{line:23,column:24}},{start:{line:22,column:8},end:{line:23,column:24}}],line:22},9:{loc:{start:{line:22,column:12},end:{line:22,column:30}},type:"binary-expr",locations:[{start:{line:22,column:12},end:{line:22,column:18}},{start:{line:22,column:22},end:{line:22,column:30}}],line:22},10:{loc:{start:{line:50,column:8},end:{line:53,column:9}},type:"if",locations:[{start:{line:50,column:8},end:{line:53,column:9}},{start:{line:50,column:8},end:{line:53,column:9}}],line:50},11:{loc:{start:{line:50,column:12},end:{line:50,column:50}},type:"binary-expr",locations:[{start:{line:50,column:12},end:{line:50,column:31}},{start:{line:50,column:35},end:{line:50,column:50}}],line:50},12:{loc:{start:{line:57,column:20},end:{line:57,column:41}},type:"cond-expr",locations:[{start:{line:57,column:28},end:{line:57,column:34}},{start:{line:57,column:37},end:{line:57,column:41}}],line:57}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0},b:{0:[0,0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0]},inputSourceMap:{version:3,file:"/Users/bwakeford/Documents/personal/dntd-web/src/components/entriesComponent.ts",sourceRoot:"",sources:["/Users/bwakeford/Documents/personal/dntd-web/src/components/entriesComponent.ts"],names:[],mappings:"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",sourcesContent:['import m from "mithril"\nimport { Caret } from "../types"\nimport { JournalModel, JournalEntryModel } from "../models"\nimport {\n    caretController, urlController, entryController, journalController, searchController\n} from "../controllers"\n\nexport function entriesComponent() {\n    const caret: Caret = { pos: null, el: null }\n\n    function view() {\n        let shelf = urlController.getActiveShelf()\n        const journal = urlController.getActiveJournal()\n        if (!shelf || !journal) return null\n\n        return m("#entries", [\n            m(".tempguidancePre", "Entries"),\n            entriesList(journal),\n        ])\n    }\n\n    function entriesList(journal: JournalModel) {\n        return searchController.filteredEntries(journal.entries)\n            .map(({ idx, entry }) => entryVnode(entry, idx))\n    }\n\n    function entryVnode(entry: JournalEntryModel, entryIdx: number): m.Vnode {\n        return m(".entryWrap", { id: `entry-${entry.id}` }, [\n            entryContent(entry, entryIdx),\n            deleteEntryButton(entry, entryIdx),\n        ])\n    }\n\n    function deleteEntryButton(entry: JournalEntryModel, entryIdx: number) {\n        return m("button", {\n            class: "del",\n            onclick: async () => journalController.deleteEntry(entry.journal, entryIdx)\n        }, "del")\n    }\n\n    function entryContent(entry: JournalEntryModel, entryIdx: number) {\n        return m("div", entryContentSettings(entry, entryIdx), m.trust(entry.rendered))\n    }\n\n    function onEntryKeydown(event: any) {\n        event.redraw = false\n        if (event.keyCode == 13 && !event.shiftKey) {\n            event.preventDefault()\n            event.target.blur()\n        }\n    }\n\n    function onEntryInput(event: any, entry: JournalEntryModel) {\n        let pos = caretController.getCaretPosition(event.target)\n        caret.pos = (pos) ? pos[1] : null\n        caret.el = event.target\n        entryController.update(entry, event.target.innerText)\n    }\n\n    function onEntryUpdate(event: any) {\n        event.redraw = false\n        caretController.setCaretPosition(caret.el, caret.pos)\n        caret.pos = null\n        caret.el = null\n    }\n\n    async function onEntryBlur(event: any, entry: JournalEntryModel, entryIdx: number) {\n        event.redraw = false\n        entryController.save(entry, entryIdx, event.target.innerText, true)\n        journalController.buildTags(entry.journal)\n    }\n\n    function entryContentSettings(entry: JournalEntryModel, entryIdx: number) {\n        return {\n            id: `entry-${entry.id}-content`,\n            contenteditable: "true",\n            class: "entry breakwrap column",\n            onkeydown: (event: any) => onEntryKeydown(event),\n            oninput: (event: any) => onEntryInput(event, entry),\n            onupdate: (event: any) => onEntryUpdate(event),\n            onblur: (event: any) => onEntryBlur(event, entry, entryIdx),\n        }\n    }\n\n    return { view: view }\n}\n']},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},(i=t[r="__coverage__"]||(t[r]={}))[l]&&i[l].hash===o?i[l]:(c.hash=o,i[l]=c)),u=(s.s[0]++,s.b[0][0]++,this&&(s.b[0][1]++,this.__awaiter)||(s.b[0][2]++,function(n,e,A,l){return s.f[0]++,s.s[3]++,new(s.b[2][0]++,A||(s.b[2][1]++,A=Promise))((function(o,t){function r(n){s.f[4]++,s.s[4]++;try{s.s[5]++,i(l.next(n))}catch(n){s.s[6]++,t(n)}}function c(n){s.f[5]++,s.s[7]++;try{s.s[8]++,i(l.throw(n))}catch(n){s.s[9]++,t(n)}}function i(n){var e;s.f[6]++,s.s[10]++,n.done?(s.b[3][0]++,o(n.value)):(s.b[3][1]++,(e=n.value,s.f[1]++,s.s[1]++,e instanceof A?(s.b[1][0]++,e):(s.b[1][1]++,new A((function(n){s.f[2]++,s.s[2]++,n(e)})))).then(r,c))}s.f[3]++,s.s[11]++,i((l=l.apply(n,(s.b[4][0]++,e||(s.b[4][1]++,[])))).next())}))})),a=(s.s[12]++,s.b[5][0]++,this&&(s.b[5][1]++,this.__importDefault)||(s.b[5][2]++,function(n){return s.f[7]++,s.s[13]++,s.b[7][0]++,n&&(s.b[7][1]++,n.__esModule)?(s.b[6][0]++,n):(s.b[6][1]++,{default:n})}));s.s[14]++,Object.defineProperty(e,"__esModule",{value:!0});const C=(s.s[15]++,a(A(0))),m=(s.s[16]++,A(2));s.s[52]++,e.entriesComponent=function(){s.f[8]++;const n=(s.s[17]++,{pos:null,el:null});function e(n){return s.f[10]++,s.s[23]++,m.searchController.filteredEntries(n.entries).map(({idx:n,entry:e})=>(s.f[11]++,s.s[24]++,function(n,e){return s.f[12]++,s.s[25]++,C.default(".entryWrap",{id:"entry-"+n.id},[l(n,e),A(n,e)])}(e,n)))}function A(n,e){return s.f[13]++,s.s[26]++,C.default("button",{class:"del",onclick:()=>(s.f[14]++,s.s[27]++,u(this,void 0,void 0,(function*(){return s.f[15]++,s.s[28]++,m.journalController.deleteEntry(n.journal,e)})))},"del")}function l(e,A){return s.f[16]++,s.s[29]++,C.default("div",function(e,A){return s.f[22]++,s.s[46]++,{id:`entry-${e.id}-content`,contenteditable:"true",class:"entry breakwrap column",onkeydown:n=>(s.f[23]++,s.s[47]++,function(n){s.f[17]++,s.s[30]++,n.redraw=!1,s.s[31]++,s.b[11][0]++,13!=n.keyCode||(s.b[11][1]++,n.shiftKey)?s.b[10][1]++:(s.b[10][0]++,s.s[32]++,n.preventDefault(),s.s[33]++,n.target.blur())}(n)),oninput:A=>(s.f[24]++,s.s[48]++,function(e,A){s.f[18]++;let l=(s.s[34]++,m.caretController.getCaretPosition(e.target));s.s[35]++,n.pos=l?(s.b[12][0]++,l[1]):(s.b[12][1]++,null),s.s[36]++,n.el=e.target,s.s[37]++,m.entryController.update(A,e.target.innerText)}(A,e)),onupdate:e=>(s.f[25]++,s.s[49]++,function(e){s.f[19]++,s.s[38]++,e.redraw=!1,s.s[39]++,m.caretController.setCaretPosition(n.el,n.pos),s.s[40]++,n.pos=null,s.s[41]++,n.el=null}(e)),onblur:n=>(s.f[26]++,s.s[50]++,function(n,e,A){return s.f[20]++,s.s[42]++,u(this,void 0,void 0,(function*(){s.f[21]++,s.s[43]++,n.redraw=!1,s.s[44]++,m.entryController.save(e,A,n.target.innerText,!0),s.s[45]++,m.journalController.buildTags(e.journal)}))}(n,e,A))}}(e,A),C.default.trust(e.rendered))}return s.s[51]++,{view:function(){s.f[9]++;let n=(s.s[18]++,m.urlController.getActiveShelf());const A=(s.s[19]++,m.urlController.getActiveJournal());return s.s[20]++,s.b[9][0]++,n&&(s.b[9][1]++,A)?(s.b[8][1]++,s.s[22]++,C.default("#entries",[C.default(".tempguidancePre","Entries"),e(A)])):(s.b[8][0]++,s.s[21]++,null)}}}},function(n,e,A){"use strict";var l,o,t,r,c,i,s=(l="/Users/bwakeford/Documents/personal/dntd-web/src/components/shelvesComponent.ts",o="7f83a3a7562e2c32b054cb9e2618f4cef879c6b9",t=new(0,function(){}.constructor)("return this")(),c={path:"/Users/bwakeford/Documents/personal/dntd-web/src/components/shelvesComponent.ts",statementMap:{0:{start:{line:2,column:22},end:{line:4,column:1}},1:{start:{line:3,column:4},end:{line:3,column:62}},2:{start:{line:5,column:0},end:{line:5,column:62}},3:{start:{line:6,column:18},end:{line:6,column:53}},4:{start:{line:7,column:12},end:{line:7,column:25}},5:{start:{line:8,column:22},end:{line:8,column:47}},6:{start:{line:11,column:22},end:{line:11,column:68}},7:{start:{line:12,column:8},end:{line:12,column:101}},8:{start:{line:12,column:78},end:{line:12,column:98}},9:{start:{line:15,column:8},end:{line:18,column:18}},10:{start:{line:17,column:27},end:{line:17,column:78}},11:{start:{line:21,column:8},end:{line:23,column:20}},12:{start:{line:22,column:27},end:{line:22,column:82}},13:{start:{line:26,column:8},end:{line:44,column:9}},14:{start:{line:27,column:12},end:{line:30,column:15}},15:{start:{line:32,column:13},end:{line:44,column:9}},16:{start:{line:33,column:12},end:{line:37,column:15}},17:{start:{line:40,column:12},end:{line:43,column:15}},18:{start:{line:46,column:4},end:{line:48,column:6}},19:{start:{line:50,column:0},end:{line:50,column:44}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:2,column:56},end:{line:2,column:57}},loc:{start:{line:2,column:71},end:{line:4,column:1}},line:2},1:{name:"shelvesComponent",decl:{start:{line:9,column:9},end:{line:9,column:25}},loc:{start:{line:9,column:28},end:{line:49,column:1}},line:9},2:{name:"view",decl:{start:{line:10,column:13},end:{line:10,column:17}},loc:{start:{line:10,column:20},end:{line:13,column:5}},line:10},3:{name:"(anonymous_3)",decl:{start:{line:12,column:61},end:{line:12,column:62}},loc:{start:{line:12,column:78},end:{line:12,column:98}},line:12},4:{name:"delShelfButton",decl:{start:{line:14,column:13},end:{line:14,column:27}},loc:{start:{line:14,column:32},end:{line:19,column:5}},line:14},5:{name:"(anonymous_5)",decl:{start:{line:17,column:21},end:{line:17,column:22}},loc:{start:{line:17,column:27},end:{line:17,column:78}},line:17},6:{name:"retryShelfLoadButton",decl:{start:{line:20,column:13},end:{line:20,column:33}},loc:{start:{line:20,column:38},end:{line:24,column:5}},line:20},7:{name:"(anonymous_7)",decl:{start:{line:22,column:21},end:{line:22,column:22}},loc:{start:{line:22,column:27},end:{line:22,column:82}},line:22},8:{name:"shelfNode",decl:{start:{line:25,column:13},end:{line:25,column:22}},loc:{start:{line:25,column:34},end:{line:45,column:5}},line:25}},branchMap:{0:{loc:{start:{line:2,column:22},end:{line:4,column:1}},type:"binary-expr",locations:[{start:{line:2,column:23},end:{line:2,column:27}},{start:{line:2,column:31},end:{line:2,column:51}},{start:{line:2,column:56},end:{line:4,column:1}}],line:2},1:{loc:{start:{line:3,column:11},end:{line:3,column:61}},type:"cond-expr",locations:[{start:{line:3,column:37},end:{line:3,column:40}},{start:{line:3,column:43},end:{line:3,column:61}}],line:3},2:{loc:{start:{line:3,column:12},end:{line:3,column:33}},type:"binary-expr",locations:[{start:{line:3,column:12},end:{line:3,column:15}},{start:{line:3,column:19},end:{line:3,column:33}}],line:3},3:{loc:{start:{line:26,column:8},end:{line:44,column:9}},type:"if",locations:[{start:{line:26,column:8},end:{line:44,column:9}},{start:{line:26,column:8},end:{line:44,column:9}}],line:26},4:{loc:{start:{line:32,column:13},end:{line:44,column:9}},type:"if",locations:[{start:{line:32,column:13},end:{line:44,column:9}},{start:{line:32,column:13},end:{line:44,column:9}}],line:32}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},b:{0:[0,0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0]},inputSourceMap:{version:3,file:"/Users/bwakeford/Documents/personal/dntd-web/src/components/shelvesComponent.ts",sourceRoot:"",sources:["/Users/bwakeford/Documents/personal/dntd-web/src/components/shelvesComponent.ts"],names:[],mappings:";;;;;AAAA,sDAAuB;AACvB,0BAAiC;AAEjC,gDAAkD;AAElD,SAAgB,gBAAgB;IAE5B,SAAS,IAAI;QACT,IAAI,OAAO,GAAG,KAAK,CAAC,IAAI,CAAC,gBAAY,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC,CAAA;QACxD,OAAO,iBAAC,CAAC,cAAc,EAAE,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE,KAAK,CAAC,EAAE,EAAE,CAAC,SAAS,CAAC,EAAE,EAAE,KAAK,CAAC,CAAC,CAAC,CAAA;IAChF,CAAC;IAED,SAAS,cAAc,CAAC,EAAU;QAC9B,OAAO,iBAAC,CAAC,QAAQ,EAAE;YACf,KAAK,EAAE,KAAK;YACZ,OAAO,EAAE,GAAG,EAAE,CAAC,+BAAiB,CAAC,aAAa,CAAC,CAAC,EAAE,CAAC,CAAC;SACvD,EAAE,KAAK,CAAC,CAAA;IACb,CAAC;IAED,SAAS,oBAAoB,CAAC,EAAU;QACpC,OAAO,iBAAC,CAAC,QAAQ,EAAE;YACf,OAAO,EAAE,GAAG,EAAE,CAAC,+BAAiB,CAAC,WAAW,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;SAC3D,EAAE,OAAO,CAAC,CAAA;IACf,CAAC;IAED,SAAS,SAAS,CAAC,EAAU,EAAE,KAA6B;QACxD,IAAI,KAAK,KAAK,SAAS,EAAE;YACrB,OAAO,iBAAC,CAAC,IAAI,EAAE;gBACX,cAAc,CAAC,EAAE,CAAC;gBAClB,iBAAC,CAAC,MAAM,EAAE,EAAE,CAAC;aAChB,CAAC,CAAA;SACL;aAAM,IAAI,KAAK,CAAC,KAAK,KAAK,SAAS,EAAE;YAClC,OAAO,iBAAC,CAAC,IAAI,EAAE;gBACX,cAAc,CAAC,EAAE,CAAC;gBAClB,iBAAC,CAAC,MAAM,EAAE,GAAG,EAAE,IAAI,KAAK,CAAC,KAAK,EAAE,CAAC;gBACjC,oBAAoB,CAAC,EAAE,CAAC;aAC3B,CAAC,CAAA;SACL;aAAM;YACH,OAAO,iBAAC,CAAC,IAAI,EAAE;gBACX,cAAc,CAAC,EAAE,CAAC;gBAClB,iBAAC,CAAC,GAAG,EAAE,EAAE,IAAI,EAAE,aAAa,EAAE,EAAE,EAAE,EAAE,KAAK,CAAC,KAAK,CAAC;aACnD,CAAC,CAAA;SACL;IACL,CAAC;IAED,OAAO;QACH,IAAI,EAAE,IAAI;KACb,CAAA;AAEL,CAAC;AA5CD,4CA4CC",sourcesContent:['import m from "mithril"\nimport { libraryModel } from ".."\nimport { ShelfModel } from "../models"\nimport { libraryController } from "../controllers"\n\nexport function shelvesComponent() {\n\n    function view() {\n        let shelves = Array.from(libraryModel.shelves.entries())\n        return m("#shelvesList", shelves.map(([id, shelf]) => shelfNode(id, shelf)))\n    }\n\n    function delShelfButton(id: string) {\n        return m("button", {\n            class: "del",\n            onclick: () => libraryController.removeShelves([id])\n        }, "del")\n    }\n\n    function retryShelfLoadButton(id: string) {\n        return m("button", {\n            onclick: () => libraryController.loadShelves(true, [id])\n        }, "retry")\n    }\n\n    function shelfNode(id: string, shelf: ShelfModel | undefined) {\n        if (shelf === undefined) {\n            return m("li", [\n                delShelfButton(id),\n                m("span", id)\n            ])\n        } else if (shelf.error !== undefined) {\n            return m("li", [\n                delShelfButton(id),\n                m("span", `${id} ${shelf.error}`),\n                retryShelfLoadButton(id)\n            ])\n        } else {\n            return m("li", [\n                delShelfButton(id),\n                m("a", { href: `#/library/${id}` }, shelf.title)\n            ])\n        }\n    }\n\n    return {\n        view: view,\n    }\n\n}']},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},(i=t[r="__coverage__"]||(t[r]={}))[l]&&i[l].hash===o?i[l]:(c.hash=o,i[l]=c)),u=(s.s[0]++,s.b[0][0]++,this&&(s.b[0][1]++,this.__importDefault)||(s.b[0][2]++,function(n){return s.f[0]++,s.s[1]++,s.b[2][0]++,n&&(s.b[2][1]++,n.__esModule)?(s.b[1][0]++,n):(s.b[1][1]++,{default:n})}));s.s[2]++,Object.defineProperty(e,"__esModule",{value:!0});const a=(s.s[3]++,u(A(0))),C=(s.s[4]++,A(3)),m=(s.s[5]++,A(2));s.s[19]++,e.shelvesComponent=function(){function n(n){return s.f[4]++,s.s[9]++,a.default("button",{class:"del",onclick:()=>(s.f[5]++,s.s[10]++,m.libraryController.removeShelves([n]))},"del")}function e(n){return s.f[6]++,s.s[11]++,a.default("button",{onclick:()=>(s.f[7]++,s.s[12]++,m.libraryController.loadShelves(!0,[n]))},"retry")}return s.f[1]++,s.s[18]++,{view:function(){s.f[2]++;let A=(s.s[6]++,Array.from(C.libraryModel.shelves.entries()));return s.s[7]++,a.default("#shelvesList",A.map(([A,l])=>(s.f[3]++,s.s[8]++,function(A,l){return s.f[8]++,s.s[13]++,void 0===l?(s.b[3][0]++,s.s[14]++,a.default("li",[n(A),a.default("span",A)])):(s.b[3][1]++,s.s[15]++,void 0!==l.error?(s.b[4][0]++,s.s[16]++,a.default("li",[n(A),a.default("span",`${A} ${l.error}`),e(A)])):(s.b[4][1]++,s.s[17]++,a.default("li",[n(A),a.default("a",{href:"#/library/"+A},l.title)])))}(A,l))))}}}},function(n,e,A){"use strict";var l,o,t,r,c,i,s=(l="/Users/bwakeford/Documents/personal/dntd-web/src/components/refinesComponent.ts",o="74ae4f2f31fdf1970b0b2235a52c8ae8ab7e1823",t=new(0,function(){}.constructor)("return this")(),c={path:"/Users/bwakeford/Documents/personal/dntd-web/src/components/refinesComponent.ts",statementMap:{0:{start:{line:2,column:22},end:{line:4,column:1}},1:{start:{line:3,column:4},end:{line:3,column:62}},2:{start:{line:5,column:0},end:{line:5,column:62}},3:{start:{line:6,column:18},end:{line:6,column:53}},4:{start:{line:7,column:12},end:{line:7,column:25}},5:{start:{line:8,column:22},end:{line:8,column:47}},6:{start:{line:10,column:29},end:{line:10,column:42}},7:{start:{line:11,column:21},end:{line:11,column:30}},8:{start:{line:13,column:24},end:{line:13,column:70}},9:{start:{line:14,column:8},end:{line:15,column:19}},10:{start:{line:15,column:12},end:{line:15,column:19}},11:{start:{line:16,column:8},end:{line:20,column:12}},12:{start:{line:23,column:8},end:{line:24,column:19}},13:{start:{line:24,column:12},end:{line:24,column:19}},14:{start:{line:25,column:8},end:{line:30,column:11}},15:{start:{line:27,column:70},end:{line:29,column:13}},16:{start:{line:33,column:8},end:{line:36,column:12}},17:{start:{line:33,column:75},end:{line:36,column:10}},18:{start:{line:35,column:28},end:{line:35,column:54}},19:{start:{line:39,column:8},end:{line:46,column:11}},20:{start:{line:49,column:8},end:{line:61,column:11}},21:{start:{line:64,column:8},end:{line:67,column:10}},22:{start:{line:66,column:32},end:{line:66,column:63}},23:{start:{line:70,column:23},end:{line:70,column:71}},24:{start:{line:71,column:24},end:{line:71,column:30}},25:{start:{line:72,column:8},end:{line:76,column:9}},26:{start:{line:75,column:12},end:{line:75,column:27}},27:{start:{line:77,column:8},end:{line:80,column:10}},28:{start:{line:79,column:27},end:{line:79,column:51}},29:{start:{line:83,column:8},end:{line:93,column:9}},30:{start:{line:84,column:12},end:{line:84,column:73}},31:{start:{line:87,column:12},end:{line:89,column:13}},32:{start:{line:88,column:16},end:{line:88,column:23}},33:{start:{line:90,column:12},end:{line:92,column:61}},34:{start:{line:96,column:8},end:{line:105,column:9}},35:{start:{line:97,column:12},end:{line:99,column:78}},36:{start:{line:102,column:12},end:{line:104,column:72}},37:{start:{line:107,column:4},end:{line:107,column:26}},38:{start:{line:109,column:0},end:{line:109,column:44}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:2,column:56},end:{line:2,column:57}},loc:{start:{line:2,column:71},end:{line:4,column:1}},line:2},1:{name:"refinesComponent",decl:{start:{line:9,column:9},end:{line:9,column:25}},loc:{start:{line:9,column:28},end:{line:108,column:1}},line:9},2:{name:"view",decl:{start:{line:12,column:13},end:{line:12,column:17}},loc:{start:{line:12,column:20},end:{line:21,column:5}},line:12},3:{name:"simpleRefinesVnodes",decl:{start:{line:22,column:13},end:{line:22,column:32}},loc:{start:{line:22,column:35},end:{line:31,column:5}},line:22},4:{name:"(anonymous_4)",decl:{start:{line:27,column:54},end:{line:27,column:55}},loc:{start:{line:27,column:70},end:{line:29,column:13}},line:27},5:{name:"complexRefinesVnodes",decl:{start:{line:32,column:13},end:{line:32,column:33}},loc:{start:{line:32,column:36},end:{line:37,column:5}},line:32},6:{name:"(anonymous_6)",decl:{start:{line:33,column:58},end:{line:33,column:59}},loc:{start:{line:33,column:75},end:{line:36,column:10}},line:33},7:{name:"(anonymous_7)",decl:{start:{line:35,column:21},end:{line:35,column:22}},loc:{start:{line:35,column:28},end:{line:35,column:54}},line:35},8:{name:"refineKeyVnode",decl:{start:{line:38,column:13},end:{line:38,column:27}},loc:{start:{line:38,column:40},end:{line:47,column:5}},line:38},9:{name:"refineValVnode",decl:{start:{line:48,column:13},end:{line:48,column:27}},loc:{start:{line:48,column:38},end:{line:62,column:5}},line:48},10:{name:"tagRefineKeySettings",decl:{start:{line:63,column:13},end:{line:63,column:33}},loc:{start:{line:63,column:39},end:{line:68,column:5}},line:63},11:{name:"(anonymous_11)",decl:{start:{line:66,column:21},end:{line:66,column:22}},loc:{start:{line:66,column:32},end:{line:66,column:63}},line:66},12:{name:"tagRefineValSettings",decl:{start:{line:69,column:13},end:{line:69,column:33}},loc:{start:{line:69,column:44},end:{line:81,column:5}},line:69},13:{name:"(anonymous_13)",decl:{start:{line:79,column:21},end:{line:79,column:22}},loc:{start:{line:79,column:27},end:{line:79,column:51}},line:79},14:{name:"refineTagKeyOnClick",decl:{start:{line:82,column:13},end:{line:82,column:32}},loc:{start:{line:82,column:45},end:{line:94,column:5}},line:82},15:{name:"refineTagValOnClick",decl:{start:{line:95,column:13},end:{line:95,column:32}},loc:{start:{line:95,column:38},end:{line:106,column:5}},line:95}},branchMap:{0:{loc:{start:{line:2,column:22},end:{line:4,column:1}},type:"binary-expr",locations:[{start:{line:2,column:23},end:{line:2,column:27}},{start:{line:2,column:31},end:{line:2,column:51}},{start:{line:2,column:56},end:{line:4,column:1}}],line:2},1:{loc:{start:{line:3,column:11},end:{line:3,column:61}},type:"cond-expr",locations:[{start:{line:3,column:37},end:{line:3,column:40}},{start:{line:3,column:43},end:{line:3,column:61}}],line:3},2:{loc:{start:{line:3,column:12},end:{line:3,column:33}},type:"binary-expr",locations:[{start:{line:3,column:12},end:{line:3,column:15}},{start:{line:3,column:19},end:{line:3,column:33}}],line:3},3:{loc:{start:{line:14,column:8},end:{line:15,column:19}},type:"if",locations:[{start:{line:14,column:8},end:{line:15,column:19}},{start:{line:14,column:8},end:{line:15,column:19}}],line:14},4:{loc:{start:{line:14,column:12},end:{line:14,column:61}},type:"binary-expr",locations:[{start:{line:14,column:12},end:{line:14,column:33}},{start:{line:14,column:37},end:{line:14,column:61}}],line:14},5:{loc:{start:{line:23,column:8},end:{line:24,column:19}},type:"if",locations:[{start:{line:23,column:8},end:{line:24,column:19}},{start:{line:23,column:8},end:{line:24,column:19}}],line:23},6:{loc:{start:{line:40,column:12},end:{line:42,column:119}},type:"cond-expr",locations:[{start:{line:41,column:18},end:{line:41,column:20}},{start:{line:42,column:18},end:{line:42,column:119}}],line:40},7:{loc:{start:{line:43,column:12},end:{line:43,column:99}},type:"cond-expr",locations:[{start:{line:43,column:34},end:{line:43,column:65}},{start:{line:43,column:68},end:{line:43,column:99}}],line:43},8:{loc:{start:{line:52,column:47},end:{line:54,column:74}},type:"cond-expr",locations:[{start:{line:53,column:26},end:{line:53,column:80}},{start:{line:54,column:26},end:{line:54,column:74}}],line:52},9:{loc:{start:{line:56,column:16},end:{line:58,column:77}},type:"cond-expr",locations:[{start:{line:57,column:22},end:{line:57,column:66}},{start:{line:58,column:22},end:{line:58,column:77}}],line:56},10:{loc:{start:{line:70,column:23},end:{line:70,column:71}},type:"cond-expr",locations:[{start:{line:70,column:44},end:{line:70,column:55}},{start:{line:70,column:58},end:{line:70,column:71}}],line:70},11:{loc:{start:{line:72,column:8},end:{line:76,column:9}},type:"if",locations:[{start:{line:72,column:8},end:{line:76,column:9}},{start:{line:72,column:8},end:{line:76,column:9}}],line:72},12:{loc:{start:{line:72,column:12},end:{line:74,column:60}},type:"binary-expr",locations:[{start:{line:72,column:13},end:{line:72,column:29}},{start:{line:72,column:33},end:{line:72,column:63}},{start:{line:73,column:12},end:{line:73,column:29}},{start:{line:74,column:12},end:{line:74,column:60}}],line:72},13:{loc:{start:{line:83,column:8},end:{line:93,column:9}},type:"if",locations:[{start:{line:83,column:8},end:{line:93,column:9}},{start:{line:83,column:8},end:{line:93,column:9}}],line:83},14:{loc:{start:{line:83,column:12},end:{line:83,column:44}},type:"binary-expr",locations:[{start:{line:83,column:12},end:{line:83,column:26}},{start:{line:83,column:30},end:{line:83,column:44}}],line:83},15:{loc:{start:{line:84,column:12},end:{line:84,column:72}},type:"cond-expr",locations:[{start:{line:84,column:32},end:{line:84,column:52}},{start:{line:84,column:55},end:{line:84,column:72}}],line:84},16:{loc:{start:{line:87,column:12},end:{line:89,column:13}},type:"if",locations:[{start:{line:87,column:12},end:{line:89,column:13}},{start:{line:87,column:12},end:{line:89,column:13}}],line:87},17:{loc:{start:{line:90,column:12},end:{line:92,column:60}},type:"cond-expr",locations:[{start:{line:91,column:18},end:{line:91,column:63}},{start:{line:92,column:18},end:{line:92,column:60}}],line:90},18:{loc:{start:{line:96,column:8},end:{line:105,column:9}},type:"if",locations:[{start:{line:96,column:8},end:{line:105,column:9}},{start:{line:96,column:8},end:{line:105,column:9}}],line:96},19:{loc:{start:{line:97,column:12},end:{line:99,column:77}},type:"cond-expr",locations:[{start:{line:98,column:18},end:{line:98,column:75}},{start:{line:99,column:18},end:{line:99,column:77}}],line:97},20:{loc:{start:{line:102,column:12},end:{line:104,column:71}},type:"cond-expr",locations:[{start:{line:103,column:18},end:{line:103,column:69}},{start:{line:104,column:18},end:{line:104,column:71}}],line:102}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0},b:{0:[0,0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0,0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0]},inputSourceMap:{version:3,file:"/Users/bwakeford/Documents/personal/dntd-web/src/components/refinesComponent.ts",sourceRoot:"",sources:["/Users/bwakeford/Documents/personal/dntd-web/src/components/refinesComponent.ts"],names:[],mappings:"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",sourcesContent:['import m from "mithril"\nimport { searchModel } from ".."\nimport { urlController } from "../controllers"\nimport { TagModel } from "../models"\n\nexport function refinesComponent() {\n    const simpleTagsHeader = "Simple Tags"\n    const expanded: Set<string> = new Set()\n\n    function view() {\n        const journal = urlController.getActiveJournal()\n        if (journal === undefined || journal.loaded === false) return\n        return m("#tagsWrap", m("#tags", [\n            m(".tempguidancePre", "Tags"),\n            simpleRefinesVnodes(),\n            complexRefinesVnodes(),\n        ]))\n    }\n\n    function simpleRefinesVnodes() {\n        if (searchModel.simpleRefines.size === 0) return\n        return m(".tagRefineWrap", [\n            refineKeyVnode(simpleTagsHeader, searchModel.simpleRefines.size),\n            Array.from(searchModel.simpleRefines, ([key, tag]) => [\n                refineValVnode(key, tag)\n            ])\n        ])\n    }\n\n    function complexRefinesVnodes(): m.Vnode[] {\n        return Array.from(searchModel.complexRefines, ([key, tags]) => m(".tagRefineWrap", [\n            refineKeyVnode(key, tags.length),\n            tags.map(tag => [refineValVnode(key, tag)])\n        ]))\n    }\n\n    function refineKeyVnode(key: string, count: number) {\n        return m("span", tagRefineKeySettings(key), [\n            (key === simpleTagsHeader)\n                ? []\n                : m("input", { type: "checkbox", checked: searchModel.refinesQuery.keys.has(key) }),\n            (expanded.has(key)) ? m("span", "▾ ") : m("span", "▿ "),\n            m("span", key),\n            m("span", ` (${count})`),\n        ])\n    }\n\n    function refineValVnode(key: string, tag: TagModel) {\n        return m("div", { class: `tagRefineValWrap` }, [\n            m("span", tagRefineValSettings(key, tag), [\n                m("input", {\n                    type: "checkbox", checked: (tag.val === null)\n                        ? searchModel.refinesQuery.simpleKeys.has(tag.clean)\n                        : searchModel.refinesQuery.vals.has(tag.clean)\n                }),\n                (tag.val !== null)\n                    ? m("span", `${tag.cleanVal}`)\n                    : m("span", `${tag.flag}${tag.cleanKey}`),\n                m("span", ` (${tag.frq})`),\n            ]),\n        ])\n    }\n\n    function tagRefineKeySettings(key: string) {\n        return {\n            class: "roundTagKey",\n            onclick: (event: any) => refineTagKeyOnClick(event, key),\n        }\n    }\n\n    function tagRefineValSettings(key: string, tag: TagModel) {\n        let tagClass = (tag.val === null) ? "simpleTag" : "roundTagVal"\n        let hideClass = "hide"\n        if (\n            (tag.val === null && expanded.has(simpleTagsHeader)) ||\n            expanded.has(key) ||\n            searchModel.refinesQuery.vals.has(tag.clean)\n        ) {\n            hideClass = ""\n        }\n        return {\n            class: `${tagClass} ${hideClass}`,\n            onclick: () => refineTagValOnClick(tag),\n        }\n    }\n\n    function refineTagKeyOnClick(event: any, key: string) {\n        if (!event.metaKey && !event.ctrlKey) {\n            expanded.has(key) ? expanded.delete(key) : expanded.add(key)\n        } else {\n            if (key === simpleTagsHeader) { return }\n            searchModel.refinesQuery.keys.has(key)\n                ? searchModel.refinesQuery.keys.delete(key)\n                : searchModel.refinesQuery.keys.add(key)\n        }\n    }\n\n    function refineTagValOnClick(tag: TagModel) {\n        if (tag.val === null) {\n            searchModel.refinesQuery.simpleKeys.has(tag.clean)\n                ? searchModel.refinesQuery.simpleKeys.delete(tag.clean)\n                : searchModel.refinesQuery.simpleKeys.set(tag.clean, tag)\n        } else {\n            searchModel.refinesQuery.vals.has(tag.clean)\n                ? searchModel.refinesQuery.vals.delete(tag.clean)\n                : searchModel.refinesQuery.vals.set(tag.clean, tag)\n        }\n    }\n\n    return { view: view }\n}\n']},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},(i=t[r="__coverage__"]||(t[r]={}))[l]&&i[l].hash===o?i[l]:(c.hash=o,i[l]=c)),u=(s.s[0]++,s.b[0][0]++,this&&(s.b[0][1]++,this.__importDefault)||(s.b[0][2]++,function(n){return s.f[0]++,s.s[1]++,s.b[2][0]++,n&&(s.b[2][1]++,n.__esModule)?(s.b[1][0]++,n):(s.b[1][1]++,{default:n})}));s.s[2]++,Object.defineProperty(e,"__esModule",{value:!0});const a=(s.s[3]++,u(A(0))),C=(s.s[4]++,A(3)),m=(s.s[5]++,A(2));s.s[38]++,e.refinesComponent=function(){s.f[1]++;const n=(s.s[6]++,"Simple Tags"),e=(s.s[7]++,new Set);function A(){return s.f[3]++,s.s[12]++,0===C.searchModel.simpleRefines.size?(s.b[5][0]++,void s.s[13]++):(s.b[5][1]++,s.s[14]++,a.default(".tagRefineWrap",[o(n,C.searchModel.simpleRefines.size),Array.from(C.searchModel.simpleRefines,([n,e])=>(s.f[4]++,s.s[15]++,[t(n,e)]))]))}function l(){return s.f[5]++,s.s[16]++,Array.from(C.searchModel.complexRefines,([n,e])=>(s.f[6]++,s.s[17]++,a.default(".tagRefineWrap",[o(n,e.length),e.map(e=>(s.f[7]++,s.s[18]++,[t(n,e)]))])))}function o(A,l){return s.f[8]++,s.s[19]++,a.default("span",function(A){return s.f[10]++,s.s[21]++,{class:"roundTagKey",onclick:l=>(s.f[11]++,s.s[22]++,function(A,l){if(s.f[14]++,s.s[29]++,s.b[14][0]++,A.metaKey||(s.b[14][1]++,A.ctrlKey)){if(s.b[13][1]++,s.s[31]++,l===n)return s.b[16][0]++,void s.s[32]++;s.b[16][1]++,s.s[33]++,C.searchModel.refinesQuery.keys.has(l)?(s.b[17][0]++,C.searchModel.refinesQuery.keys.delete(l)):(s.b[17][1]++,C.searchModel.refinesQuery.keys.add(l))}else s.b[13][0]++,s.s[30]++,e.has(l)?(s.b[15][0]++,e.delete(l)):(s.b[15][1]++,e.add(l))}(l,A))}}(A),[A===n?(s.b[6][0]++,[]):(s.b[6][1]++,a.default("input",{type:"checkbox",checked:C.searchModel.refinesQuery.keys.has(A)})),e.has(A)?(s.b[7][0]++,a.default("span","▾ ")):(s.b[7][1]++,a.default("span","▿ ")),a.default("span",A),a.default("span",` (${l})`)])}function t(n,e){return s.f[9]++,s.s[20]++,a.default("div",{class:"tagRefineValWrap"},[a.default("span",r(n,e),[a.default("input",{type:"checkbox",checked:null===e.val?(s.b[8][0]++,C.searchModel.refinesQuery.simpleKeys.has(e.clean)):(s.b[8][1]++,C.searchModel.refinesQuery.vals.has(e.clean))}),null!==e.val?(s.b[9][0]++,a.default("span",""+e.cleanVal)):(s.b[9][1]++,a.default("span",`${e.flag}${e.cleanKey}`)),a.default("span",` (${e.frq})`)])])}function r(A,l){s.f[12]++;let o=(s.s[23]++,null===l.val?(s.b[10][0]++,"simpleTag"):(s.b[10][1]++,"roundTagVal")),t=(s.s[24]++,"hide");return s.s[25]++,s.b[12][0]++,null===l.val&&(s.b[12][1]++,e.has(n))||(s.b[12][2]++,e.has(A))||(s.b[12][3]++,C.searchModel.refinesQuery.vals.has(l.clean))?(s.b[11][0]++,s.s[26]++,t=""):s.b[11][1]++,s.s[27]++,{class:`${o} ${t}`,onclick:()=>(s.f[13]++,s.s[28]++,function(n){s.f[15]++,s.s[34]++,null===n.val?(s.b[18][0]++,s.s[35]++,C.searchModel.refinesQuery.simpleKeys.has(n.clean)?(s.b[19][0]++,C.searchModel.refinesQuery.simpleKeys.delete(n.clean)):(s.b[19][1]++,C.searchModel.refinesQuery.simpleKeys.set(n.clean,n))):(s.b[18][1]++,s.s[36]++,C.searchModel.refinesQuery.vals.has(n.clean)?(s.b[20][0]++,C.searchModel.refinesQuery.vals.delete(n.clean)):(s.b[20][1]++,C.searchModel.refinesQuery.vals.set(n.clean,n)))}(l))}}return s.s[37]++,{view:function(){s.f[2]++;const n=(s.s[8]++,m.urlController.getActiveJournal());return s.s[9]++,s.b[4][0]++,void 0===n||(s.b[4][1]++,!1===n.loaded)?(s.b[3][0]++,void s.s[10]++):(s.b[3][1]++,s.s[11]++,a.default("#tagsWrap",a.default("#tags",[a.default(".tempguidancePre","Tags"),A(),l()])))}}}},function(n,e,A){"use strict";var l,o,t,r,c,i,s=(l="/Users/bwakeford/Documents/personal/dntd-web/src/components/journalsComponent.ts",o="04e9227f2e0004ef093feb948e4a48b9b3fbe8e6",t=new(0,function(){}.constructor)("return this")(),c={path:"/Users/bwakeford/Documents/personal/dntd-web/src/components/journalsComponent.ts",statementMap:{0:{start:{line:2,column:22},end:{line:4,column:1}},1:{start:{line:3,column:4},end:{line:3,column:62}},2:{start:{line:5,column:0},end:{line:5,column:62}},3:{start:{line:6,column:18},end:{line:6,column:53}},4:{start:{line:7,column:22},end:{line:7,column:47}},5:{start:{line:10,column:8},end:{line:10,column:61}},6:{start:{line:13,column:20},end:{line:13,column:64}},7:{start:{line:14,column:8},end:{line:17,column:9}},8:{start:{line:15,column:12},end:{line:15,column:61}},9:{start:{line:16,column:12},end:{line:16,column:19}},10:{start:{line:18,column:8},end:{line:21,column:11}},11:{start:{line:19,column:23},end:{line:19,column:68}},12:{start:{line:20,column:12},end:{line:20,column:121}},13:{start:{line:23,column:4},end:{line:25,column:6}},14:{start:{line:27,column:0},end:{line:27,column:46}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:2,column:56},end:{line:2,column:57}},loc:{start:{line:2,column:71},end:{line:4,column:1}},line:2},1:{name:"journalsComponent",decl:{start:{line:8,column:9},end:{line:8,column:26}},loc:{start:{line:8,column:29},end:{line:26,column:1}},line:8},2:{name:"view",decl:{start:{line:9,column:13},end:{line:9,column:17}},loc:{start:{line:9,column:20},end:{line:11,column:5}},line:9},3:{name:"journalList",decl:{start:{line:12,column:13},end:{line:12,column:24}},loc:{start:{line:12,column:27},end:{line:22,column:5}},line:12},4:{name:"(anonymous_4)",decl:{start:{line:18,column:55},end:{line:18,column:56}},loc:{start:{line:18,column:66},end:{line:21,column:9}},line:18}},branchMap:{0:{loc:{start:{line:2,column:22},end:{line:4,column:1}},type:"binary-expr",locations:[{start:{line:2,column:23},end:{line:2,column:27}},{start:{line:2,column:31},end:{line:2,column:51}},{start:{line:2,column:56},end:{line:4,column:1}}],line:2},1:{loc:{start:{line:3,column:11},end:{line:3,column:61}},type:"cond-expr",locations:[{start:{line:3,column:37},end:{line:3,column:40}},{start:{line:3,column:43},end:{line:3,column:61}}],line:3},2:{loc:{start:{line:3,column:12},end:{line:3,column:33}},type:"binary-expr",locations:[{start:{line:3,column:12},end:{line:3,column:15}},{start:{line:3,column:19},end:{line:3,column:33}}],line:3},3:{loc:{start:{line:14,column:8},end:{line:17,column:9}},type:"if",locations:[{start:{line:14,column:8},end:{line:17,column:9}},{start:{line:14,column:8},end:{line:17,column:9}}],line:14}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:"/Users/bwakeford/Documents/personal/dntd-web/src/components/journalsComponent.ts",sourceRoot:"",sources:["/Users/bwakeford/Documents/personal/dntd-web/src/components/journalsComponent.ts"],names:[],mappings:";;;;;AAAA,sDAAuB;AACvB,gDAA8C;AAE9C,SAAgB,iBAAiB;IAE7B,SAAS,IAAI;QACT,OAAO,iBAAC,CAAC,WAAW,EAAE,WAAW,EAAE,CAAC,CAAA;IACxC,CAAC;IAED,SAAS,WAAW;QAChB,IAAI,KAAK,GAAG,2BAAa,CAAC,cAAc,EAAE,CAAA;QAC1C,IAAI,KAAK,KAAK,SAAS,EAAE;YACrB,2BAAa,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAA;YAClC,OAAM;SACT;QACD,OAAO,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC,CAAC,GAAG,CAAC,OAAO,CAAC,EAAE;YACrD,IAAI,IAAI,GAAG,aAAa,OAAO,CAAC,KAAK,CAAC,EAAE,IAAI,OAAO,CAAC,EAAE,EAAE,CAAA;YACxD,OAAO,iBAAC,CAAC,IAAI,EAAE,iBAAC,CAAC,GAAG,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE,EAAE,OAAO,CAAC,KAAK,GAAG,GAAG,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC,CAAA;QAChF,CAAC,CAAC,CAAA;IACN,CAAC;IAED,OAAO;QACH,IAAI,EAAE,IAAI;KACb,CAAA;AAEL,CAAC;AAtBD,8CAsBC",sourcesContent:['import m from "mithril"\nimport { urlController } from "../controllers"\n\nexport function journalsComponent() {\n\n    function view() {\n        return m("#journals", journalList())\n    }\n\n    function journalList() {\n        let shelf = urlController.getActiveShelf()\n        if (shelf === undefined) {\n            urlController.redirect("/library")\n            return\n        }\n        return Array.from(shelf.journals.values()).map(journal => {\n            let link = `#/library/${journal.shelf.id}/${journal.id}`\n            return m("li", m("a", { href: link }, journal.title + " " + journal.loaded))\n        })\n    }\n\n    return {\n        view: view,\n    }\n\n}']},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},(i=t[r="__coverage__"]||(t[r]={}))[l]&&i[l].hash===o?i[l]:(c.hash=o,i[l]=c)),u=(s.s[0]++,s.b[0][0]++,this&&(s.b[0][1]++,this.__importDefault)||(s.b[0][2]++,function(n){return s.f[0]++,s.s[1]++,s.b[2][0]++,n&&(s.b[2][1]++,n.__esModule)?(s.b[1][0]++,n):(s.b[1][1]++,{default:n})}));s.s[2]++,Object.defineProperty(e,"__esModule",{value:!0});const a=(s.s[3]++,u(A(0))),C=(s.s[4]++,A(2));s.s[14]++,e.journalsComponent=function(){return s.f[1]++,s.s[13]++,{view:function(){return s.f[2]++,s.s[5]++,a.default("#journals",function(){s.f[3]++;let n=(s.s[6]++,C.urlController.getActiveShelf());if(s.s[7]++,void 0===n)return s.b[3][0]++,s.s[8]++,C.urlController.redirect("/library"),void s.s[9]++;s.b[3][1]++;return s.s[10]++,Array.from(n.journals.values()).map(n=>{s.f[4]++;let e=(s.s[11]++,`#/library/${n.shelf.id}/${n.id}`);return s.s[12]++,a.default("li",a.default("a",{href:e},n.title+" "+n.loaded))})}())}}}},function(n,e,A){"use strict";var l=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(e,"__esModule",{value:!0});const o=l(A(0)),t=A(3),r=A(1),c=A(2);e.syncStateComponent=function(){function n(){let n="",e="syncState "+l();switch(t.syncerModel.state){case r.SyncerState.DOWNLOADING:n="Downloading journal data from drive...";break;case r.SyncerState.PAUSED:n="Warning! - Syncing is paused.";break;case r.SyncerState.SYNCED:n="Cloud synced.";break;case r.SyncerState.UPLOADING:n="Uploading changes to drive...";break;case r.SyncerState.INITIALIZING:n="Initializing..."}return o.default("span",{id:"syncStateText",class:e},n)}function e(){let n="material-icons material-icons-outlined syncState "+l();return o.default("i",{id:"syncStateIcon",class:n},t.syncerModel.state)}function A(){if(t.syncerModel.state===r.SyncerState.PAUSED)return o.default("button",{id:"unpauseSync",class:"syncState",onclick:()=>c.syncerController.unpause()},"Unpause Syncing")}function l(){switch(t.syncerModel.state){case r.SyncerState.PAUSED:return"error";case r.SyncerState.SYNCED:return"okay";default:return"warn"}}return{view:function(){return o.default("#status",o.default("span",o.default("span",[e(),n(),A()])))}}}},function(n,e,A){"use strict";var l,o,t,r,c,i,s=(l="/Users/bwakeford/Documents/personal/dntd-web/src/components/searchbarComponent.ts",o="953b4e35d9ef331fee896789e70b8cddb8e4dfae",t=new(0,function(){}.constructor)("return this")(),c={path:"/Users/bwakeford/Documents/personal/dntd-web/src/components/searchbarComponent.ts",statementMap:{0:{start:{line:2,column:22},end:{line:4,column:1}},1:{start:{line:3,column:4},end:{line:3,column:62}},2:{start:{line:5,column:0},end:{line:5,column:62}},3:{start:{line:6,column:18},end:{line:6,column:53}},4:{start:{line:7,column:12},end:{line:7,column:25}},5:{start:{line:8,column:22},end:{line:8,column:47}},6:{start:{line:10,column:18},end:{line:10,column:41}},7:{start:{line:12,column:24},end:{line:12,column:70}},8:{start:{line:13,column:8},end:{line:14,column:19}},9:{start:{line:14,column:12},end:{line:14,column:19}},10:{start:{line:15,column:8},end:{line:18,column:11}},11:{start:{line:21,column:8},end:{line:28,column:10}},12:{start:{line:25,column:32},end:{line:25,column:52}},13:{start:{line:26,column:28},end:{line:26,column:44}},14:{start:{line:27,column:34},end:{line:27,column:56}},15:{start:{line:31,column:18},end:{line:31,column:78}},16:{start:{line:32,column:8},end:{line:32,column:42}},17:{start:{line:33,column:8},end:{line:33,column:32}},18:{start:{line:34,column:8},end:{line:34,column:116}},19:{start:{line:37,column:8},end:{line:37,column:76}},20:{start:{line:38,column:8},end:{line:38,column:25}},21:{start:{line:39,column:8},end:{line:39,column:24}},22:{start:{line:42,column:8},end:{line:45,column:9}},23:{start:{line:43,column:12},end:{line:43,column:35}},24:{start:{line:44,column:12},end:{line:44,column:32}},25:{start:{line:48,column:8},end:{line:52,column:10}},26:{start:{line:51,column:27},end:{line:51,column:77}},27:{start:{line:54,column:4},end:{line:54,column:26}},28:{start:{line:56,column:0},end:{line:56,column:48}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:2,column:56},end:{line:2,column:57}},loc:{start:{line:2,column:71},end:{line:4,column:1}},line:2},1:{name:"searchbarComponent",decl:{start:{line:9,column:9},end:{line:9,column:27}},loc:{start:{line:9,column:30},end:{line:55,column:1}},line:9},2:{name:"view",decl:{start:{line:11,column:13},end:{line:11,column:17}},loc:{start:{line:11,column:20},end:{line:19,column:5}},line:11},3:{name:"searchNodeSettings",decl:{start:{line:20,column:13},end:{line:20,column:31}},loc:{start:{line:20,column:34},end:{line:29,column:5}},line:20},4:{name:"(anonymous_4)",decl:{start:{line:25,column:21},end:{line:25,column:22}},loc:{start:{line:25,column:32},end:{line:25,column:52}},line:25},5:{name:"(anonymous_5)",decl:{start:{line:26,column:22},end:{line:26,column:23}},loc:{start:{line:26,column:28},end:{line:26,column:44}},line:26},6:{name:"(anonymous_6)",decl:{start:{line:27,column:23},end:{line:27,column:24}},loc:{start:{line:27,column:34},end:{line:27,column:56}},line:27},7:{name:"onSearchInput",decl:{start:{line:30,column:13},end:{line:30,column:26}},loc:{start:{line:30,column:34},end:{line:35,column:5}},line:30},8:{name:"onSearchUpdate",decl:{start:{line:36,column:13},end:{line:36,column:27}},loc:{start:{line:36,column:30},end:{line:40,column:5}},line:36},9:{name:"onSearchKeydown",decl:{start:{line:41,column:13},end:{line:41,column:28}},loc:{start:{line:41,column:36},end:{line:46,column:5}},line:41},10:{name:"clearSearchNodeSettings",decl:{start:{line:47,column:13},end:{line:47,column:36}},loc:{start:{line:47,column:39},end:{line:53,column:5}},line:47},11:{name:"(anonymous_11)",decl:{start:{line:51,column:21},end:{line:51,column:22}},loc:{start:{line:51,column:27},end:{line:51,column:77}},line:51}},branchMap:{0:{loc:{start:{line:2,column:22},end:{line:4,column:1}},type:"binary-expr",locations:[{start:{line:2,column:23},end:{line:2,column:27}},{start:{line:2,column:31},end:{line:2,column:51}},{start:{line:2,column:56},end:{line:4,column:1}}],line:2},1:{loc:{start:{line:3,column:11},end:{line:3,column:61}},type:"cond-expr",locations:[{start:{line:3,column:37},end:{line:3,column:40}},{start:{line:3,column:43},end:{line:3,column:61}}],line:3},2:{loc:{start:{line:3,column:12},end:{line:3,column:33}},type:"binary-expr",locations:[{start:{line:3,column:12},end:{line:3,column:15}},{start:{line:3,column:19},end:{line:3,column:33}}],line:3},3:{loc:{start:{line:13,column:8},end:{line:14,column:19}},type:"if",locations:[{start:{line:13,column:8},end:{line:14,column:19}},{start:{line:13,column:8},end:{line:14,column:19}}],line:13},4:{loc:{start:{line:13,column:12},end:{line:13,column:61}},type:"binary-expr",locations:[{start:{line:13,column:12},end:{line:13,column:33}},{start:{line:13,column:37},end:{line:13,column:61}}],line:13},5:{loc:{start:{line:32,column:20},end:{line:32,column:41}},type:"cond-expr",locations:[{start:{line:32,column:28},end:{line:32,column:34}},{start:{line:32,column:37},end:{line:32,column:41}}],line:32},6:{loc:{start:{line:42,column:8},end:{line:45,column:9}},type:"if",locations:[{start:{line:42,column:8},end:{line:45,column:9}},{start:{line:42,column:8},end:{line:45,column:9}}],line:42},7:{loc:{start:{line:42,column:12},end:{line:42,column:50}},type:"binary-expr",locations:[{start:{line:42,column:12},end:{line:42,column:31}},{start:{line:42,column:35},end:{line:42,column:50}}],line:42}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},b:{0:[0,0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0]},inputSourceMap:{version:3,file:"/Users/bwakeford/Documents/personal/dntd-web/src/components/searchbarComponent.ts",sourceRoot:"",sources:["/Users/bwakeford/Documents/personal/dntd-web/src/components/searchbarComponent.ts"],names:[],mappings:";;;;;AAAA,sDAAuB;AACvB,0BAAgC;AAEhC,gDAAiG;AAGjG,SAAgB,kBAAkB;IAC9B,MAAM,KAAK,GAAU,EAAE,GAAG,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,CAAA;IAE5C,SAAS,IAAI;QACT,MAAM,OAAO,GAAG,2BAAa,CAAC,gBAAgB,EAAE,CAAA;QAChD,IAAI,OAAO,KAAK,SAAS,IAAI,OAAO,CAAC,MAAM,KAAK,KAAK;YAAE,OAAM;QAC7D,OAAO,iBAAC,CAAC,SAAS,EAAE;YAChB,iBAAC,CAAC,cAAc,EAAE,kBAAkB,EAAE,EAAE,iBAAC,CAAC,KAAK,CAAC,eAAW,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;YAC/E,iBAAC,CAAC,QAAQ,EAAE,uBAAuB,EAAE,EAAE,GAAG,CAAC;SAC9C,CAAC,CAAA;IACN,CAAC;IAED,SAAS,kBAAkB;QACvB,OAAO;YACH,WAAW,EAAE,yBAAyB;YACtC,eAAe,EAAE,MAAM;YACvB,KAAK,EAAE,iBAAiB;YACxB,OAAO,EAAE,CAAC,KAAU,EAAE,EAAE,CAAC,aAAa,CAAC,KAAK,CAAC;YAC7C,QAAQ,EAAE,GAAG,EAAE,CAAC,cAAc,EAAE;YAChC,SAAS,EAAE,CAAC,KAAU,EAAE,EAAE,CAAC,eAAe,CAAC,KAAK,CAAC;SACpD,CAAA;IACL,CAAC;IAED,SAAS,aAAa,CAAC,KAAU;QAC7B,IAAI,GAAG,GAAG,6BAAe,CAAC,gBAAgB,CAAC,KAAK,CAAC,MAAM,CAAC,CAAA;QACxD,KAAK,CAAC,GAAG,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAA;QACjC,KAAK,CAAC,EAAE,GAAG,KAAK,CAAC,MAAM,CAAA;QACvB,8BAAgB,CAAC,eAAe,CAAC,4BAAc,CAAC,MAAM,CAAC,KAAK,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,CAAA;IACnF,CAAC;IAED,SAAS,cAAc;QACnB,6BAAe,CAAC,gBAAgB,CAAC,KAAK,CAAC,EAAE,EAAE,KAAK,CAAC,GAAG,CAAC,CAAA;QACrD,KAAK,CAAC,GAAG,GAAG,IAAI,CAAA;QAChB,KAAK,CAAC,EAAE,GAAG,IAAI,CAAA;IACnB,CAAC;IAED,SAAS,eAAe,CAAC,KAAU;QAC/B,IAAI,KAAK,CAAC,OAAO,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE;YACxC,KAAK,CAAC,cAAc,EAAE,CAAA;YACtB,KAAK,CAAC,MAAM,CAAC,IAAI,EAAE,CAAA;SACtB;IACL,CAAC;IAED,SAAS,uBAAuB;QAC5B,OAAO;YACH,EAAE,EAAE,aAAa;YACjB,KAAK,EAAE,KAAK;YACZ,OAAO,EAAE,GAAG,EAAE,CAAC,8BAAgB,CAAC,eAAe,CAAC,EAAE,CAAC;SACtD,CAAA;IACL,CAAC;IAED,OAAO,EAAE,IAAI,EAAE,IAAI,EAAE,CAAA;AACzB,CAAC;AApDD,gDAoDC",sourcesContent:['import m from "mithril"\nimport { searchModel } from ".."\nimport { Caret } from "../types"\nimport { caretController, textController, searchController, urlController } from "../controllers"\n\n\nexport function searchbarComponent() {\n    const caret: Caret = { pos: null, el: null }\n\n    function view() {\n        const journal = urlController.getActiveJournal()\n        if (journal === undefined || journal.loaded === false) return\n        return m("#search", [\n            m("#searchQuery", searchNodeSettings(), m.trust(searchModel.barQuery.rendered)),\n            m("button", clearSearchNodeSettings(), "x")\n        ])\n    }\n\n    function searchNodeSettings() {\n        return {\n            placeholder: "Search for text or tags",\n            contenteditable: "true",\n            class: `entry breakwrap`,\n            oninput: (event: any) => onSearchInput(event),\n            onupdate: () => onSearchUpdate(),\n            onkeydown: (event: any) => onSearchKeydown(event)\n        }\n    }\n\n    function onSearchInput(event: any) {\n        let pos = caretController.getCaretPosition(event.target)\n        caret.pos = (pos) ? pos[1] : null\n        caret.el = event.target\n        searchController.updateSearchbar(textController.escape(event.target.innerText))\n    }\n\n    function onSearchUpdate() {\n        caretController.setCaretPosition(caret.el, caret.pos)\n        caret.pos = null\n        caret.el = null\n    }\n\n    function onSearchKeydown(event: any) {\n        if (event.keyCode == 13 && !event.shiftKey) {\n            event.preventDefault()\n            event.target.blur()\n        }\n    }\n\n    function clearSearchNodeSettings() {\n        return {\n            id: "clearSearch",\n            class: "del",\n            onclick: () => searchController.updateSearchbar("")\n        }\n    }\n\n    return { view: view }\n}\n']},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},(i=t[r="__coverage__"]||(t[r]={}))[l]&&i[l].hash===o?i[l]:(c.hash=o,i[l]=c)),u=(s.s[0]++,s.b[0][0]++,this&&(s.b[0][1]++,this.__importDefault)||(s.b[0][2]++,function(n){return s.f[0]++,s.s[1]++,s.b[2][0]++,n&&(s.b[2][1]++,n.__esModule)?(s.b[1][0]++,n):(s.b[1][1]++,{default:n})}));s.s[2]++,Object.defineProperty(e,"__esModule",{value:!0});const a=(s.s[3]++,u(A(0))),C=(s.s[4]++,A(3)),m=(s.s[5]++,A(2));s.s[28]++,e.searchbarComponent=function(){s.f[1]++;const n=(s.s[6]++,{pos:null,el:null});function e(){return s.f[3]++,s.s[11]++,{placeholder:"Search for text or tags",contenteditable:"true",class:"entry breakwrap",oninput:e=>(s.f[4]++,s.s[12]++,function(e){s.f[7]++;let A=(s.s[15]++,m.caretController.getCaretPosition(e.target));s.s[16]++,n.pos=A?(s.b[5][0]++,A[1]):(s.b[5][1]++,null),s.s[17]++,n.el=e.target,s.s[18]++,m.searchController.updateSearchbar(m.textController.escape(e.target.innerText))}(e)),onupdate:()=>(s.f[5]++,s.s[13]++,s.f[8]++,s.s[19]++,m.caretController.setCaretPosition(n.el,n.pos),s.s[20]++,n.pos=null,s.s[21]++,void(n.el=null)),onkeydown:n=>(s.f[6]++,s.s[14]++,function(n){s.f[9]++,s.s[22]++,s.b[7][0]++,13!=n.keyCode||(s.b[7][1]++,n.shiftKey)?s.b[6][1]++:(s.b[6][0]++,s.s[23]++,n.preventDefault(),s.s[24]++,n.target.blur())}(n))}}function A(){return s.f[10]++,s.s[25]++,{id:"clearSearch",class:"del",onclick:()=>(s.f[11]++,s.s[26]++,m.searchController.updateSearchbar(""))}}return s.s[27]++,{view:function(){s.f[2]++;const n=(s.s[7]++,m.urlController.getActiveJournal());return s.s[8]++,s.b[4][0]++,void 0===n||(s.b[4][1]++,!1===n.loaded)?(s.b[3][0]++,void s.s[9]++):(s.b[3][1]++,s.s[10]++,a.default("#search",[a.default("#searchQuery",e(),a.default.trust(C.searchModel.barQuery.rendered)),a.default("button",A(),"x")]))}}}},function(n,e,A){"use strict";var l,o,t,r,c,i,s=(l="/Users/bwakeford/Documents/personal/dntd-web/src/components/addShelvesComponent.ts",o="78ea69982492303bc2ddb9151064bfbf8bdbbf98",t=new(0,function(){}.constructor)("return this")(),c={path:"/Users/bwakeford/Documents/personal/dntd-web/src/components/addShelvesComponent.ts",statementMap:{0:{start:{line:2,column:16},end:{line:10,column:1}},1:{start:{line:3,column:28},end:{line:3,column:110}},2:{start:{line:3,column:91},end:{line:3,column:106}},3:{start:{line:4,column:4},end:{line:9,column:7}},4:{start:{line:5,column:36},end:{line:5,column:97}},5:{start:{line:5,column:42},end:{line:5,column:70}},6:{start:{line:5,column:85},end:{line:5,column:95}},7:{start:{line:6,column:35},end:{line:6,column:100}},8:{start:{line:6,column:41},end:{line:6,column:73}},9:{start:{line:6,column:88},end:{line:6,column:98}},10:{start:{line:7,column:32},end:{line:7,column:116}},11:{start:{line:8,column:8},end:{line:8,column:78}},12:{start:{line:11,column:22},end:{line:13,column:1}},13:{start:{line:12,column:4},end:{line:12,column:62}},14:{start:{line:14,column:0},end:{line:14,column:62}},15:{start:{line:15,column:18},end:{line:15,column:53}},16:{start:{line:16,column:22},end:{line:16,column:47}},17:{start:{line:18,column:23},end:{line:18,column:25}},18:{start:{line:19,column:24},end:{line:19,column:29}},19:{start:{line:21,column:8},end:{line:24,column:11}},20:{start:{line:27,column:8},end:{line:35,column:44}},21:{start:{line:29,column:27},end:{line:34,column:14}},22:{start:{line:30,column:16},end:{line:31,column:77}},23:{start:{line:31,column:20},end:{line:31,column:77}},24:{start:{line:32,column:16},end:{line:32,column:34}},25:{start:{line:33,column:16},end:{line:33,column:47}},26:{start:{line:38,column:8},end:{line:39,column:24}},27:{start:{line:39,column:12},end:{line:39,column:24}},28:{start:{line:40,column:8},end:{line:44,column:11}},29:{start:{line:43,column:32},end:{line:43,column:65}},30:{start:{line:46,column:4},end:{line:48,column:6}},31:{start:{line:50,column:0},end:{line:50,column:50}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:2,column:44},end:{line:2,column:45}},loc:{start:{line:2,column:89},end:{line:10,column:1}},line:2},1:{name:"adopt",decl:{start:{line:3,column:13},end:{line:3,column:18}},loc:{start:{line:3,column:26},end:{line:3,column:112}},line:3},2:{name:"(anonymous_2)",decl:{start:{line:3,column:70},end:{line:3,column:71}},loc:{start:{line:3,column:89},end:{line:3,column:108}},line:3},3:{name:"(anonymous_3)",decl:{start:{line:4,column:36},end:{line:4,column:37}},loc:{start:{line:4,column:63},end:{line:9,column:5}},line:4},4:{name:"fulfilled",decl:{start:{line:5,column:17},end:{line:5,column:26}},loc:{start:{line:5,column:34},end:{line:5,column:99}},line:5},5:{name:"rejected",decl:{start:{line:6,column:17},end:{line:6,column:25}},loc:{start:{line:6,column:33},end:{line:6,column:102}},line:6},6:{name:"step",decl:{start:{line:7,column:17},end:{line:7,column:21}},loc:{start:{line:7,column:30},end:{line:7,column:118}},line:7},7:{name:"(anonymous_7)",decl:{start:{line:11,column:56},end:{line:11,column:57}},loc:{start:{line:11,column:71},end:{line:13,column:1}},line:11},8:{name:"addShelvesComponent",decl:{start:{line:17,column:9},end:{line:17,column:28}},loc:{start:{line:17,column:31},end:{line:49,column:1}},line:17},9:{name:"view",decl:{start:{line:20,column:13},end:{line:20,column:17}},loc:{start:{line:20,column:20},end:{line:25,column:5}},line:20},10:{name:"addShelvesButton",decl:{start:{line:26,column:13},end:{line:26,column:29}},loc:{start:{line:26,column:32},end:{line:36,column:5}},line:26},11:{name:"(anonymous_11)",decl:{start:{line:29,column:21},end:{line:29,column:22}},loc:{start:{line:29,column:27},end:{line:34,column:14}},line:29},12:{name:"(anonymous_12)",decl:{start:{line:29,column:59},end:{line:29,column:60}},loc:{start:{line:29,column:72},end:{line:34,column:13}},line:29},13:{name:"addShelvesTextbox",decl:{start:{line:37,column:13},end:{line:37,column:30}},loc:{start:{line:37,column:33},end:{line:45,column:5}},line:37},14:{name:"(anonymous_14)",decl:{start:{line:43,column:21},end:{line:43,column:22}},loc:{start:{line:43,column:32},end:{line:43,column:65}},line:43}},branchMap:{0:{loc:{start:{line:2,column:16},end:{line:10,column:1}},type:"binary-expr",locations:[{start:{line:2,column:17},end:{line:2,column:21}},{start:{line:2,column:25},end:{line:2,column:39}},{start:{line:2,column:44},end:{line:10,column:1}}],line:2},1:{loc:{start:{line:3,column:35},end:{line:3,column:109}},type:"cond-expr",locations:[{start:{line:3,column:56},end:{line:3,column:61}},{start:{line:3,column:64},end:{line:3,column:109}}],line:3},2:{loc:{start:{line:4,column:16},end:{line:4,column:34}},type:"binary-expr",locations:[{start:{line:4,column:16},end:{line:4,column:17}},{start:{line:4,column:22},end:{line:4,column:33}}],line:4},3:{loc:{start:{line:7,column:32},end:{line:7,column:115}},type:"cond-expr",locations:[{start:{line:7,column:46},end:{line:7,column:67}},{start:{line:7,column:70},end:{line:7,column:115}}],line:7},4:{loc:{start:{line:8,column:51},end:{line:8,column:67}},type:"binary-expr",locations:[{start:{line:8,column:51},end:{line:8,column:61}},{start:{line:8,column:65},end:{line:8,column:67}}],line:8},5:{loc:{start:{line:11,column:22},end:{line:13,column:1}},type:"binary-expr",locations:[{start:{line:11,column:23},end:{line:11,column:27}},{start:{line:11,column:31},end:{line:11,column:51}},{start:{line:11,column:56},end:{line:13,column:1}}],line:11},6:{loc:{start:{line:12,column:11},end:{line:12,column:61}},type:"cond-expr",locations:[{start:{line:12,column:37},end:{line:12,column:40}},{start:{line:12,column:43},end:{line:12,column:61}}],line:12},7:{loc:{start:{line:12,column:12},end:{line:12,column:33}},type:"binary-expr",locations:[{start:{line:12,column:12},end:{line:12,column:15}},{start:{line:12,column:19},end:{line:12,column:33}}],line:12},8:{loc:{start:{line:30,column:16},end:{line:31,column:77}},type:"if",locations:[{start:{line:30,column:16},end:{line:31,column:77}},{start:{line:30,column:16},end:{line:31,column:77}}],line:30},9:{loc:{start:{line:35,column:11},end:{line:35,column:42}},type:"cond-expr",locations:[{start:{line:35,column:29},end:{line:35,column:34}},{start:{line:35,column:37},end:{line:35,column:42}}],line:35},10:{loc:{start:{line:38,column:8},end:{line:39,column:24}},type:"if",locations:[{start:{line:38,column:8},end:{line:39,column:24}},{start:{line:38,column:8},end:{line:39,column:24}}],line:38}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0},b:{0:[0,0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:"/Users/bwakeford/Documents/personal/dntd-web/src/components/addShelvesComponent.ts",sourceRoot:"",sources:["/Users/bwakeford/Documents/personal/dntd-web/src/components/addShelvesComponent.ts"],names:[],mappings:";;;;;;;;;;;;;;AAAA,sDAAuB;AACvB,gDAAkD;AAElD,SAAgB,mBAAmB;IAE/B,IAAI,YAAY,GAAG,EAAE,CAAA;IACrB,IAAI,aAAa,GAAG,KAAK,CAAA;IAEzB,SAAS,IAAI;QACT,OAAO,iBAAC,CAAC,aAAa,EAAE;YACpB,gBAAgB,EAAE;YAClB,iBAAiB,EAAE;SACtB,CAAC,CAAA;IACN,CAAC;IAED,SAAS,gBAAgB;QACrB,OAAO,iBAAC,CAAC,QAAQ,EAAE;YACf,EAAE,EAAE,kBAAkB;YACtB,OAAO,EAAE,GAAS,EAAE;gBAChB,IAAI,aAAa;oBAAE,+BAAiB,CAAC,UAAU,CAAC,YAAY,CAAC,CAAA;gBAC7D,YAAY,GAAG,EAAE,CAAA;gBACjB,aAAa,GAAG,CAAC,aAAa,CAAA;YAClC,CAAC,CAAA;SACJ,EAAE,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,CAAA;IACvC,CAAC;IAED,SAAS,iBAAiB;QACtB,IAAI,CAAC,aAAa;YAAE,OAAO,IAAI,CAAA;QAC/B,OAAO,iBAAC,CAAC,UAAU,EAAE;YACjB,EAAE,EAAE,gBAAgB;YACpB,WAAW,EAAE,mDAAmD;YAChE,OAAO,EAAE,CAAC,KAAU,EAAE,EAAE,CAAC,YAAY,GAAG,KAAK,CAAC,MAAM,CAAC,KAAK;SAC7D,CAAC,CAAA;IACN,CAAC;IAED,OAAO;QACH,IAAI,EAAE,IAAI;KACb,CAAA;AAEL,CAAC;AApCD,kDAoCC",sourcesContent:['import m from "mithril"\r\nimport { libraryController } from "../controllers"\r\n\r\nexport function addShelvesComponent() {\r\n\r\n    let newShelfUrls = ""\r\n    let addingShelves = false\r\n\r\n    function view() {\r\n        return m("#addShelves", [\r\n            addShelvesButton(),\r\n            addShelvesTextbox(),\r\n        ])\r\n    }\r\n\r\n    function addShelvesButton() {\r\n        return m("button", {\r\n            id: "addShelvesButton",\r\n            onclick: async () => {\r\n                if (addingShelves) libraryController.addShelves(newShelfUrls)\r\n                newShelfUrls = ""\r\n                addingShelves = !addingShelves\r\n            }\r\n        }, (addingShelves) ? " ✓ " : "+/-")\r\n    }\r\n\r\n    function addShelvesTextbox() {\r\n        if (!addingShelves) return null\r\n        return m("textarea", {\r\n            id: "addShelvesText",\r\n            placeholder: "Enter list of Google Sheets Spreadsheet URLs here",\r\n            oninput: (event: any) => newShelfUrls = event.target.value\r\n        })\r\n    }\r\n\r\n    return {\r\n        view: view,\r\n    }\r\n\r\n}']},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},(i=t[r="__coverage__"]||(t[r]={}))[l]&&i[l].hash===o?i[l]:(c.hash=o,i[l]=c)),u=(s.s[0]++,s.b[0][0]++,this&&(s.b[0][1]++,this.__awaiter)||(s.b[0][2]++,function(n,e,A,l){return s.f[0]++,s.s[3]++,new(s.b[2][0]++,A||(s.b[2][1]++,A=Promise))((function(o,t){function r(n){s.f[4]++,s.s[4]++;try{s.s[5]++,i(l.next(n))}catch(n){s.s[6]++,t(n)}}function c(n){s.f[5]++,s.s[7]++;try{s.s[8]++,i(l.throw(n))}catch(n){s.s[9]++,t(n)}}function i(n){var e;s.f[6]++,s.s[10]++,n.done?(s.b[3][0]++,o(n.value)):(s.b[3][1]++,(e=n.value,s.f[1]++,s.s[1]++,e instanceof A?(s.b[1][0]++,e):(s.b[1][1]++,new A((function(n){s.f[2]++,s.s[2]++,n(e)})))).then(r,c))}s.f[3]++,s.s[11]++,i((l=l.apply(n,(s.b[4][0]++,e||(s.b[4][1]++,[])))).next())}))})),a=(s.s[12]++,s.b[5][0]++,this&&(s.b[5][1]++,this.__importDefault)||(s.b[5][2]++,function(n){return s.f[7]++,s.s[13]++,s.b[7][0]++,n&&(s.b[7][1]++,n.__esModule)?(s.b[6][0]++,n):(s.b[6][1]++,{default:n})}));s.s[14]++,Object.defineProperty(e,"__esModule",{value:!0});const C=(s.s[15]++,a(A(0))),m=(s.s[16]++,A(2));s.s[31]++,e.addShelvesComponent=function(){s.f[8]++;let n=(s.s[17]++,""),e=(s.s[18]++,!1);function A(){return s.f[10]++,s.s[20]++,C.default("button",{id:"addShelvesButton",onclick:()=>(s.f[11]++,s.s[21]++,u(this,void 0,void 0,(function*(){s.f[12]++,s.s[22]++,e?(s.b[8][0]++,s.s[23]++,m.libraryController.addShelves(n)):s.b[8][1]++,s.s[24]++,n="",s.s[25]++,e=!e})))},e?(s.b[9][0]++," ✓ "):(s.b[9][1]++,"+/-"))}function l(){return s.f[13]++,s.s[26]++,e?(s.b[10][1]++,s.s[28]++,C.default("textarea",{id:"addShelvesText",placeholder:"Enter list of Google Sheets Spreadsheet URLs here",oninput:e=>(s.f[14]++,s.s[29]++,n=e.target.value)})):(s.b[10][0]++,s.s[27]++,null)}return s.s[30]++,{view:function(){return s.f[9]++,s.s[19]++,C.default("#addShelves",[A(),l()])}}}},function(n,e,A){"use strict";var l,o,t,r,c,i,s=(l="/Users/bwakeford/Documents/personal/dntd-web/src/components/breadcrumbComponent.ts",o="4bf65dc32dc07a18ede5041d8d3fcf0481dffe2c",t=new(0,function(){}.constructor)("return this")(),c={path:"/Users/bwakeford/Documents/personal/dntd-web/src/components/breadcrumbComponent.ts",statementMap:{0:{start:{line:2,column:22},end:{line:4,column:1}},1:{start:{line:3,column:4},end:{line:3,column:62}},2:{start:{line:5,column:0},end:{line:5,column:62}},3:{start:{line:6,column:18},end:{line:6,column:53}},4:{start:{line:7,column:22},end:{line:7,column:47}},5:{start:{line:10,column:8},end:{line:10,column:98}},6:{start:{line:12,column:4},end:{line:14,column:6}},7:{start:{line:16,column:0},end:{line:16,column:50}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:2,column:56},end:{line:2,column:57}},loc:{start:{line:2,column:71},end:{line:4,column:1}},line:2},1:{name:"breadcrumbComponent",decl:{start:{line:8,column:9},end:{line:8,column:28}},loc:{start:{line:8,column:31},end:{line:15,column:1}},line:8},2:{name:"view",decl:{start:{line:9,column:13},end:{line:9,column:17}},loc:{start:{line:9,column:20},end:{line:11,column:5}},line:9}},branchMap:{0:{loc:{start:{line:2,column:22},end:{line:4,column:1}},type:"binary-expr",locations:[{start:{line:2,column:23},end:{line:2,column:27}},{start:{line:2,column:31},end:{line:2,column:51}},{start:{line:2,column:56},end:{line:4,column:1}}],line:2},1:{loc:{start:{line:3,column:11},end:{line:3,column:61}},type:"cond-expr",locations:[{start:{line:3,column:37},end:{line:3,column:40}},{start:{line:3,column:43},end:{line:3,column:61}}],line:3},2:{loc:{start:{line:3,column:12},end:{line:3,column:33}},type:"binary-expr",locations:[{start:{line:3,column:12},end:{line:3,column:15}},{start:{line:3,column:19},end:{line:3,column:33}}],line:3}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},f:{0:0,1:0,2:0},b:{0:[0,0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:"/Users/bwakeford/Documents/personal/dntd-web/src/components/breadcrumbComponent.ts",sourceRoot:"",sources:["/Users/bwakeford/Documents/personal/dntd-web/src/components/breadcrumbComponent.ts"],names:[],mappings:";;;;;AAAA,sDAAuB;AACvB,gDAA8C;AAE9C,SAAgB,mBAAmB;IAE/B,SAAS,IAAI;QACT,OAAO,iBAAC,CAAC,aAAa,EAAE,2BAAa,CAAC,kBAAkB,EAAE,CAAC,CAAA;IAC/D,CAAC;IAED,OAAO;QACH,IAAI,EAAE,IAAI;KACb,CAAA;AAEL,CAAC;AAVD,kDAUC",sourcesContent:['import m from "mithril"\nimport { urlController } from "../controllers"\n\nexport function breadcrumbComponent() {\n\n    function view() {\n        return m("#breadcrumb", urlController.getBreadcrumbTrail())\n    }\n\n    return {\n        view: view,\n    }\n\n}']},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},(i=t[r="__coverage__"]||(t[r]={}))[l]&&i[l].hash===o?i[l]:(c.hash=o,i[l]=c)),u=(s.s[0]++,s.b[0][0]++,this&&(s.b[0][1]++,this.__importDefault)||(s.b[0][2]++,function(n){return s.f[0]++,s.s[1]++,s.b[2][0]++,n&&(s.b[2][1]++,n.__esModule)?(s.b[1][0]++,n):(s.b[1][1]++,{default:n})}));s.s[2]++,Object.defineProperty(e,"__esModule",{value:!0});const a=(s.s[3]++,u(A(0))),C=(s.s[4]++,A(2));s.s[7]++,e.breadcrumbComponent=function(){return s.f[1]++,s.s[6]++,{view:function(){return s.f[2]++,s.s[5]++,a.default("#breadcrumb",C.urlController.getBreadcrumbTrail())}}}},function(n,e,A){"use strict";var l,o,t,r,c,i,s=(l="/Users/bwakeford/Documents/personal/dntd-web/src/views/signinView.ts",o="a2e047a5e33431abd0f38abd6061b03ce1bbcbae",t=new(0,function(){}.constructor)("return this")(),c={path:"/Users/bwakeford/Documents/personal/dntd-web/src/views/signinView.ts",statementMap:{0:{start:{line:2,column:22},end:{line:4,column:1}},1:{start:{line:3,column:4},end:{line:3,column:62}},2:{start:{line:5,column:0},end:{line:5,column:62}},3:{start:{line:6,column:18},end:{line:6,column:53}},4:{start:{line:7,column:12},end:{line:7,column:25}},5:{start:{line:8,column:21},end:{line:8,column:45}},6:{start:{line:11,column:8},end:{line:13,column:11}},7:{start:{line:16,column:8},end:{line:18,column:9}},8:{start:{line:17,column:12},end:{line:17,column:46}},9:{start:{line:20,column:4},end:{line:23,column:6}},10:{start:{line:25,column:0},end:{line:25,column:32}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:2,column:56},end:{line:2,column:57}},loc:{start:{line:2,column:71},end:{line:4,column:1}},line:2},1:{name:"signinView",decl:{start:{line:9,column:9},end:{line:9,column:19}},loc:{start:{line:9,column:22},end:{line:24,column:1}},line:9},2:{name:"view",decl:{start:{line:10,column:13},end:{line:10,column:17}},loc:{start:{line:10,column:20},end:{line:14,column:5}},line:10},3:{name:"onupdate",decl:{start:{line:15,column:13},end:{line:15,column:21}},loc:{start:{line:15,column:24},end:{line:19,column:5}},line:15}},branchMap:{0:{loc:{start:{line:2,column:22},end:{line:4,column:1}},type:"binary-expr",locations:[{start:{line:2,column:23},end:{line:2,column:27}},{start:{line:2,column:31},end:{line:2,column:51}},{start:{line:2,column:56},end:{line:4,column:1}}],line:2},1:{loc:{start:{line:3,column:11},end:{line:3,column:61}},type:"cond-expr",locations:[{start:{line:3,column:37},end:{line:3,column:40}},{start:{line:3,column:43},end:{line:3,column:61}}],line:3},2:{loc:{start:{line:3,column:12},end:{line:3,column:33}},type:"binary-expr",locations:[{start:{line:3,column:12},end:{line:3,column:15}},{start:{line:3,column:19},end:{line:3,column:33}}],line:3},3:{loc:{start:{line:16,column:8},end:{line:18,column:9}},type:"if",locations:[{start:{line:16,column:8},end:{line:18,column:9}},{start:{line:16,column:8},end:{line:18,column:9}}],line:16}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},f:{0:0,1:0,2:0,3:0},b:{0:[0,0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:"/Users/bwakeford/Documents/personal/dntd-web/src/views/signinView.ts",sourceRoot:"",sources:["/Users/bwakeford/Documents/personal/dntd-web/src/views/signinView.ts"],names:[],mappings:";;;;;AAAA,sDAAuB;AACvB,0BAAgC;AAChC,8CAA+C;AAE/C,SAAgB,UAAU;IAEtB,SAAS,IAAI;QACT,OAAO,iBAAC,CAAC,OAAO,EAAE;YACd,iBAAC,CAAC,4BAAe,CAAC;SACrB,CAAC,CAAA;IACN,CAAC;IAED,SAAS,QAAQ;QACb,IAAI,eAAW,CAAC,UAAU,EAAE;YACxB,MAAM,CAAC,QAAQ,CAAC,IAAI,GAAG,UAAU,CAAA;SACpC;IACL,CAAC;IAED,OAAO;QACH,IAAI,EAAE,IAAI;QACV,QAAQ,EAAE,QAAQ;KACrB,CAAA;AAEL,CAAC;AAnBD,gCAmBC",sourcesContent:['import m from "mithril"\r\nimport { googleModel } from ".."\r\nimport { googleComponent } from "../components"\r\n\r\nexport function signinView() {\r\n\r\n    function view() {\r\n        return m("#auth", [\r\n            m(googleComponent),\r\n        ])\r\n    }\r\n\r\n    function onupdate() {\r\n        if (googleModel.isSignedIn) {\r\n            window.location.hash = "/library" // TODO: redirect to correct place\r\n        }\r\n    }\r\n\r\n    return {\r\n        view: view,\r\n        onupdate: onupdate,\r\n    }\r\n\r\n}']},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},(i=t[r="__coverage__"]||(t[r]={}))[l]&&i[l].hash===o?i[l]:(c.hash=o,i[l]=c)),u=(s.s[0]++,s.b[0][0]++,this&&(s.b[0][1]++,this.__importDefault)||(s.b[0][2]++,function(n){return s.f[0]++,s.s[1]++,s.b[2][0]++,n&&(s.b[2][1]++,n.__esModule)?(s.b[1][0]++,n):(s.b[1][1]++,{default:n})}));s.s[2]++,Object.defineProperty(e,"__esModule",{value:!0});const a=(s.s[3]++,u(A(0))),C=(s.s[4]++,A(3)),m=(s.s[5]++,A(7));s.s[10]++,e.signinView=function(){return s.f[1]++,s.s[9]++,{view:function(){return s.f[2]++,s.s[6]++,a.default("#auth",[a.default(m.googleComponent)])},onupdate:function(){s.f[3]++,s.s[7]++,C.googleModel.isSignedIn?(s.b[3][0]++,s.s[8]++,window.location.hash="/library"):s.b[3][1]++}}}},function(n,e,A){"use strict";var l,o,t,r,c,i,s=(l="/Users/bwakeford/Documents/personal/dntd-web/src/views/libraryView.ts",o="4cc850a0bd68737ed3bd81d44682cd87765cc7fb",t=new(0,function(){}.constructor)("return this")(),c={path:"/Users/bwakeford/Documents/personal/dntd-web/src/views/libraryView.ts",statementMap:{0:{start:{line:2,column:22},end:{line:4,column:1}},1:{start:{line:3,column:4},end:{line:3,column:62}},2:{start:{line:5,column:0},end:{line:5,column:62}},3:{start:{line:6,column:18},end:{line:6,column:53}},4:{start:{line:7,column:21},end:{line:7,column:45}},5:{start:{line:10,column:8},end:{line:15,column:11}},6:{start:{line:17,column:4},end:{line:19,column:6}},7:{start:{line:21,column:0},end:{line:21,column:34}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:2,column:56},end:{line:2,column:57}},loc:{start:{line:2,column:71},end:{line:4,column:1}},line:2},1:{name:"libraryView",decl:{start:{line:8,column:9},end:{line:8,column:20}},loc:{start:{line:8,column:23},end:{line:20,column:1}},line:8},2:{name:"view",decl:{start:{line:9,column:13},end:{line:9,column:17}},loc:{start:{line:9,column:20},end:{line:16,column:5}},line:9}},branchMap:{0:{loc:{start:{line:2,column:22},end:{line:4,column:1}},type:"binary-expr",locations:[{start:{line:2,column:23},end:{line:2,column:27}},{start:{line:2,column:31},end:{line:2,column:51}},{start:{line:2,column:56},end:{line:4,column:1}}],line:2},1:{loc:{start:{line:3,column:11},end:{line:3,column:61}},type:"cond-expr",locations:[{start:{line:3,column:37},end:{line:3,column:40}},{start:{line:3,column:43},end:{line:3,column:61}}],line:3},2:{loc:{start:{line:3,column:12},end:{line:3,column:33}},type:"binary-expr",locations:[{start:{line:3,column:12},end:{line:3,column:15}},{start:{line:3,column:19},end:{line:3,column:33}}],line:3}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},f:{0:0,1:0,2:0},b:{0:[0,0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:"/Users/bwakeford/Documents/personal/dntd-web/src/views/libraryView.ts",sourceRoot:"",sources:["/Users/bwakeford/Documents/personal/dntd-web/src/views/libraryView.ts"],names:[],mappings:";;;;;AAAA,sDAAuB;AACvB,8CAEsB;AAEtB,SAAgB,WAAW;IAEvB,SAAS,IAAI;QACT,OAAO,iBAAC,CAAC,UAAU,EAAE;YACjB,iBAAC,CAAC,4BAAe,CAAC;YAClB,iBAAC,CAAC,+BAAkB,CAAC;YACrB,iBAAC,CAAC,gCAAmB,CAAC;YACtB,iBAAC,CAAC,6BAAgB,CAAC;SACtB,CAAC,CAAA;IACN,CAAC;IAED,OAAO;QACH,IAAI,EAAE,IAAI;KACb,CAAA;AAEL,CAAC;AAfD,kCAeC",sourcesContent:['import m from "mithril"\nimport { \n    googleComponent, shelvesComponent, syncStateComponent, addShelvesComponent\n} from "../components"\n\nexport function libraryView() {\n\n    function view() {\n        return m("#library", [\n            m(googleComponent),\n            m(syncStateComponent),\n            m(addShelvesComponent),\n            m(shelvesComponent),\n        ])\n    }\n\n    return {\n        view: view\n    }\n\n}']},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},(i=t[r="__coverage__"]||(t[r]={}))[l]&&i[l].hash===o?i[l]:(c.hash=o,i[l]=c)),u=(s.s[0]++,s.b[0][0]++,this&&(s.b[0][1]++,this.__importDefault)||(s.b[0][2]++,function(n){return s.f[0]++,s.s[1]++,s.b[2][0]++,n&&(s.b[2][1]++,n.__esModule)?(s.b[1][0]++,n):(s.b[1][1]++,{default:n})}));s.s[2]++,Object.defineProperty(e,"__esModule",{value:!0});const a=(s.s[3]++,u(A(0))),C=(s.s[4]++,A(7));s.s[7]++,e.libraryView=function(){return s.f[1]++,s.s[6]++,{view:function(){return s.f[2]++,s.s[5]++,a.default("#library",[a.default(C.googleComponent),a.default(C.syncStateComponent),a.default(C.addShelvesComponent),a.default(C.shelvesComponent)])}}}},function(n,e,A){"use strict";var l,o,t,r,c,i,s=(l="/Users/bwakeford/Documents/personal/dntd-web/src/views/journalView.ts",o="65f1bf0ae659dd1a414881cb2696b582731f921d",t=new(0,function(){}.constructor)("return this")(),c={path:"/Users/bwakeford/Documents/personal/dntd-web/src/views/journalView.ts",statementMap:{0:{start:{line:2,column:22},end:{line:4,column:1}},1:{start:{line:3,column:4},end:{line:3,column:62}},2:{start:{line:5,column:0},end:{line:5,column:62}},3:{start:{line:6,column:18},end:{line:6,column:53}},4:{start:{line:7,column:22},end:{line:7,column:47}},5:{start:{line:8,column:21},end:{line:8,column:45}},6:{start:{line:11,column:24},end:{line:11,column:70}},7:{start:{line:12,column:8},end:{line:13,column:19}},8:{start:{line:13,column:12},end:{line:13,column:19}},9:{start:{line:14,column:8},end:{line:14,column:61}},10:{start:{line:17,column:8},end:{line:27,column:11}},11:{start:{line:29,column:4},end:{line:32,column:6}},12:{start:{line:34,column:0},end:{line:34,column:34}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:2,column:56},end:{line:2,column:57}},loc:{start:{line:2,column:71},end:{line:4,column:1}},line:2},1:{name:"journalView",decl:{start:{line:9,column:9},end:{line:9,column:20}},loc:{start:{line:9,column:23},end:{line:33,column:1}},line:9},2:{name:"oninit",decl:{start:{line:10,column:13},end:{line:10,column:19}},loc:{start:{line:10,column:22},end:{line:15,column:5}},line:10},3:{name:"view",decl:{start:{line:16,column:13},end:{line:16,column:17}},loc:{start:{line:16,column:20},end:{line:28,column:5}},line:16}},branchMap:{0:{loc:{start:{line:2,column:22},end:{line:4,column:1}},type:"binary-expr",locations:[{start:{line:2,column:23},end:{line:2,column:27}},{start:{line:2,column:31},end:{line:2,column:51}},{start:{line:2,column:56},end:{line:4,column:1}}],line:2},1:{loc:{start:{line:3,column:11},end:{line:3,column:61}},type:"cond-expr",locations:[{start:{line:3,column:37},end:{line:3,column:40}},{start:{line:3,column:43},end:{line:3,column:61}}],line:3},2:{loc:{start:{line:3,column:12},end:{line:3,column:33}},type:"binary-expr",locations:[{start:{line:3,column:12},end:{line:3,column:15}},{start:{line:3,column:19},end:{line:3,column:33}}],line:3},3:{loc:{start:{line:12,column:8},end:{line:13,column:19}},type:"if",locations:[{start:{line:12,column:8},end:{line:13,column:19}},{start:{line:12,column:8},end:{line:13,column:19}}],line:12},4:{loc:{start:{line:12,column:12},end:{line:12,column:51}},type:"binary-expr",locations:[{start:{line:12,column:12},end:{line:12,column:33}},{start:{line:12,column:37},end:{line:12,column:51}}],line:12}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0},f:{0:0,1:0,2:0,3:0},b:{0:[0,0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0]},inputSourceMap:{version:3,file:"/Users/bwakeford/Documents/personal/dntd-web/src/views/journalView.ts",sourceRoot:"",sources:["/Users/bwakeford/Documents/personal/dntd-web/src/views/journalView.ts"],names:[],mappings:";;;;;AAAA,sDAAuB;AACvB,gDAAiE;AACjE,8CAGsB;AAEtB,SAAgB,WAAW;IAEvB,SAAS,MAAM;QACX,MAAM,OAAO,GAAG,2BAAa,CAAC,gBAAgB,EAAE,CAAA;QAChD,IAAI,OAAO,KAAK,SAAS,IAAI,OAAO,CAAC,MAAM;YAAE,OAAM;QACnD,+BAAiB,CAAC,WAAW,CAAC,OAAO,CAAC,CAAA;IAC1C,CAAC;IAED,SAAS,IAAI;QACT,OAAO,iBAAC,CAAC,QAAQ,EAAE;YACf,iBAAC,CAAC,4BAAe,CAAC;YAClB,iBAAC,CAAC,+BAAkB,CAAC;YACrB,iBAAC,CAAC,gCAAmB,CAAC;YACtB,iBAAC,CAAC,+BAAkB,CAAC;YACrB,iBAAC,CAAC,6BAAgB,CAAC;YACnB,iBAAC,CAAC,cAAc,EAAE;gBACd,iBAAC,CAAC,6BAAgB,CAAC;gBACnB,iBAAC,CAAC,6BAAgB,CAAC;aACtB,CAAC;SACL,CAAC,CAAA;IACN,CAAC;IAED,OAAO;QACH,IAAI,EAAE,IAAI;QACV,MAAM,EAAE,MAAM;KACjB,CAAA;AAEL,CAAC;AA3BD,kCA2BC",sourcesContent:['import m from "mithril"\nimport { urlController, journalController } from "../controllers"\nimport {\n    googleComponent, breadcrumbComponent, entriesComponent, syncStateComponent,\n    searchbarComponent, refinesComponent, composeComponent\n} from "../components"\n\nexport function journalView() {\n\n    function oninit() {\n        const journal = urlController.getActiveJournal()\n        if (journal === undefined || journal.loaded) return\n        journalController.loadEntries(journal)\n    }\n\n    function view() {\n        return m("#shelf", [\n            m(googleComponent),\n            m(syncStateComponent),\n            m(breadcrumbComponent),\n            m(searchbarComponent),\n            m(refinesComponent),\n            m("#entriesWrap", [\n                m(entriesComponent),\n                m(composeComponent),\n            ])\n        ])\n    }\n\n    return {\n        view: view,\n        oninit: oninit,\n    }\n\n}\n']},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},(i=t[r="__coverage__"]||(t[r]={}))[l]&&i[l].hash===o?i[l]:(c.hash=o,i[l]=c)),u=(s.s[0]++,s.b[0][0]++,this&&(s.b[0][1]++,this.__importDefault)||(s.b[0][2]++,function(n){return s.f[0]++,s.s[1]++,s.b[2][0]++,n&&(s.b[2][1]++,n.__esModule)?(s.b[1][0]++,n):(s.b[1][1]++,{default:n})}));s.s[2]++,Object.defineProperty(e,"__esModule",{value:!0});const a=(s.s[3]++,u(A(0))),C=(s.s[4]++,A(2)),m=(s.s[5]++,A(7));s.s[12]++,e.journalView=function(){return s.f[1]++,s.s[11]++,{view:function(){return s.f[3]++,s.s[10]++,a.default("#shelf",[a.default(m.googleComponent),a.default(m.syncStateComponent),a.default(m.breadcrumbComponent),a.default(m.searchbarComponent),a.default(m.refinesComponent),a.default("#entriesWrap",[a.default(m.entriesComponent),a.default(m.composeComponent)])])},oninit:function(){s.f[2]++;const n=(s.s[6]++,C.urlController.getActiveJournal());if(s.s[7]++,s.b[4][0]++,void 0===n||(s.b[4][1]++,n.loaded))return s.b[3][0]++,void s.s[8]++;s.b[3][1]++,s.s[9]++,C.journalController.loadEntries(n)}}}}]);
//# sourceMappingURL=dntd.js.map